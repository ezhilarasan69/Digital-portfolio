<!-- Branch: experiment/vm-2486-theatre-mode-phase-5 --><!-- Revision: 3ddfdb9beeaa90e0bdb7b3e034d33fcf436dbc4e --><!-- Created at: 03 of March 2025 15:39:21 GMT+00:00 --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=auto"><meta name="description" content="View Master Template"><title>View Master Template</title><style>:where(:not(:-webkit-any(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:-moz-any(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}button{background:0 0;border:none}*,:before,:after{box-sizing:border-box}a,button{cursor:revert}ol,ul,menu{list-style:none}img{max-width:100%;max-height:100%}table{border-collapse:collapse}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}textarea{white-space:revert}meter{-webkit-appearance:revert;-moz-appearance:revert;appearance:revert}pre{all:revert}::placeholder{color:unset}::marker{content:""}:where([hidden]){display:none}:where([contenteditable]:not([contenteditable=false])){-moz-user-modify:read-write;-webkit-user-modify:read-write;overflow-wrap:break-word;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}:where([draggable=true]){-webkit-user-drag:element}body{background-color:#000;margin:0;padding:0}button{padding:0}#dynamic{height:100vh;overflow:hidden}</style><style>.wnLcbW_fallback{text-align:right;background:rgba(0,0,0,.8);width:100vw;height:100vh;padding:20px;position:absolute;top:0;left:0}.wnLcbW_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-width%3D%2226%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{color:#fff;background-color:#555fff;padding:0}.C4yOdG_primaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{flex:1}}.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.C4yOdG_secondaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{flex:1}}.C4yOdG_gdpr{text-align:center;z-index:2147483647;background-color:#fff;flex-direction:column;justify-content:space-between;width:100%;height:100%;display:flex;position:absolute;top:0;left:0;overflow:hidden}.C4yOdG_gdpr .C4yOdG_icon{color:#fff;background:#007aff url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M46.2%201.238v12.1c-17.7%201-31.9%2015.2-32.9%2032.9H1.2v4h12.1c1%2017.7%2015.2%2031.9%2032.9%2032.9v12.1h4v-12.1c17.7-1%2031.9-15.2%2032.9-32.9h12.1v-4h-12c-1-17.7-15.2-31.9-32.9-32.9v-12.1h-4.1zm0%2016.1v14.1c-7.8.9-14%207.1-14.9%2014.9h-14c1-15.6%2013.4-28%2028.9-29zm4%200c15.5%201%2027.9%2013.4%2028.9%2028.9h-14c-.9-7.8-7.1-14-14.9-14.9v-14zm-9.3%2023.6c10.8-8.1%2022.8%203.9%2014.7%2014.7-10.8%208.1-22.8-3.9-14.7-14.7zm-23.6%209.3h14.1c.9%207.8%207.1%2014%2014.9%2014.9v14.1c-15.6-1-28-13.4-29-29zm47.8%200h14.1c-1%2015.5-13.4%2028-28.9%2028.9v-14.1c7.7-.8%2013.9-7%2014.8-14.8z%22%2F%3E%3C%2Fsvg%3E) 50%/85% no-repeat;border-radius:50%;width:17vw;max-width:6em;height:17vw;max-height:6em;padding:.5em;display:inline-block}.C4yOdG_gdpr .C4yOdG_content{flex-direction:column;flex:1;justify-content:center;display:flex}.C4yOdG_gdpr .C4yOdG_header{padding:0;line-height:1}.C4yOdG_gdpr .C4yOdG_title{word-wrap:break-word;margin:.5em 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:5.5vw;font-weight:600;line-height:1.5}.C4yOdG_gdpr .C4yOdG_bodyText{text-align:center;word-wrap:break-word;padding:0 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4.5vw;font-weight:400;line-height:1.5;overflow:hidden}.C4yOdG_gdpr .C4yOdG_buttons{width:100%;height:15vw;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:15vw}.C4yOdG_gdpr .C4yOdG_buttons button{float:right;width:50%;height:100%;display:block}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{font-size:7.5vw}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#007aff;border-top:1px solid #e8e8e8;font-size:4.5vw}@media screen and (orientation:landscape){.C4yOdG_gdpr{flex-direction:row}.C4yOdG_gdpr .C4yOdG_content{width:75%}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_title{font-size:5vh}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_bodyText{font-size:4vh}.C4yOdG_gdpr .C4yOdG_buttons{flex-direction:column;justify-content:center;width:25%;min-width:116px;height:100%;padding-right:4.5vh;display:flex;right:0}.C4yOdG_gdpr .C4yOdG_buttons button{float:none;width:100%;height:auto;line-height:12vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{border-radius:10vh;margin-bottom:2vh;font-size:3.5vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{border-top:none;font-size:2.5vh}}._7pzQ5q_overlayCta{content:"";z-index:2147483347;background:0 0;width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}._7pzQ5q_hidden{display:none}.NQnIja_countdown{text-align:center;color:#fff;background:rgba(51,51,51,.5);border-radius:50%;min-width:35px;min-height:35px;margin:-10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:35px;display:block}.NQnIja_countdown:before,.NQnIja_countdown:after{content:"";line-height:0;display:inline-flex}.mqB7Ka_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-width%3D%2226%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.mqB7Ka_skipIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2294.7%22%20height%3D%2294.9%22%3E%3Cg%20fill%3D%22%23FFF%22%20stroke%3D%22%23000%22%20stroke-width%3D%223.417%22%20stroke-miterlimit%3D%2210%22%3E%3Cpath%20d%3D%22m37%2075.5%2022.4-22.4H1.9V41.7h57.5L37%2019.3l8.1-8.1%2036.2%2036.2-36.2%2036.2z%22%2F%3E%3Cpath%20d%3D%22M92.733%2011.138v72.4h-11.5v-72.4z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E) 50%/100% no-repeat;width:18px;height:18px}.LJWyoG_nextButton{color:#fff;text-align:center;z-index:2147483448;justify-content:center;align-items:center;margin:20px 20px 0 0;padding:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:0;display:flex;position:absolute;top:0;right:0}.poFP6W_overlay{z-index:2147483448;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:linear-gradient(rgba(0,15,35,.59) 0%,rgba(0,15,35,.8) 45%,rgba(0,15,35,.8) 100%);width:100%;height:100%;position:fixed;top:0;left:0}.poFP6W_opaque{background:#000}.poFP6W_lastChanceEndCard{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.poFP6W_backgroundNone{background:0 0}.poFP6W_name{color:#fff;text-align:center;z-index:2147483447;margin:11px 40px 22px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:700}.poFP6W_icon{z-index:2147483447;border-radius:10px;width:80px;height:80px;display:block}.poFP6W_button{color:#fff;letter-spacing:.9px;z-index:2147483447;background-color:#007aff;border:none;border-radius:50px;padding:7px 18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;position:relative}.poFP6W_button:focus{outline:none}.poFP6W_button:before,.poFP6W_button:after{content:"";z-index:-1000;background-repeat:no-repeat;width:140%;height:100%;transition:all .5s ease-out;display:block;position:absolute;left:-20%}.poFP6W_button:before{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 20%,#007aff 20%,transparent 30%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%;display:none;top:-75%}.poFP6W_button:after{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%;display:none;bottom:-75%}.poFP6W_button.poFP6W_animate:before{animation:2s infinite forwards poFP6W_topBubbles;display:block}.poFP6W_button.poFP6W_animate:after{animation:2.3s infinite forwards poFP6W_bottomBubbles;display:block}@keyframes poFP6W_topBubbles{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22%,50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes poFP6W_bottomBubbles{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}.J2DrKG_staticImageEndcard{justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}.J2DrKG_staticImageEndcard img{max-height:100%;margin:0 auto}.S2LOeW_icon{font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}.S2LOeW_muted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_muted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath display='none' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.S2LOeW_unmuted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_unmuted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath display='none' fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath fill='%23fff' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.OaF7uW_videoProgress{z-index:2147483447;background:rgba(0,0,0,.2);width:100%;height:.1875rem;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.OaF7uW_videoProgress span{width:0%;height:100%;animation-name:OaF7uW_progress-animation;animation-timing-function:cubic-bezier(0,.79,.5,1);animation-iteration-count:infinite;animation-delay:1ms;animation-fill-mode:forwards;position:absolute;top:0;left:0}.OaF7uW_videoProgress span.OaF7uW_paused{animation-play-state:paused}@keyframes OaF7uW_progress-animation{0%{width:20%}to{width:100%}}.ok_seq_videoPlayerWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.ok_seq_videoPlayer,.ok_seq_videoPlayer video{width:100%;height:100%}.RypQCq_videoBlurWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;overflow:hidden}.RypQCq_videoBlurWrap>canvas{filter:blur(6px)brightness(.25);width:100%;height:100%}.dDtiqq_tapToPlayMask{z-index:2147483547;background-color:rgba(0,0,0,.6);position:fixed;top:0;bottom:0;left:0;right:0}.dDtiqq_tapToPlayContainer{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.dDtiqq_tapToPlayIcon{filter:invert();background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M9%2011.24V7.5a2.5%202.5%200%200%201%205%200v3.74c1.21-.81%202-2.18%202-3.74C16%205.01%2013.99%203%2011.5%203S7%205.01%207%207.5c0%201.56.79%202.93%202%203.74zm9.84%204.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10%206.67%2010%207.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31%200-.59.13-.79.33l-.79.8%204.94%204.94c.27.27.65.44%201.06.44h6.79c.75%200%201.33-.55%201.44-1.28l.75-5.27c.01-.07.02-.14.02-.2%200-.62-.38-1.16-.91-1.38z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:50px;max-width:120px;max-height:120px;margin:0 auto}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{width:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{width:120px}}.dDtiqq_tapToPlayIcon{height:50px}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{height:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{height:120px}}.dDtiqq_tapToPlayText{color:#fff;text-align:center;margin:.3em 0;font-size:15px;font-weight:400}@media screen and (min-width:320px){.dDtiqq_tapToPlayText{font-size:calc(1.13636vw + 11.3636px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayText{font-size:25px}}.Zz6y0G_download{z-index:2147483447;float:right;cursor:pointer;width:50px;height:50px;padding:20px 10px 10px 20px;line-height:1em;position:fixed;bottom:4px;right:0}.Zz6y0G_download .Zz6y0G_downloadIcon{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48px'%20height='48px'%20%3E%3Cpath%20fill='white'%20d='M11%2040q-1.2%200-2.1-.9Q8%2038.2%208%2037v-7.15h3V37h26v-7.15h3V37q0%201.2-.9%202.1-.9.9-2.1.9Zm13-7.65-9.65-9.65%202.15-2.15%206%206V8h3v18.55l6-6%202.15%202.15Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:23px;width:19px;height:19px;display:inline-block;bottom:10px}@media only screen and (max-height:249px){.Zz6y0G_download{display:none}}.UUyEIq_persistentSimpleCta{z-index:2147483446;background:rgba(0,0,0,.5);border-radius:8px 0 0 8px;padding:8px;transition:transform .5s ease-in-out;display:flex;position:absolute;bottom:8px;right:0;transform:translate(100%)}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCta{padding:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCta{background:linear-gradient(transparent 0%,rgba(0,0,0,.8) 80%);justify-content:center;align-items:center;width:100%;padding:25px;bottom:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCta{border-radius:4px 0 0 4px;padding:4px}}.UUyEIq_slideIn{transform:translate(0)}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_slideIn{left:50%;transform:translate(-50%)}}.UUyEIq_appIcon{cursor:pointer;border-radius:8px;width:52px;height:52px;left:0}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon{width:70px;height:70px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon{width:100px;height:100px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon{border-radius:4px;width:26px;height:26px}}.UUyEIq_persistentSimpleCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background-color:#179e2d;border:none;border-radius:8px;min-width:99px;height:52px;padding:0 10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:21px;font-weight:400}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCtaBtn{height:70px;font-size:30px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCtaBtn{min-width:200px;height:70px;font-size:30px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCtaBtn{border-radius:4px;min-width:80px;height:26px;font-size:14px}}.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:8px}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:4px}}.UUyEIq_appDetail{color:#fff;min-width:40%;padding:10px 50px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;display:none}.UUyEIq_appDetail h1{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:34px;line-height:40px;overflow:hidden}.UUyEIq_appDetail h2{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:20px;line-height:30px;overflow:hidden}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appDetail{flex-direction:column;align-items:flex-start;display:flex}}.DwKKSa_persistentRichCta{z-index:2147483348;background:#333;align-items:center;width:100%;height:120px;padding:10px;display:flex;position:absolute;top:0;left:0}.DwKKSa_persistentRichCta .DwKKSa_appIcon{cursor:pointer;border-radius:10px;width:90px;height:90px;display:block}.DwKKSa_persistentRichCta .DwKKSa_appInfo{flex-direction:column;flex:1;justify-content:space-around;height:100px;padding:0 15px;display:flex;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo h1{color:#fff;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:90%;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:17px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo p{color:#fff;white-space:nowrap;text-overflow:ellipsis;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_persistentRichCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background:#179e2d;border:none;border-radius:24px;width:100%;height:36px;padding:8px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;box-shadow:0 4px 4px rgba(0,0,0,.25)}.dalDea_persistentRichCtaScreenshots{z-index:2147483348;white-space:nowrap;background:#333;width:100%;min-height:190px;padding:17px 0;position:absolute;bottom:0;left:0;overflow-x:scroll;overflow-y:hidden;box-shadow:inset 0 3px 7px 2px rgba(0,0,0,.4)}.dalDea_persistentRichCtaScreenshots .dalDea_slide{height:100%;margin-left:.75em;display:inline-block}.dalDea_persistentRichCtaScreenshots img{cursor:pointer;object-fit:cover;border-radius:.75em;height:100%}.W6zMza_dialogBox{visibility:hidden;text-align:center;color:#565656;z-index:2147483647;background-color:rgba(0,0,0,.8);width:100%;height:100%;position:absolute;top:0;left:0}.W6zMza_dialog{text-align:center;width:288px;margin-top:0;padding:0;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-height:20em){.W6zMza_dialog{width:200px}}.W6zMza_dialogContent{border-top-width:7px;border-top-color:#555fff;border-radius:15px;width:100%;position:relative;overflow:hidden}.W6zMza_dialogTitle{color:#fff;background-color:#555fff;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600}@media only screen and (max-height:20em){.W6zMza_dialogTitle{font-size:1em}}.W6zMza_dialogBody{background-color:#fff;padding:0;overflow:hidden}.W6zMza_dialogText{text-align:center;margin:0 auto;padding:18px 15px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:1.35em}@media only screen and (max-height:20em){.W6zMza_dialogText{padding:10px;font-size:.8em;line-height:1.25}}.W6zMza_dialogActions{background-color:#fff;width:100%;padding:0}.W6zMza_dialogActions button{text-align:center;background:0 0;border:none;width:100%;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;text-decoration:none}@media only screen and (max-height:20em){.W6zMza_dialogActions button{font-size:.75rem}}@media screen and (orientation:landscape){.W6zMza_dialogActions{display:flex}}.eDiOmG_primaryButton{color:#fff;background-color:#555fff;padding:0}.eDiOmG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.eDiOmG_primaryButton{flex:1}}.eDiOmG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.eDiOmG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.eDiOmG_secondaryButton{flex:1}}.eDiOmG_primaryButton button{justify-content:center;align-items:center;display:flex}.eDiOmG_continueIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2236%22%20height%3D%2246%22%20style%3D%22shape-rendering%3Ageometricprecision%3Btext-rendering%3Ageometricprecision%3Bimage-rendering%3Aoptimizequality%3Bfill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%22%3E%3Cpath%20style%3D%22opacity%3A.849%22%20fill%3D%22%23fefffe%22%20d%3D%22M35.5%2014.5v7c-3.399%2011.06-11.065%2016.227-23%2015.5%203.026%202.298%203.692%205.13%202%208.5h-5c-3-3.667-6.333-7-10-10v-5a133.238%20133.238%200%200%200%2010-9.5c5.167-1.5%207%20.333%205.5%205.5L12.5%2029c8.637%201.53%2013.97-1.97%2016-10.5-1.08-7.537-5.414-11.37-13-11.5-2.101-1.733-2.435-3.733-1-6%2010.787-1.378%2017.787%203.122%2021%2013.5Z%22%2F%3E%3C%2Fsvg%3E) 50%/contain no-repeat;width:12px;height:12px;margin-left:6px;display:inline-block}._0zGmtq_watermark{z-index:200;background-color:#000;width:100vw;min-height:1px;font-size:1px;display:flex;position:absolute}._0zGmtq_watermark ._0zGmtq_leading._0zGmtq_bit{width:4vw}._0zGmtq_watermark ._0zGmtq_bit{flex-grow:0;width:1vw;height:1px}._0zGmtq_watermark ._0zGmtq_zero{height:1px}._0zGmtq_watermark ._0zGmtq_one{background-color:#050505;height:1px}.m2_mMq_privacyButton{cursor:pointer;z-index:2147483497;background:0 0;width:16px;padding:0;line-height:0;position:absolute;bottom:4px;left:4px}@media (min-width:48em){.m2_mMq_privacyButton{bottom:.8rem;left:.8rem}}.m2_mMq_privacyButton svg{width:100%;height:100%}@media only screen and (max-height:300px){.m2_mMq_privacyButton{width:13px;height:13px;left:2px}}@media only screen and (max-height:200px){.m2_mMq_privacyButton{width:12px;height:12px}}.FbTWOG_popupContainer.FbTWOG_popupContainerDisplay{z-index:2147483647;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_privacyPopup{z-index:2147483647;background:#fff;border-radius:15px 15px 0 0;padding:16px 16px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;transition:transform .2s ease-in-out;position:fixed;bottom:0;left:0;right:0}.FbTWOG_popupHeader{justify-content:space-between;display:flex}.FbTWOG_popupTitle{font-size:14px;font-weight:700}.FbTWOG_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20width%3D%2231%22%20height%3D%2231%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20clip-path%3D%22url%28%27%23clip0_1168_1960%27%29%22%20fill%3D%22%23000%22%3E%3Cpath%20d%3D%22M27.12%2030.4c-.84%200-1.68-.32-2.32-.96L.96%205.61a3.295%203.295%200%200%201%200-4.65%203.295%203.295%200%200%201%204.65%200l23.83%2023.83a3.295%203.295%200%200%201%200%204.65c-.64.64-1.48.96-2.32.96Z%22%2F%3E%3Cpath%20d%3D%22M3.29%2030.4c-.84%200-1.68-.32-2.32-.96a3.295%203.295%200%200%201%200-4.65L24.79.96a3.295%203.295%200%200%201%204.65%200%203.295%203.295%200%200%201%200%204.65L5.61%2029.44c-.64.64-1.48.96-2.32.96Z%22%2F%3E%3C%2Fg%3E%3Cdefs%3E%3CclipPath%20id%3D%22clip0_1168_1960%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M0%200h30.4v30.4H0z%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-size:100%;width:14px;height:14px;display:inline-block}.FbTWOG_readMore{color:#485099;padding:16px 0;font-size:16px;font-weight:700}.FbTWOG_ids{color:#bfbfbf;font-size:11px}.FbTWOG_ids.FbTWOG_hasEventMetadata{flex-wrap:wrap;padding:6px 0;display:flex}.FbTWOG_ids .FbTWOG_id{height:15px;display:flex}.FbTWOG_ids .FbTWOG_id:first-child{margin-right:1em}.FbTWOG_ids .FbTWOG_id .FbTWOG_idName{text-align:left;width:60px}.FbTWOG_ids .FbTWOG_id .FbTWOG_idContent{padding-left:4px}.FbTWOG_popupBody{padding-top:16px;font-size:14px}.FbTWOG_show{transform:translateY(0);box-shadow:0 -10px 20px -5px rgba(115,115,115,.75)}.FbTWOG_hide{transform:translateY(100%)}.FbTWOG_displayNone{display:none}.FbTWOG_mask{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(255,255,255,.2);transition:all .5s;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_debug{color:#bfbfbf;height:200px;font-size:11px;overflow-x:hidden;overflow-y:auto}.oAV7cW_endcardIframe{border:0;width:100%;height:100%;position:absolute;top:0;left:0}.oAV7cW_endcard{text-align:center;background-color:#000;width:100vw;height:100vh;position:relative}._37VDnG_composite{width:100vw;height:100vh}._37VDnG_component{width:100%;height:100%;position:relative}._37VDnG_compositeImage{background-position:50%;background-repeat:no-repeat;background-size:contain;justify-content:center;align-items:center;width:100%;height:100%;display:flex}._37VDnG_compositeImage img{display:none}._37VDnG_compositeHtml{width:100%;height:100%}@keyframes i0Mp0G_shrinkToTopLeft{0%{transform:translate(0)scale(1)}to{transform-origin:0 0;transform:translate(10px,10px)scale(.3)}}.i0Mp0G_pictureInPictureContainer{z-index:2147483548;box-sizing:border-box;width:100%;height:100%;margin:0;padding:0;display:block;position:fixed;top:0;left:0}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animationEnded{transform-origin:0 0;transition:transform 1s ease-in-out;transform:translate(10px,10px)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animatingVideo{animation:.5s ease-in-out forwards i0Mp0G_shrinkToTopLeft}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideUp{transform:translateY(-100%)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideLeft{transform:translate(-100%)scale(.3)}#gRz7DW_ad{width:100%;height:100%}</style><script type="module">window.appVersion="5.55.0-vm2486-276";</script><script type="module">window.Hls={isSupported:()=>!1,DefaultConfig:{loader:class{constructor(){}}}};</script><script src="mraid.js"></script><script type="module">function n(r,e){var s=t();return(n=function(r,n){return s[r-=143]})(r,e)}var r=n;function t(){var r=["undefined","303444inYQJd",'ipt src="replacements.js"></sc',"7213chHhdp","7mBWnvg","<scr","897366rgVoCQ","44iJuGgH","41079UpxDFu","2247664yxnDpZ","write","mraidExt","ript>","77OMQXem","584010DyCTIj","421595CqDrDG",'ipt src="vungle_mraid.js"></sc',"10njnkdM","8TySzmr"];return(t=function(){return r})()}!function(r){for(var t=n,e=r();;)try{if(parseInt(t(154))/1*(parseInt(t(158))/2)+-parseInt(t(159))/3*(-parseInt(t(150))/4)+parseInt(t(147))/5+parseInt(t(157))/6*(-parseInt(t(155))/7)+parseInt(t(160))/8+parseInt(t(146))/9*(-parseInt(t(149))/10)+parseInt(t(145))/11*(-parseInt(t(152))/12)==159889)break;e.push(e.shift())}catch(r){e.push(e.shift())}}(t),("undefined"==typeof vungle||typeof vungle[r(143)]===r(151))&&(document[r(161)](r(156)+r(148)+r(144)),document.write(r(156)+'ipt src="tokenmap.js"><\/script>'),document[r(161)](r(156)+r(153)+r(144)));</script><script type="module">var e=t;function n(){var e=["233320xaKEXL","1519032JREVyj","notifyPropertiesChange","10490PSChOO","270063ynCtMs","295981bVKbOX","Accept","hasOwnProperty","vungle","1263420fuAVmE","consentDenyButtonText","118nnSbiu","notifyReadyEvent","INCENTIVIZED","mraidBridge","consentTitleText","545USnEPa","osVersion","consentBodyText","1.0","fullscreen","forEach","keys"];return(n=function(){return e})()}function t(e,o){var r=n();return(t=function(e,n){return r[e-=234]})(e,o)}if(function(e){for(var n=t,o=e();;)try{if(parseInt(n(239))/1*(parseInt(n(234))/2)+parseInt(n(250))/3+parseInt(n(246))/4+parseInt(n(249))/5+-parseInt(n(255))/6+-parseInt(n(251))/7+parseInt(n(247))/8==119630)break;o.push(o.shift())}catch(e){o.push(o.shift())}}(n),"function"==typeof getVungleReplacementTokens){var o,r={OS:"os",OS_VERSION:e(240),SDK_VERSION:"sdkVersion",CONSENT_TITLE_TEXT:e(238),CONSENT_BODY_TEXT:e(241),CONSENT_ACCEPT_BUTTON_TEXT:"consentAcceptButtonText",CONSENT_DENY_BUTTON_TEXT:e(256)},s=getVungleReplacementTokens(),i=(o={},Object[e(245)](s).forEach((function(e){o[vungleTokenMap[e]]=s[e]})),o);window[e(254)][e(237)][e(235)](i);let n={isViewable:!0,placementType:e(243),version:e(242),consentAcceptButtonText:e(252),consentDenyButtonText:"Deny",consentBodyText:"Ads are personalized. Denying would disable it",consentTitleText:"Personalized Ads",supports:{sms:!1,storePicture:!1,inlineVideo:!1,calendar:!1,tel:!1},incentivized:i[e(253)]("INCENTIVIZED")&&"true"===i[e(236)].toLowerCase()};Object[e(245)](r)[e(244)]((function(t){i[e(253)](t)&&(n[r[t]]=i[t])})),window[e(254)][e(237)][e(248)](n)}</script></head><body>  <div id="dynamic"></div> <script type="module">let e,t;var n=class extends Error{};class i{static getInstance(e){return this.instance||(this.instance=new i(e)),this.instance}bind(e,t){return this.bindings.set(e,t),this}get(e){if(!this.bindings.has(e))throw new n(`Could not find anything for key ${e}`);return this.bindings.get(e)}has(e){return this.bindings.has(e)}reset(){this.bindings.clear()}constructor(e=Date.now()){this.startTimestamp=e,this.bindings=new Map}}var r=i,a=class{},o=class extends a{get(e){return this.replacementTokens[e]}has(...e){return e.every((e=>e in this.replacementTokens))}some(...e){return e.some((e=>e in this.replacementTokens))}static getServiceIdentifier(){return"TokenServiceInterface"}getSeriesValues(e){var t,n,i,r;let a=this.getSeriesTokens(e),o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{};return a.map((e=>o[e]))}getSeriesTokens(e){var t,n,i,r;let a=[],o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{},s=[];return Object.keys(o).filter((t=>t.startsWith(e))).forEach((t=>{let n=t.replace(e,"");/^\d+$/.test(n)?s.push(parseInt(n,10)):a.push(t)})),0===s.length||(s.sort(((e,t)=>e-t)),s.forEach((t=>a.push(`${e}${t}`)))),a}constructor(e){super(),this.replacementTokens=null!=e?e:{}}},s=(e,t="default")=>{let n=e=>e.filter((e=>void 0!==e)).flat();return{info:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"info",prefix:t,message:i,optionalParams:r}),console.info(...a)},warn:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"warn",prefix:t,message:i,optionalParams:r}),console.warn(...a)},error:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"error",prefix:t,message:i,optionalParams:r}),console.error(...a)}}},l=class extends a{getLogger(e="default"){return null==this.loggers[e]&&(this.loggers[e]=s(this,e)),this.loggers[e]}emit(e){e.fireOnlyOnce&&this.hasExistingEvent(e)||(this.addToActivity({type:"event",eventType:e.type,name:e.event,data:e.data}),this.invokeEventHandlers(e))}invokeEventHandlers(e){[...this.eventHandlers[e.type]||[],...this.eventHandlers["*"]||[]].forEach((t=>t(this,e)))}addToActivity(e){this.activity.push({activity:e,timestamp:Date.now()})}getActivity(e){return e?this.activity.filter((t=>t.activity.type===e)):this.activity}getActivityEvents(){return this.activity.filter((e=>"event"===e.activity.type))}getActivityLogs(){return this.activity.filter((e=>"log"===e.activity.type))}getActivityEventPairs(e,t,n){let i=this.getActivityEvents().filter((t=>t.activity.eventType===e)),r=[],a=null;return i.forEach((e=>{let i=e.activity;i.name===t?a=e:i.name===n&&a&&(r.push([a,e]),a=null)})),r}clearActivity(){this.activity.length=0}addEventHandler(e,t){this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t)}removeEventHandler(e,t){null!=this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter((e=>e!==t)))}getEventHandlers(e){return this.eventHandlers[e]||[]}static getServiceIdentifier(){return"ReportingServiceInterface"}constructor(...e){super(...e),this.loggers={},this.eventHandlers={},this.activity=[],this.hasExistingEvent=e=>this.activity.some((t=>"event"===t.activity.type&&t.activity.eventType===e.type&&t.activity.name===e.event))}};function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}))}return e}(ec=eA||(eA={}))[ec.NotStarted=0]="NotStarted",ec[ec.Running=1]="Running",ec[ec.Stopped=2]="Stopped";const c={type:"xstate.init"},u="xstate.assign";function E(e){return void 0===e?[]:[].concat(e)}function v(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function _(e){return t=>e===t}function h(e){return"string"==typeof e?{type:e}:e}function T(e,t,n){let i=t,r=!1;return[e.filter((e=>{if(e.type===u){r=!0;let t=d({},i);return"function"==typeof e.assignment?t=e.assignment(i,n):Object.keys(e.assignment).forEach((r=>{t[r]="function"==typeof e.assignment[r]?e.assignment[r](i,n):e.assignment[r]})),i=t,!1}return!0})),i,r]}const S=(e,t)=>e.actions.forEach((({exec:n})=>n&&n(e.context,t)));function p(e){return{type:u,assignment:e}}var g=class extends a{createMachine(e,t){if(!(null==e?void 0:e.id))throw Error("State machine identifier is missing.");this.machineMap.has(e.id)||this.machineMap.set(e.id,{config:e,options:t,machine:function(e,t={}){let[n,i]=T(E(e.states[e.initial].entry).map((e=>v(e,t.actions))),e.context,c),r={config:e,_options:t,initialState:{value:e.initial,actions:n,context:i,matches:_(e.initial)},transition:(t,n)=>{let{value:i,context:a}="string"==typeof t?{value:t,context:e.context}:t,o=h(n),s=e.states[i];if(s.on){let t=E(s.on[o.type]);for(let n of("*"in s.on&&t.push(...E(s.on["*"])),t)){if(void 0===n)break;let{target:t,actions:l=[],cond:d=()=>!0}="string"==typeof n?{target:n}:n,c=void 0===t,u=null!=t?t:i,h=e.states[u];if(d(a,o)){let[e,n,d]=T((c?E(l):[].concat(s.exit,l,h.entry).filter((e=>e))).map((e=>v(e,r._options.actions))),a,o),u=null!=t?t:i;return{value:u,context:n,actions:e,changed:t!==i||e.length>0||d,matches:_(u)}}}}return{value:i,context:a,actions:[],changed:!1,matches:_(i)}}};return r}(e,t)});let n=this.machineMap.get(e.id);return null==n?void 0:n.machine}interpret(e){var t;if(!(null==e||null===(t=e.config)||void 0===t?void 0:t.id))throw Error("State machine is malformed.");return this.interpreterMap.has(e.config.id)||this.interpreterMap.set(e.config.id,function(e){let t=e.initialState,n=eA.NotStarted,i=new Set,r={_machine:e,send:r=>{n===eA.Running&&(S(t=e.transition(t,r),h(r)),i.forEach((e=>e(t))))},subscribe:e=>(i.add(e),e(t),{unsubscribe:()=>i.delete(e)}),start:i=>{if(i){let n="object"==typeof i?i:{context:e.config.context,value:i};t={value:n.value,actions:[],context:n.context,matches:_(n.value)}}else t=e.initialState;return n=eA.Running,S(t,c),r},stop:()=>(n=eA.Stopped,i.clear(),r),get state(){return t},get status(){return n}};return r}(e)),this.interpreterMap.get(e.config.id)}clear(e){e?(this.machineMap.delete(e),this.interpreterMap.delete(e)):(this.machineMap.clear(),this.interpreterMap.clear())}static getServiceIdentifier(){return"StateMachineServiceInterface"}constructor(){super(),this.machineMap=new Map,this.interpreterMap=new Map}};function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var I=()=>"m3ddfdb9be";(eu=em||(em={})).LOADING="loading",eu.DEFAULT="default",eu.EXPANDED="expanded",eu.RESIZED="resized",eu.HIDDEN="hidden";var O=(e=I())=>{var t,n,i,r,a,o,s,l;let c=null===(t=window[e])||void 0===t?void 0:t.mraid,u=null===(n=window[e])||void 0===n?void 0:n.mraidExt;return!c&&((null===(o=window.vungle)||void 0===o?void 0:o.mraid)?window[e]={mraid:d({},window.vungle.mraid)}:window.mraid&&(window[e]={mraid:d({},window.mraid)})),!u&&(null===(i=window.vungle)||void 0===i?void 0:i.mraidExt)&&(window[e]=C(d({},window[e]),{mraidExt:d({},window.vungle.mraidExt)})),window.mraid&&delete window.mraid,window.vungle&&(window.vungle.mraid&&delete window.vungle.mraid,window.vungle.mraidExt&&(window.vungle.mraidExt={getOS:null===(s=window.vungle.mraidExt)||void 0===s?void 0:s.getOS,getOSVersion:null===(l=window.vungle.mraidExt)||void 0===l?void 0:l.getOSVersion})),{mraid:null===(r=window[e])||void 0===r?void 0:r.mraid,mraidExt:null===(a=window[e])||void 0===a?void 0:a.mraidExt}},A=class extends a{init(){let{mraid:e,mraidExt:t}=O(),{mraidBridge:n,mraidBridgeExt:i}=function(){if(!window.vungle)return{mraidBridge:void 0,mraidBridgeExt:void 0};let{mraidBridge:e,mraidBridgeExt:t}=window.vungle;return{mraidBridge:e,mraidBridgeExt:t}}();this.mraid=e,this.mraidExt=t,this.mraidBridge=n,this.mraidBridgeExt=i,this.initialized=!0}checkInit(){this.initialized||this.init()}static getServiceIdentifier(){return"MraidServiceInterface"}getMraid(){return this.checkInit(),this.mraid}getMraidBridge(){return this.checkInit(),this.mraidBridge}getMraidBridgeExt(){return this.checkInit(),this.mraidBridgeExt}getMraidExt(){return this.checkInit(),this.mraidExt}constructor(){super(),this.initialized=!1,this.init()}},m=class{clearInterval(){this.id&&(window.clearInterval(this.id),this.id=void 0)}pause(){this.clearInterval()}start(){!this.intervalService.isPaused()&&(void 0!==this.id||this.isDestroyed()||(this.id=window.setInterval((()=>{this.callable()}),this.interval)))}destroy(){this.clearInterval(),this.destroyed=!0}getId(){return this.id}isDestroyed(){return this.destroyed}constructor(e,t,n){this.interval=e,this.callable=t,this.intervalService=n,this.destroyed=!1}},f=class extends a{getNewInterval(e,t){let n=new m(e,t,this);return this.intervals.push(n),n}pauseAll(){this.paused=!0,this.intervals.forEach((e=>{e.pause()}))}startAll(){this.paused=!1,this.intervals.forEach((e=>{e.start()}))}destroyAll(){this.intervals.forEach((e=>{e.destroy()})),this.intervals=[]}isPaused(){return this.paused}static getServiceIdentifier(){return"IntervalServiceInterface"}constructor(e=!1){super(),this.paused=e,this.intervals=[]}},N=class{constructor(e,t){this.delay=e,this.callable=t,this.getId=()=>this.id,this.start=()=>!this.isDestroyed&&void 0===this.id&&(this.id=window.setTimeout((()=>{this.callable&&this.callable(),this.id=void 0,this.remainingTime=this.delay,this.promiseResolve&&this.promiseResolve(),this.destroy()}),this.remainingTime),this.startTime=Date.now(),!0),this.pause=()=>{void 0!==this.id&&void 0!==this.startTime&&(clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime),this.startTime=void 0,this.id=void 0},this.destroy=()=>{void 0!==this.id&&(clearTimeout(this.id),this.id=void 0),this.isDestroyed=!0,this.promiseReject&&this.promiseReject(!1)},this.asPromise=()=>new Promise(((e,t)=>{this.promiseResolve=e,this.promiseReject=t,this.isDestroyed?t(Error("The timer has been destroyed and cannot be started.")):this.start()})),this.remainingTime=e,this.isDestroyed=!1}},D=class extends a{destroyAll(){this.timers.forEach((e=>{e.destroy()}))}getNewTimer(e,t){let n=new N(e,t);return this.timers.push(n),n}pauseAll(){this.timers.forEach((e=>{e.pause()}))}standby(){0===this.stash.length&&this.timers.forEach((e=>{void 0!==e.getId()&&(e.pause(),this.stash.push(e))}))}wake(){if(0===this.stash.length)return;let e=this.stash.pop();null==e||e.start(),this.wake()}startAll(){this.timers.forEach((e=>{e.start()}))}static getServiceIdentifier(){return"TimerServiceInterface"}constructor(){super(),this.timers=[],this.stash=[]}},R=()=>{let e=r.getInstance(),t=A.getServiceIdentifier();return e.get(t)};(eE=ef||(ef={})).UNKNOWN="unknown",eE.MREC="mrec",eE.FULLSCREEN="fullscreen",eE.BANNER="banner",eE.IN_LINE="in_line";var y=()=>{let e=r.getInstance(),t=o.getServiceIdentifier();return e.get(t)};(ev=eN||(eN={})).ACC_TESTS="ACC_TESTS",ev.ADM_HTML="ADM_HTML",ev.ADVERTISER_DOMAIN="ADVERTISER_DOMAIN",ev.AD_EXPERIENCE="AD_EXPERIENCE",ev.AD_SOURCE="AD_SOURCE",ev.ALT_EC_0="ALT_EC_0",ev.APP_CONTENT_RATING="APP_CONTENT_RATING",ev.APP_DESCRIPTION="APP_DESCRIPTION",ev.APP_DESCRIPTION_ENCODED="APP_DESCRIPTION_ENCODED",ev.APP_DOWNLOAD_COUNT="APP_DOWNLOAD_COUNT",ev.APP_ICON="APP_ICON",ev.APP_INFO_POSITION="APP_INFO_POSITION",ev.APP_LONG_DESCRIPTION="APP_LONG_DESCRIPTION",ev.APP_LONG_DESCRIPTION_ENCODED="APP_LONG_DESCRIPTION_ENCODED",ev.APP_NAME="APP_NAME",ev.APP_NAME_ENCODED="APP_NAME_ENCODED",ev.APP_RATING="APP_RATING",ev.APP_RATING_COUNT="APP_RATING_COUNT",ev.APP_SCREENSHOTS="APP_SCREENSHOTS",ev.APP_STORE_ID="APP_STORE_ID",ev.APP_STORE_ON_ENDCARD_AUTO_DELAY="APP_STORE_ON_ENDCARD_AUTO_DELAY",ev.APP_STORE_ON_ENDCARD_CLOSE="APP_STORE_ON_ENDCARD_CLOSE",ev.APP_STORE_ON_FIRST_TRANSITION="APP_STORE_ON_FIRST_TRANSITION",ev.APP_STORE_ON_SECOND_TRANSITION="APP_STORE_ON_SECOND_TRANSITION",ev.APP_STORE_ON_VIDEO_AUTO_DELAY="APP_STORE_ON_VIDEO_AUTO_DELAY",ev.APP_STORE_ON_VIDEO_CLOSE="APP_STORE_ON_VIDEO_CLOSE",ev.APP_STORE_RATING="APP_STORE_RATING",ev.BLOCK_PERSISTENT_CTA="BLOCK_PERSISTENT_CTA",ev.CLOSE_BUTTON_DELAY_SECONDS="CLOSE_BUTTON_DELAY_SECONDS",ev.CLOSE_BUTTON_PADDING="CLOSE_BUTTON_PADDING",ev.CLOSE_BUTTON_SIZE="CLOSE_BUTTON_SIZE",ev.COUNTRY_CODE="COUNTRY_CODE",ev.CREATIVE_FORMAT="CREATIVE_FORMAT",ev.CREATIVE_FORMAT_VERSION="CREATIVE_FORMAT_VERSION",ev.CREATIVE_ID="CREATIVE_ID",ev.CTA_BUTTON_BACKGROUND="CTA_BUTTON_BACKGROUND",ev.CTA_BUTTON_ENCODED_TEXT="CTA_BUTTON_ENCODED_TEXT",ev.CTA_BUTTON_ICON="CTA_BUTTON_ICON",ev.CTA_BUTTON_POSITION="CTA_BUTTON_POSITION",ev.CTA_BUTTON_TEXT="CTA_BUTTON_TEXT",ev.CTA_BUTTON_URL="CTA_BUTTON_URL",ev.DOWNLOAD_BUTTON_DELAY_SECONDS="DOWNLOAD_BUTTON_DELAY_SECONDS",ev.DSA_REQUIRED="DSA_REQUIRED",ev.EC_CLOSE_BUTTON_DELAY_SECONDS="EC_CLOSE_BUTTON_DELAY_SECONDS",ev.EC_CTA_URL="EC_CTA_URL",ev.EC_HTML="EC_HTML",ev.EC_HTML_2="EC_HTML_2",ev.EC_HTML_COMPRESS="EC_HTML_COMPRESS",ev.EC_IMAGE="EC_IMAGE",ev.EC_IMAGE_2="EC_IMAGE_2",ev.EC_SKOVERLAY_DELAY_SECONDS="EC_SKOVERLAY_DELAY_SECONDS",ev.EC_SKOVERLAY_DISABLE_AUTO_MMP="EC_SKOVERLAY_DISABLE_AUTO_MMP",ev.ENDCARD_CLOSE_BUTTON_AS_SKIP="ENDCARD_CLOSE_BUTTON_AS_SKIP",ev.ERID_ADVERTISER_INFO="ERID_ADVERTISER_INFO",ev.ERID_ADVERTISER_LINK="ERID_ADVERTISER_LINK",ev.ERID_RECOMMEND_RULE="ERID_RECOMMEND_RULE",ev.FULL_CTA="FULL_CTA",ev.FULL_CTA_OPTION="FULL_CTA_OPTION",ev.GLOBAL_TIMER="GLOBAL_TIMER",ev.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT="GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT",ev.HEADER_BIDDING="HEADER_BIDDING",ev.INCENTIVIZED="INCENTIVIZED",ev.INCENTIVIZED_BODY_TEXT="INCENTIVIZED_BODY_TEXT",ev.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS="INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS",ev.INCENTIVIZED_CLOSE_TEXT="INCENTIVIZED_CLOSE_TEXT",ev.INCENTIVIZED_CONTINUE_TEXT="INCENTIVIZED_CONTINUE_TEXT",ev.INCENTIVIZED_TITLE_TEXT="INCENTIVIZED_TITLE_TEXT",ev.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY="IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY",ev.IS_RUNNING_INSIDE_EMBED="IS_RUNNING_INSIDE_EMBED",ev.IS_STAFF_DEVICE_BID="IS_STAFF_DEVICE_BID",ev.MAIN_MANIFEST="MAIN_MANIFEST",ev.MAIN_STREAM="MAIN_STREAM",ev.MAIN_VIDEO="MAIN_VIDEO",ev.MAX_AD_DURATION="MAX_AD_DURATION",ev.MEDIATION_NAME="MEDIATION_NAME",ev.NAUTILUS_VERSION="NAUTILUS_VERSION",ev.OBSERVABILITY="OBSERVABILITY",ev.OBSERVED_EXPERIMENTS="OBSERVED_EXPERIMENTS",ev.OM_ENABLED="OM_ENABLED",ev.OM_SDK_DATA="OM_SDK_DATA",ev.ORIGINAL_VIDEO_URL="ORIGINAL_VIDEO_URL",ev.PICTURE_IN_PICTURE="PICTURE_IN_PICTURE",ev.PLACEMENT_TYPE="PLACEMENT_TYPE",ev.PLATFORM="PLATFORM",ev.REAL_START_MUTED="REAL_START_MUTED",ev.SDK_VERSION="SDK_VERSION",ev.SESSION_ID="SESSION_ID",ev.SHOW_EC_CLOSE_BUTTON_COUNTDOWN="SHOW_EC_CLOSE_BUTTON_COUNTDOWN",ev.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN="SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN",ev.SKOVERLAY_AUTO="SKOVERLAY_AUTO",ev.SKOVERLAY_AUTO_CLOSE="SKOVERLAY_AUTO_CLOSE",ev.SKOVERLAY_DELAY_SECONDS="SKOVERLAY_DELAY_SECONDS",ev.SKOVERLAY_DISABLE_AUTO_MMP="SKOVERLAY_DISABLE_AUTO_MMP",ev.SKOVERLAY_DISMISSIBLE="SKOVERLAY_DISMISSIBLE",ev.SKOVERLAY_POSITION="SKOVERLAY_POSITION",ev.SK_CTA_ONLY="SK_CTA_ONLY",ev.SK_EC_CTA_ONLY="SK_EC_CTA_ONLY",ev.SK_FSC="SK_FSC",ev.START_MUTED="START_MUTED",ev.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS="STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS",ev.STREAM_CHUNK_0="STREAM_CHUNK_0",ev.THEATRE_MODE_ENABLED="THEATRE_MODE_ENABLED",ev.TPAT_PROGRESS_EVENTS="TPAT_PROGRESS_EVENTS",ev.TRACK_0="TRACK_0",ev.USER_AGENT="USER_AGENT",ev.VIDEO_CLOSE_BUTTON_AS_SKIP="VIDEO_CLOSE_BUTTON_AS_SKIP",ev.VIDEO_ENDCARD_CLICK_SPLIT="VIDEO_ENDCARD_CLICK_SPLIT",ev.VIDEO_LOOPING="VIDEO_LOOPING",ev.VIDEO_PROGRESS_BAR="VIDEO_PROGRESS_BAR",ev.VIDEO_PROGRESS_BAR_COLOR="VIDEO_PROGRESS_BAR_COLOR",ev.VIDEO_SHOW_CTA="VIDEO_SHOW_CTA",ev.VUNGLE_PRIVACY_URL="VUNGLE_PRIVACY_URL",ev.VX_ENDCARD="VX_ENDCARD",ev.EC_HTML_PRELOAD="EC_HTML_PRELOAD",ev.PUB_ID="PUB_ID",ev.PLACEMENT_ID="PLACEMENT_ID";var L=eN;(e_=eD||(eD={}))[e_.ACCELERATE=0]="ACCELERATE",e_[e_.EDSP=1]="EDSP",e_[e_.UNKNOWN=2]="UNKNOWN";var P=eD,w=class extends a{static getServiceIdentifier(){return"PlacementTypeServiceInterface"}getPlacementType(){var e,t,n;let i=e=>{switch(e){case"banner":return ef.BANNER;case"mrec":return ef.MREC;case"fullscreen":return ef.FULLSCREEN;case"in_line":return ef.IN_LINE;default:return ef.UNKNOWN}},r=i(null!==(t=null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.getPlacementType())&&void 0!==t?t:"");return r!==ef.UNKNOWN?r:i(null!==(n=this.tokenService.get(L.PLACEMENT_TYPE))&&void 0!==n?n:"")}isMrec(){return this.getPlacementType()===ef.MREC}isBanner(){return this.getPlacementType()===ef.BANNER}isFullscreen(){return this.getPlacementType()===ef.FULLSCREEN}isInLine(){return this.getPlacementType()===ef.IN_LINE}getAdSource(){var e;if(!this.tokenService.has(L.AD_SOURCE)||void 0===this.tokenService.get(L.AD_SOURCE))return P.UNKNOWN;switch(null===(e=this.tokenService.get(L.AD_SOURCE))||void 0===e?void 0:e.toLowerCase()){case"":return P.UNKNOWN;case"accelerate":return P.ACCELERATE;default:return P.EDSP}}constructor(e=y(),t=R()){super(),this.tokenService=e,this.mraidService=t}},b=class{isGreaterThan(e){return this.major!==e.major?this.major>e.major:this.minor!==e.minor?this.minor>e.minor:this.patch>e.patch}isLessThan(e){return e.isGreaterThan(this)}isEqualTo(e){return e.major===this.major&&e.minor===this.minor&&e.patch===this.patch}isGreaterThanOrEqualTo(e){return this.isEqualTo(e)||this.isGreaterThan(e)}isLessThanOrEqualTo(e){return this.isEqualTo(e)||this.isLessThan(e)}toString(){return[this.major,this.minor,this.patch].join(".")}constructor(e){if(this.semanticVersion=e,this.major=0,this.minor=0,this.patch=0,!e)return;let[t,n,i]=e.replace(/-.*/,"").replace(/[^\d.]+/g,"").split(".").map((e=>parseInt(e,10)));t&&!Number.isNaN(t)&&(this.major=t),n&&!Number.isNaN(n)&&(this.minor=n),i&&!Number.isNaN(i)&&(this.patch=i)}},V=e=>decodeURIComponent(Array.prototype.map.call(atob(e),(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));(eh=eR||(eR={})).iOS="iOS",eh.Android="Android",eh.Windows="Windows",eh.Amazon="Amazon",eh.Unknown="Unknown",(eT=ey||(ey={}))[eT.LANDSCAPE=0]="LANDSCAPE",eT[eT.PORTRAIT=1]="PORTRAIT",eT[eT.UNKNOWN=2]="UNKNOWN";class M extends a{static getServiceIdentifier(){return"EnvironmentServiceInterface"}getOperatingSystem(){var e,t,n,i;if(this.operatingSystem)return this.operatingSystem;let r=null===(n=this.mraidService)||void 0===n||null===(t=n.getMraidExt())||void 0===t||null===(e=t.getOS)||void 0===e?void 0:e.call(t);return r&&(this.operatingSystem=M.parseOperatingSystem(r),"Unknown"!==this.operatingSystem)||(this.operatingSystem=M.parseOperatingSystem(null!==(i=this.tokenService.get(L.PLATFORM))&&void 0!==i?i:"")),this.operatingSystem}static parseOperatingSystem(e){switch(e.trim().toLowerCase()){case"ios":return"iOS";case"android":return"Android";case"windows":return"Windows";case"amazon":return"Amazon";default:return"Unknown"}}getOsVersion(){var e,t;return this.osVersion||(this.osVersion=new b(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getOSVersion)||void 0===e?void 0:e.call(t))),this.osVersion}getSdkVersion(){var e,t;if(this.sdkVersion)return this.sdkVersion;let n=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getSDKVersion)||void 0===e?void 0:e.call(t);return void 0!==n&&"0.0.0"!==n||!this.tokenService.has(L.SDK_VERSION)?this.sdkVersion=new b(n):this.sdkVersion=new b(this.tokenService.get(L.SDK_VERSION)),this.sdkVersion}getMraidVersion(){var e,t;return this.mraidVersion||(this.mraidVersion=new b(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getMraidVersion)||void 0===e?void 0:e.call(t))),this.mraidVersion}getBrowserVersion(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.version)&&void 0!==n?n:""}getBrowserName(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.name)&&void 0!==n?n:""}getDeviceModel(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.model)&&void 0!==n?n:""}getDeviceType(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.type)&&void 0!==n?n:""}getOrientation(){return window.outerHeight>window.outerWidth?1:window.outerHeight<window.outerWidth?0:2}getDeviceCountryCode(){var e;return null!==(e=this.tokenService.get(L.COUNTRY_CODE))&&void 0!==e?e:""}static isAffectedByStoreKitProductViewMaskIssue(e){if("iOS"!==e.getOperatingSystem())return!1;let t=e.getOsVersion();return t.isGreaterThanOrEqualTo(new b("17"))&&t.isLessThan(new b("17.1.1"))}constructor(e=y(),t=R()){super(),this.tokenService=e,this.mraidService=t;let n=e.get(L.USER_AGENT);if(n)try{this.uaParserResult=JSON.parse(V(n))}catch(e){}}}M.sdkSeven=new b("7"),(eS=eL||(eL={})).ERROR="error",eS.EVENT="event",(ep=eP||(eP={})).AD_CLOSE="ad-close",ep.AD_LOAD="ad-load",ep.AD_LOAD_COMPLETE="ad-load-complete",ep.AD_START="ad-start",ep.ALTERNATIVE_VIEW="alternative-view",ep.APP_STORE_DURATION="app-store-duration",ep.BANDWIDTH_ESTIMATION="bandwidth-estimation",ep.CLICK_OCCURRED="click-occurred",ep.CTA="cta",ep.ENDCARD_CLICK="endcard-click",ep.ERROR="error",ep.FATAL_ERROR="fatal-error",ep.FORFEIT_REWARD="forfeit-reward",ep.FRUSTRATION_CLICKS="frustration-clicks",ep.GRANT_REWARD="grant-reward",ep.HLS_NOT_SUPPORTED="hls-not-supported",ep.IMPRESSION="impression",ep.INACTIVITY_OBSERVED="inactivity-observed",ep.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE="interaction-after-close-button-visible",ep.NESTED_IFRAME_TYPE="nested-iframe-type",ep.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND="open-storekit-product-view-command",ep.PRIVACY_CTA="privacy-cta",ep.PROXY_MRAID="proxy-mraid",ep.SCENE_END="scene-end",ep.SCENE_START="scene-start",ep.SIGNAL_TIMER_START="signal-timer-start",ep.STORE_KIT_OVERLAY="store-kit-overlay",ep.STORE_KIT_OVERLAY_PREPARE_ERROR="store-kit-overlay-prepare-error",ep.UNKNOWN_MRAID_COMMAND="unknown-mraid-command",ep.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",ep.VIDEO_START="video-start",ep.WEB_VITALS_FIRST_CONTENTFUL_PAINT="web-vitals-first-contentful-paint",ep.WEB_VITALS_INTERACTION_TO_NEXT_PAINT="web-vitals-interaction-to-next-paint",ep.WEB_VITALS_LARGEST_CONTENTFUL_PAINT="web-vitals-largest-contentful-paint",ep.WEB_VITALS_TIME_TO_FIRST_BYTE="web-vitals-time-to-first-byte",(eg=ew||(ew={})).RESOURCE="resource",eg.PLAYABLE="playable",eg.TEMPLATE="template",(eb||(eb={})).lastChanceEndcard="lastChanceEndcard";var k=()=>[eP.AD_CLOSE,eP.AD_LOAD,eP.AD_LOAD_COMPLETE,eP.AD_START,eP.ALTERNATIVE_VIEW,eP.APP_STORE_DURATION,eP.CTA,eP.ERROR,eP.FATAL_ERROR,eP.FRUSTRATION_CLICKS,eP.GRANT_REWARD,eP.HLS_NOT_SUPPORTED,eP.IMPRESSION,eP.INACTIVITY_OBSERVED,eP.PRIVACY_CTA,eP.PROXY_MRAID,eP.SCENE_END,eP.SCENE_START,eP.SIGNAL_TIMER_START,eP.STORE_KIT_OVERLAY_PREPARE_ERROR,eP.UNKNOWN_MRAID_COMMAND,eP.VIDEO_SKIP_TO_ENDCARD,eP.VIDEO_START,eP.WEB_VITALS_FIRST_CONTENTFUL_PAINT,eP.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,eP.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,eP.WEB_VITALS_TIME_TO_FIRST_BYTE];const U="Unable to load img resource",B="video load fail after retry",H="notify fatal error after video load fail",W="video load fail with no retry",x="video does not play after 10s",F="video play fail after 30s",G="video failed to play",K=[B,H,W,x,F,G,U];var Y=()=>{let e=r.getInstance(),t=M.getServiceIdentifier();return e.get(t)},j=()=>{let e=r.getInstance(),t=w.getServiceIdentifier();return e.get(t)},X=(e,t)=>{let n=`context_${t}`;return r.getInstance().has(n)||r.getInstance().bind(n,e),{getValue:()=>r.getInstance().get(n),setValue:e=>{r.getInstance().bind(n,e)}}},z=X({scene:void 0},"SceneContext"),$=()=>{var e;return null===(e=z.getValue())||void 0===e?void 0:e.scene},Z=class extends a{static getServiceIdentifier(){return"ObservabilityServiceInterface"}init(e){this.observability=e(this.tokenService,this.environmentService,this.placementTypeService,this.injectedGetCurrentScene),this.isObserved=this.observability.isObserved()}pushEvent(e){if(this.isObserved&&this.singleEventsToAccept.includes(e.name)){var t;let n=e.name;null===(t=this.observability)||void 0===t||t.pushEvent(n,e)}}pushError(e,t){var n;this.isObserved&&(null===(n=this.observability)||void 0===n||n.pushError(e,{error_source:this.getErrorSource(e,t)}))}getErrorSource(e,t){var n,i;let r=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e,a=null!==(i=null==e?void 0:e.error_source)&&void 0!==i?i:ew.TEMPLATE;return(null==t?void 0:t.error_source)&&(a=t.error_source),(K.includes(r)||/(Failed to load|Unable to load).*/i.test(r))&&(a=ew.RESOURCE),a}constructor(e=y(),t=Y(),n=j(),i=$,r=k()){super(),this.tokenService=e,this.environmentService=t,this.placementTypeService=n,this.injectedGetCurrentScene=i,this.singleEventsToAccept=r,this.isObserved=!1}},q=e=>{var t;return!!e&&"true"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},Q=(e=y())=>!!e.has(L.INCENTIVIZED)&&q(e.get(L.INCENTIVIZED)),J=(e=y())=>Q(e)&&e.has(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)):e.has(L.CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(L.CLOSE_BUTTON_DELAY_SECONDS)):0;const ee="scenes-key",et="gdpr";var en=(e=r.getInstance())=>e.get(ee);(eC=eV||(eV={})).closed="closed",eC.composite="composite",eC.endcard="endcard",eC.gdpr="gdpr",eC.image="image",eC.video="video",(eI=eM||(eM={}))[eI.OFF=0]="OFF",eI[eI.SKO=1]="SKO",eI[eI.SKPV=2]="SKPV",eI[eI.STATIC_URL=3]="STATIC_URL",(eO=ek||(ek={})).CLICK_THROUGH="clickThrough",eO.COMPLETE="complete",eO.CREATIVE_VIEW="creativeView",eO.FIRST_QUARTILE="firstQuartile",eO.MIDPOINT="midpoint",eO.MUTE="mute",eO.PAUSE="pause",eO.RESUME="resume",eO.SKIP="skip",eO.START="start",eO.THIRD_QUARTILE="thirdQuartile",eO.UNMUTE="unmute";var ei=(e,t=j(),n=J())=>!!(t.isBanner()||t.isMrec()||t.isInLine())||!!n&&(9999===n||n>e);const er="mute-button",ea="#555FFF",eo=3e3;var es=()=>{let e=r.getInstance(),t=l.getServiceIdentifier();return e.get(t)},el=class{getLogger(e){return this.wrappedService.getLogger(e)}emit(e){this.wrappedService.emit(e)}addEventHandler(e,t){this.wrappedService.addEventHandler(e,t)}removeEventHandler(e,t){this.wrappedService.removeEventHandler(e,t)}getEventHandlers(e){return this.wrappedService.getEventHandlers(e)}hasExistingEvent(e){return this.wrappedService.hasExistingEvent(e)}addToActivity(e){this.wrappedService.addToActivity(e)}clearActivity(){this.wrappedService.clearActivity()}getActivity(e){return this.wrappedService.getActivity(e)}getActivityEvents(){return this.wrappedService.getActivityEvents()}getActivityLogs(){return this.wrappedService.getActivityLogs()}getActivityEventPairs(e,t,n){return this.wrappedService.getActivityEventPairs(e,t,n)}constructor(e){this.wrappedService=e}};const ed=e=>"observability"===e.type&&null!=e.event;var ec,eu,eE,ev,e_,eh,eT,eS,ep,eg,eC,eI,eO,eA,em,ef,eN,eD,eR,ey,eL,eP,ew,eb,eV,eM,ek,eU,eB,eH,eW,ex,eF,eG,eK,eY,ej,eX,ez,e$=class extends el{emit(e,t){let n=this.getReportableEvent(e,t);this.wrappedService.emit(n)}emitLegacy(e,t=Number.MAX_SAFE_INTEGER,n=["name"]){t!==Number.MAX_SAFE_INTEGER&&this.getEventCount(e,n)>=t||this.emit(e)}getEventCount(e,t=["name"]){let n=this.getReportableEvent(e);return this.wrappedService.getActivityEvents().filter((e=>e.activity.type===eL.EVENT&&"observability"===e.activity.eventType&&t.every((t=>{var i;return(null===(i=e.activity.data)||void 0===i?void 0:i[t])===n.data[t]})))).length}getReportableEvent(e,t){return ed(e)?e:{type:"observability",event:eL.EVENT,data:"string"==typeof e?d({name:e},t):e}}},eZ=e=>new e$(null!=e?e:es()),eq=class extends a{static getServiceIdentifier(){return"GlobalTimerServiceInterface"}isEnabled(){let e=q(this.tokenService.get(L.GLOBAL_TIMER)),t=Number(this.tokenService.get(L.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT)),n=this.injectedGetScenes().some((e=>e.getSceneType()===eV.video)),i=this.injectedGetScenes().some((e=>this.endcardTypes.includes(e.getSceneType())));return e&&t>=1&&t<=100&&n&&i}getTotalCloseButtonDelaySeconds(){let e=()=>{let e=this.tokenService.get(L.MAX_AD_DURATION);return void 0===e||"-1"===e?60:Number(e)},t=9999===J(this.tokenService),n=()=>{var t,n,i,r,a;let o=e(),s=this.injectedGetScenes().find((e=>this.endcardTypes.includes(e.getSceneType()))),l=[eV.endcard,eV.image].includes(null==s||null===(t=s.next)||void 0===t?void 0:t.getSceneType()),d=null==s?void 0:s.getLastChanceEndcardConfig().enabled;return l&&(o-=null!==(i=null===(n=null==s?void 0:s.next)||void 0===n?void 0:n.getCloseButtonConfig().delay)&&void 0!==i?i:0),d&&(o-=null!==(a=null==s||null===(r=s.getLastChanceEndcardConfig().close)||void 0===r?void 0:r.delay)&&void 0!==a?a:0),o>=0?o:0};return t?n():(()=>{var t,i;let r=e(),a=this.injectedGetScenes().find((e=>e.getSceneType()===eV.video)),o=this.injectedGetScenes().find((e=>this.endcardTypes.includes(e.getSceneType()))),s=(null!==(t=null==a?void 0:a.getCloseButtonConfig().delay)&&void 0!==t?t:0)+(null!==(i=null==o?void 0:o.getCloseButtonConfig().delay)&&void 0!==i?i:0);return s>=r?n():s})()}getVideoPageCloseButtonDelaySeconds(){let e=this.getTotalCloseButtonDelaySeconds();return Number(this.tokenService.get(L.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT))/100*e}hasReachedVideoPageCloseButtonDelaySeconds(){return this.totalDelaySecondsConsumed>=this.getVideoPageCloseButtonDelaySeconds()}setTotalDelaySecondsConsumed(e){this.totalDelaySecondsConsumed=e}isVideoSkipped(){return this.reportingService.getEventCount(eP.VIDEO_SKIP_TO_ENDCARD)>0}getEndcardPageCloseButtonDelaySeconds(){return this.isVideoSkipped()&&(this.totalDelaySecondsConsumed=this.getVideoPageCloseButtonDelaySeconds()),this.getTotalCloseButtonDelaySeconds()-this.totalDelaySecondsConsumed}constructor(e=y(),t=eZ(),n=en){super(),this.tokenService=e,this.reportingService=t,this.injectedGetScenes=n,this.totalDelaySecondsConsumed=0,this.endcardTypes=[eV.endcard,eV.image]}},eQ=class extends a{isViewable(){var e;return this.viewableIsSet?this.viewable:!!(null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.isViewable())}resetViewable(){this.viewable=!1,this.viewableIsSet=!1}setViewable(e){this.viewable=e,this.viewableIsSet=!0}static getServiceIdentifier(){return"ViewableServiceInterface"}constructor(e=R()){super(),this.mraidService=e,this.viewable=!1,this.viewableIsSet=!1}},eJ={},e0=[],e1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,e2=Array.isArray;function e3(e,t){for(var n in t)e[n]=t[n];return e}function e5(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function e4(e,t,n){var i,r,a,o={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?eU.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return e6(e,o,i,r,null)}function e6(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++eH:r,__i:-1,__u:0};return null==r&&null!=eB.vnode&&eB.vnode(a),a}function e8(e){return e.children}function e7(e,t){this.props=e,this.context=t}function e9(e,t){if(null==t)return e.__?e9(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?e9(e):null}function te(e){(!e.__d&&(e.__d=!0)&&ex.push(e)&&!tt.__r++||eF!==eB.debounceRendering)&&((eF=eB.debounceRendering)||eG)(tt)}function tt(){for(var e,t,n,i,r,a,o=1;ex.length;)ex.length>o&&ex.sort(eK),e=ex.shift(),o=ex.length,e.__d&&(t=void 0,i=(n=e.__v).__e,r=[],a=[],e.__P&&((t=e3({},n)).__v=n.__v+1,eB.vnode&&eB.vnode(t),to(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,null==i?e9(n):i,!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,ts(r,t,a),t.__e!=i&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(t)));tt.__r=0}function tn(e,t,n,i,r,a,o,s,l,d,c){var u,E,v,_,h,T,S=i&&i.__k||e0,p=t.length;for(l=function(e,t,n,i,r){var a,o,s,l,d,c=n.length,u=c,E=0;for(e.__k=Array(r),a=0;a<r;a++)null!=(o=t[a])&&"boolean"!=typeof o&&"function"!=typeof o?(l=a+E,(o=e.__k[a]="string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?e6(null,o,null,null,null):e2(o)?e6(e8,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?e6(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,s=null,-1!==(d=o.__i=function(e,t,n,i){var r,a,o=e.key,s=e.type,l=t[n];if(null===l&&null==e.key||l&&o==l.key&&s===l.type&&!(2&l.__u))return n;if(i>(null==l||2&l.__u?0:1))for(r=n-1,a=n+1;r>=0||a<t.length;){if(r>=0){if((l=t[r])&&!(2&l.__u)&&o==l.key&&s===l.type)return r;r--}if(a<t.length){if((l=t[a])&&!(2&l.__u)&&o==l.key&&s===l.type)return a;a++}}return-1}(o,n,l,u))&&(u--,(s=n[d])&&(s.__u|=2)),null==s||null===s.__v?(-1==d&&(r>c?E--:r<c&&E++),"function"!=typeof o.type&&(o.__u|=4)):d!=l&&(d==l-1?E--:d==l+1?E++:(d>l?E--:E++,o.__u|=4))):e.__k[a]=null;if(u)for(a=0;a<c;a++)null!=(s=n[a])&&!(2&s.__u)&&(s.__e==i&&(i=e9(s)),function e(t,n,i){var r,a;if(eB.unmount&&eB.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||tl(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){eB.__e(e,n)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&e(r[a],n,i||"function"!=typeof t.type);i||e5(t.__e),t.__c=t.__=t.__e=void 0}(s,s));return i}(n,t,S,l,p),u=0;u<p;u++)null!=(v=n.__k[u])&&(E=-1===v.__i?eJ:S[v.__i]||eJ,v.__i=u,T=to(e,v,E,r,a,o,s,l,d,c),_=v.__e,v.ref&&E.ref!=v.ref&&(E.ref&&tl(E.ref,null,v),c.push(v.ref,v.__c||_,v)),null==h&&null!=_&&(h=_),4&v.__u||E.__k===v.__k?l=function e(t,n,i){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i));return n}t.__e!=n&&(n&&t.type&&!i.contains(n)&&(n=e9(t)),i.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}(v,l,e):"function"==typeof v.type&&void 0!==T?l=T:_&&(l=_.nextSibling),v.__u&=-7);return n.__e=h,l}function ti(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||e1.test(t)?n:n+"px"}function tr(e,t,n,i,r){var a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ti(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||ti(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(eY,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.t=i.t:(n.t=ej,e.addEventListener(t,a?ez:eX,a)):e.removeEventListener(t,a?ez:eX,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function ta(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.u)t.u=ej++;else if(t.u<n.t)return;return n(eB.event?eB.event(t):t)}}}function to(e,t,n,i,r,a,o,s,l,d){var c,u,E,v,_,h,T,S,p,g,C,I,O,A,f,m,N,L=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[s=t.__e=n.__e]),(c=eB.__b)&&c(t);e:if("function"==typeof L)try{if(S=t.props,p="prototype"in L&&L.prototype.render,g=(c=L.contextType)&&i[c.__c],C=c?g?g.props.value:c.__:i,n.__c?T=(u=t.__c=n.__c).__=u.__E:(p?t.__c=u=new L(S,C):(t.__c=u=new e7(S,C),u.constructor=L,u.render=td),g&&g.sub(u),u.props=S,u.state||(u.state={}),u.context=C,u.__n=i,E=u.__d=!0,u.__h=[],u._sb=[]),p&&null==u.__s&&(u.__s=u.state),p&&null!=L.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=e3({},u.__s)),e3(u.__s,L.getDerivedStateFromProps(S,u.__s))),v=u.props,_=u.state,u.__v=t,E)p&&null==L.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),p&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(p&&null==L.getDerivedStateFromProps&&S!==v&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(S,C),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(S,u.__s,C)||t.__v==n.__v)){for(t.__v!=n.__v&&(u.props=S,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),I=0;I<u._sb.length;I++)u.__h.push(u._sb[I]);u._sb=[],u.__h.length&&o.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(S,u.__s,C),p&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(v,_,h)}))}if(u.context=C,u.props=S,u.__P=e,u.__e=!1,O=eB.__r,A=0,p){for(u.state=u.__s,u.__d=!1,O&&O(t),c=u.render(u.props,u.state,u.context),f=0;f<u._sb.length;f++)u.__h.push(u._sb[f]);u._sb=[]}else do{u.__d=!1,O&&O(t),c=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++A<25);u.state=u.__s,null!=u.getChildContext&&(i=e3(e3({},i),u.getChildContext())),p&&!E&&null!=u.getSnapshotBeforeUpdate&&(h=u.getSnapshotBeforeUpdate(v,_)),m=c,null!=c&&c.type===e8&&null==c.key&&(m=function e(t){return"object"!=typeof t||null==t?t:e2(t)?t.map(e):e3({},t)}(c.props.children)),s=tn(e,e2(m)?m:[m],t,n,i,r,a,o,s,l,d),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),T&&(u.__E=u.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else for(N=a.length;N--;)e5(a[N]);else t.__e=n.__e,t.__k=n.__k;eB.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,i,r,a,o,s,l){var d,c,u,E,v,_,h,T=n.props,S=t.props,p=t.type;if("svg"==p?r="http://www.w3.org/2000/svg":"math"==p?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a)for(d=0;d<a.length;d++)if((v=a[d])&&"setAttribute"in v==!!p&&(p?v.localName==p:3==v.nodeType)){e=v,a[d]=null;break}if(null==e){if(null==p)return document.createTextNode(S);e=document.createElementNS(r,p,S.is&&S),s&&(eB.__m&&eB.__m(t,a),s=!1),a=null}if(null===p)T===S||s&&e.data===S||(e.data=S);else{if(a=a&&eU.call(e.childNodes),T=n.props||eJ,!s&&null!=a)for(T={},d=0;d<e.attributes.length;d++)T[(v=e.attributes[d]).name]=v.value;for(d in T)if(v=T[d],"children"==d);else if("dangerouslySetInnerHTML"==d)u=v;else if(!(d in S)){if("value"==d&&"defaultValue"in S||"checked"==d&&"defaultChecked"in S)continue;tr(e,d,null,v,r)}for(d in S)v=S[d],"children"==d?E=v:"dangerouslySetInnerHTML"==d?c=v:"value"==d?_=v:"checked"==d?h=v:s&&"function"!=typeof v||T[d]===v||tr(e,d,v,T[d],r);if(c)s||u&&(c.__html===u.__html||c.__html===e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(u&&(e.innerHTML=""),tn("template"===t.type?e.content:e,e2(E)?E:[E],t,n,i,"foreignObject"==p?"http://www.w3.org/1999/xhtml":r,a,o,a?a[0]:n.__k&&e9(n,0),s,l),null!=a)for(d=a.length;d--;)e5(a[d]);s||(d="value","progress"==p&&null==_?e.removeAttribute("value"):void 0===_||_===e[d]&&("progress"!=p||_)&&("option"!=p||_===T[d])||tr(e,d,_,T[d],r),d="checked",void 0!==h&&h!==e[d]&&tr(e,d,h,T[d],r))}return e}(n.__e,t,n,i,r,a,o,l,d);return(c=eB.diffed)&&c(t),128&t.__u?void 0:s}function ts(e,t,n){for(var i=0;i<n.length;i++)tl(n[i],n[++i],n[++i]);eB.__c&&eB.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){eB.__e(e,t.__v)}}))}function tl(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){eB.__e(e,n)}}function td(e,t,n){return this.constructor(e,n)}eU=e0.slice,eB={__e:function(e,t,n,i){for(var r,a,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},eH=0,eW=function(e){return null!=e&&null==e.constructor},e7.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=e3({},this.state),"function"==typeof e&&(e=e(e3({},n),this.props)),e&&e3(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),te(this))},e7.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),te(this))},e7.prototype.render=e8,ex=[],eG="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,eK=function(e,t){return e.__v.__b-t.__v.__b},tt.__r=0,eY=/(PointerCapture)$|Capture$/i,ej=0,eX=ta(!1),ez=ta(!0);var tc,tu,tE,tv,t_=0,th=[],tT=eB,tS=tT.__b,tp=tT.__r,tg=tT.diffed,tC=tT.__c,tI=tT.unmount,tO=tT.__;function tA(e,t){tT.__h&&tT.__h(tu,e,t_||t),t_=0;var n=tu.__H||(tu.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tm(e,t,n){var i=tA(tc++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):tb(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=tu,!tu.__f)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var o=i.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),a&&a.call(this,e,t,n)||o};tu.__f=!0;var a=tu.shouldComponentUpdate,o=tu.componentWillUpdate;tu.componentWillUpdate=function(e,t,n){if(this.__e){var i=a;a=void 0,r(e,t,n),a=i}o&&o.call(this,e,t,n)},tu.shouldComponentUpdate=r}return i.__N||i.__}function tf(e,t){var n=tA(tc++,3);!tT.__s&&tw(n.__H,t)&&(n.__=e,n.u=t,tu.__H.__h.push(n))}function tN(e){return t_=5,tD((function(){return{current:e}}),[])}function tD(e,t){var n=tA(tc++,7);return tw(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function tR(){for(var e;e=th.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(tL),e.__H.__h.forEach(tP),e.__H.__h=[]}catch(t){e.__H.__h=[],tT.__e(t,e.__v)}}tT.__b=function(e){tu=null,tS&&tS(e)},tT.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),tO&&tO(e,t)},tT.__r=function(e){tp&&tp(e),tc=0;var t=(tu=e.__c).__H;t&&(tE===tu?(t.__h=[],tu.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(tL),t.__h.forEach(tP),t.__h=[],tc=0)),tE=tu},tT.diffed=function(e){tg&&tg(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==th.push(t)&&tv===tT.requestAnimationFrame||((tv=tT.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),ty&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);ty&&(t=requestAnimationFrame(n))})(tR)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),tE=tu=null},tT.__c=function(e,t){t.some((function(e){try{e.__h.forEach(tL),e.__h=e.__h.filter((function(e){return!e.__||tP(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],tT.__e(n,e.__v)}})),tC&&tC(e,t)},tT.unmount=function(e){tI&&tI(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{tL(e)}catch(e){t=e}})),n.__H=void 0,t&&tT.__e(t,n.__v))};var ty="function"==typeof requestAnimationFrame;function tL(e){var t=tu,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),tu=t}function tP(e){var t=tu;e.__c=e.__(),tu=t}function tw(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function tb(e,t){return"function"==typeof t?t(e):t}var tV=Symbol.for("preact-signals");function tM(){if(tH>1)tH--;else{for(var e,t=!1;void 0!==tB;){var n=tB;for(tB=void 0,tW++;void 0!==n;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&tY(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=i}}if(tW=0,tH--,t)throw e}}function tk(e){if(tH>0)return e();tH++;try{return e()}finally{tM()}}var tU=void 0,tB=void 0,tH=0,tW=0,tx=0;function tF(e){if(void 0!==tU){var t=e.n;if(void 0===t||t.t!==tU)return t={i:0,S:e,p:tU.s,n:void 0,t:tU,e:void 0,x:void 0,r:t},void 0!==tU.s&&(tU.s.n=t),tU.s=t,e.n=t,32&tU.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=tU.s,t.n=void 0,tU.s.n=t,tU.s=t),t}}function tG(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function tK(e){return new tG(e)}function tY(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function tj(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function tX(e){for(var t=e.s,n=void 0;void 0!==t;){var i=t.p;-1===t.i?(t.S.U(t),void 0!==i&&(i.n=t.n),void 0!==t.n&&(t.n.p=i)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=i}e.s=n}function tz(e){tG.call(this,void 0),this.x=e,this.s=void 0,this.g=tx-1,this.f=4}function t$(e){var t=e.u;if(e.u=void 0,"function"==typeof t){tH++;var n=tU;tU=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,tZ(e),t}finally{tU=n,tM()}}}function tZ(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,t$(e)}function tq(e){if(tU!==this)throw Error("Out-of-order effect");tX(this),tU=e,this.f&=-2,8&this.f&&tZ(this),tM()}function tQ(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function tJ(e){var t=new tQ(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}tG.prototype.brand=tV,tG.prototype.h=function(){return!0},tG.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},tG.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},tG.prototype.subscribe=function(e){var t=this;return tJ((function(){var n=t.value,i=tU;tU=void 0;try{e(n)}finally{tU=i}}))},tG.prototype.valueOf=function(){return this.value},tG.prototype.toString=function(){return this.value+""},tG.prototype.toJSON=function(){return this.value},tG.prototype.peek=function(){var e=tU;tU=void 0;try{return this.value}finally{tU=e}},Object.defineProperty(tG.prototype,"value",{get:function(){var e=tF(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(tW>100)throw Error("Cycle detected");this.v=e,this.i++,tx++,tH++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{tM()}}}}),(tz.prototype=new tG).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===tx))return!0;if(this.g=tx,this.f|=1,this.i>0&&!tY(this))return this.f&=-2,!0;var e=tU;try{tj(this),tU=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return tU=e,tX(this),this.f&=-2,!0},tz.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}tG.prototype.S.call(this,e)},tz.prototype.U=function(e){if(void 0!==this.t&&(tG.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},tz.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(tz.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=tF(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),tQ.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},tQ.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,t$(this),tj(this),tH++;var e=tU;return tU=this,tq.bind(this,e)},tQ.prototype.N=function(){2&this.f||(this.f|=2,this.o=tB,tB=this)},tQ.prototype.d=function(){this.f|=8,1&this.f||tZ(this)};var t0,t1,t2=[],t3=[];function t5(e,t){eB[e]=t.bind(null,eB[e]||function(){})}function t4(e){t1&&t1(),t1=e&&e.S()}function t6(e){var t=this,n=e.data,i=t8(n);i.value=n;var r=tD((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}var n=new tz((function(){var e=i.value.value;return 0===e?0:!0===e?"":e||""})),r=new tz((function(){return!eW(n.value)})),a=tJ((function(){if(this.N=ni,r.value){var e=n.value;t.base&&3===t.base.nodeType&&(t.base.data=e)}})),o=t.__$u.d;return t.__$u.d=function(){a(),o.call(this)},[r,n]}),[]),a=r[0],o=r[1];return a.value?o.peek():o.value}function t8(e){return tD((function(){return tK(e)}),[])}tJ((function(){t0=this.N}))(),t6.displayName="_st",Object.defineProperties(tG.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:t6},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),t5("__b",(function(e,t){if("string"==typeof t.type){var n,i=t.props;for(var r in i)if("children"!==r){var a=i[r];a instanceof tG&&(n||(t.__np=n={}),n[r]=a,i[r]=a.peek())}}e(t)})),t5("__r",(function(e,t){t4();var n,i,r=t.__c;r&&(r.__$f&=-2,void 0===(i=r.__$u))&&(r.__$u=(tJ((function(){n=this})),n.c=function(){r.__$f|=1,r.setState({})},i=n)),t4(i),e(t)})),t5("__e",(function(e,t,n,i){t4(),e(t,n,i)})),t5("diffed",(function(e,t){if(t4(),"string"==typeof t.type&&(n=t.__e)){var n,i=t.__np,r=t.props;if(i){var a=n.U;if(a)for(var o in a){var s=a[o];void 0===s||o in i||(s.d(),a[o]=void 0)}else a={},n.U=a;for(var l in i){var d=a[l],c=i[l];void 0===d?(d=function(e,t,n,i){var r=t in e&&void 0===e.ownerSVGElement,a=tK(n);return{o:function(e,t){a.value=e,i=t},d:tJ((function(){this.N=ni;var n=a.value.value;i[t]!==n&&(i[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}(n,l,c,r),a[l]=d):d.o(c,r)}}}e(t)})),t5("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var i=n.U;if(i)for(var r in n.U=void 0,i){var a=i[r];a&&a.d()}}}else{var o=t.__c;if(o){var s=o.__$u;s&&(o.__$u=void 0,s.d())}}e(t)})),t5("__h",(function(e,t,n,i){(i<3||9===i)&&(t.__$f|=2),e(t,n,i)})),e7.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&void 0!==n.s;for(var r in t)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){var a=2&this.__$f;if(!(i||a||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var o in e)if("__source"!==o&&e[o]!==this.props[o])return!0;for(var s in this.props)if(!(s in e))return!0;return!1};var t7="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame,t9=function(e){queueMicrotask((function(){queueMicrotask(e)}))};function ne(){tk((function(){for(var e;e=t2.shift();)t0.call(e)}))}function nt(){1===t2.push(this)&&(eB.requestAnimationFrame||t7)(ne)}function nn(){tk((function(){for(var e;e=t3.shift();)t0.call(e)}))}function ni(){1===t3.push(this)&&(eB.requestAnimationFrame||t9)(nn)}function nr(e){var t=tN(e);t.current=e,tf((function(){return tJ((function(){return this.N=nt,t.current()}))}),[])}var na=class extends a{setMutedSignal(e){this.mutedSignal.value=e}getMutedSignal(){return this.mutedSignal}isMuted(){return this.mutedSignal.value}mute(){this.setMutedSignal(!0)}unmute(){this.setMutedSignal(!1)}static getServiceIdentifier(){return"MuteServiceInterface"}constructor(){super(),this.mutedSignal=tK(!1)}},no=()=>{let e=r.getInstance(),t=g.getServiceIdentifier();return e.get(t)},ns=(e,t)=>(null!=t?t:no()).interpreterMap.get(e);(Eq=_r||(_r={})).SHOW="SHOW",Eq.PRELOAD="PRELOAD",Eq.CANCEL_PRELOAD="CANCEL_PRELOAD",(EQ=_a||(_a={})).SHOWING="SHOWING",EQ.PRELOADING="PRELOADING",EQ.INITIAL="INITIAL",(EJ=_o||(_o={})).INITIALIZE_PRELOAD="initializePreload",EJ.EMIT_SHOW="emitShow",EJ.MARK_PRELOAD_SUCCESS="markPreloadSuccess",EJ.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",EJ.FLUSH_MRAID_EVENTS="flushMraidEvents",EJ.CANCEL_PRELOAD="cancelPreload",(E0=_s||(_s={})).MUTE_SOUND="muteSound",E0.UN_MUTE_SOUND="unMuteSound",E0.EMIT_MUTED="emitMuted",E0.EMIT_VIDEO_ERROR="emitVideoError",E0.CLOSE_VIDEO="closeVideo",E0.CLOSE_VIDEO_CURRENT_SCENE="closeVideoCurrentScene",E0.CLOSE_PICTURE_IN_PICTURE="closePictureInPicture",E0.PAUSE_VIDEO="pauseVideo",E0.PLAY_VIDEO="playVideo",E0.POSTROLL_VIEW="postrollView",E0.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE="sendEventVideoSkipToNextScene",E0.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT="setPictureInPictureVideoContext",E0.SHOW_PICTURE_IN_PICTURE="showPictureInPicture",E0.SEND_FATAL_VIDEO_ERROR="sendFatalVideoError";var nl=_s;(E1=_l||(_l={})).CLOSE_BUTTON_MOUNT="CLOSE_BUTTON_MOUNT",E1.CLOSE_BUTTON_UNMOUNT="CLOSE_BUTTON_UNMOUNT",E1.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",E1.CLOSE_BUTTON_WILL_SHOW="CLOSE_BUTTON_WILL_SHOW",E1.CLOSE_PICTURE_IN_PICTURE="CLOSE_PICTURE_IN_PICTURE",E1.COMPLETE="COMPLETE",E1.LAST_CHANCE_ENDCARD="LAST_CHANCE_ENDCARD",E1.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",E1.MUTE="MUTE",E1.NEXT="NEXT",E1.PRIVACY_LOGO_SHOW="PRIVACY_LOGO_SHOW",E1.PRIVACY_LOGO_HIDE="PRIVACY_LOGO_HIDE",E1.PRIVACY_BOTTOM_DRAWER_OPEN="PRIVACY_BOTTOM_DRAWER_OPEN",E1.PRIVACY_BOTTOM_DRAWER_CLOSE="PRIVACY_BOTTOM_DRAWER_CLOSE",E1.PRODUCT_VIEW_CLOSE="PRODUCT_VIEW_CLOSE",E1.OPEN_PRIVACY_PAGE="OPEN_PRIVACY_PAGE",E1.UNMUTE="UNMUTE",E1.VIDEO_ERROR="VIDEO_ERROR",E1.VIDEO_FAILURE="VIDEO_FAILURE",E1.CLOSE="CLOSE",E1.CREATIVE_VIEW="CREATIVE_VIEW",E1.START_THEATRE_MODE="START_THEATRE_MODE",E1.STOP_THEATRE_MODE="STOP_THEATRE_MODE";var nd=class{getObservabilityData(){return{}}getTransitions(){return this.transitions}addTransition(e){return this.transitions.push(e),this}addOrUpdateTransition(e){let t=this.getTransitions().find((t=>t.name===e.name));if(t){t.scene=e.scene,t.cond=e.cond;let n={};t.actions.forEach((e=>{n[e.name]=!0}));let i=e.actions.filter((e=>!n[e.name]));t.actions.push(...i)}else this.addTransition(e);return this}getEntryActions(){return this.entryActions}addEntryAction(e){return this.entryActions.push(e),this}getExitActions(){return this.exitActions}addExitAction(e){return this.exitActions.push(e),this}isAlternative(){return this.alternative}getEventStreams(){return{}}static getInstances(){return[]}constructor(){this.transitions=[],this.entryActions=[],this.exitActions=[],this.alternative=!1}},nc=()=>{let e=r.getInstance(),t=f.getServiceIdentifier();return e.get(t)};(E2=_d||(_d={})).PAUSE_INTERVALS="pauseAllIntervals",E2.START_INTERVALS="startAllIntervals";var nu=e=>({pauseAllIntervals:()=>{(e||nc()).pauseAll()},startAllIntervals:()=>{(e||nc()).startAll()}}),nE=()=>{let e=r.getInstance(),t=D.getServiceIdentifier();return e.get(t)};(E3=_c||(_c={})).STANDBY_TIMERS="standbyTimers",E3.WAKE_TIMERS="wakeTimers";var nv=e=>({standbyTimers:()=>{(e||nE()).standby()},wakeTimers:()=>{(e||nE()).wake()}});(E5=_u||(_u={})).OPEN_PRIVACY_URL="openPrivacyUrl",E5.SET_PRIVACY_BUTTON_VISIBLE="setPrivacyButtonVisible",E5.SET_PRIVACY_BUTTON_HIDDEN="setPrivacyButtonHidden",E5.SET_PRIVACY_DRAWER_OPEN="setPrivacyDrawerOpen",E5.SET_PRIVACY_DRAWER_CLOSED="setPrivacyDrawerClosed",E5.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange";var n_=_u;(E4=_E||(_E={})).CLOSE="CLOSE",E4.FINISH="FINISH",E4.INTERRUPT="INTERRUPT",E4.SET_ERROR="SET_ERROR",E4.SET_PREPARED="SET_PREPARED",E4.READY="READY",E4.RESUME="RESUME",E4.SET_DISPLAY_OPTIONS="SET_DISPLAY_OPTIONS",E4.SET_FALLBACK="SET_FALLBACK",E4.SET_VISIBLE="SET_VISIBLE",E4.SHOW="SHOW",E4.START_DELAY_SHOW="START_DELAY_SHOW",E4.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",(E6=_v||(_v={})).CLOSING="CLOSING",E6.ERROR="ERROR",E6.DELAY_SHOW="DELAY_SHOW",E6.DELAY_SHOW_IMMEDIATE="DELAY_SHOW_IMMEDIATE",E6.DELAY_SHOW_INTERRUPTED="DELAY_SHOW_INTERRUPTED",E6.DELAY_SHOW_VISIBLE="DELAY_SHOW_VISIBLE",E6.FALLBACK="FALLBACK",E6.IDLE="IDLE",E6.INITIAL="INITIAL",E6.IMMEDIATE_SHOW="IMMEDIATE_SHOW",E6.IMMEDIATE_SHOW_VISIBLE="IMMEDIATE_SHOW_VISIBLE",E6.PREPARING="PREPARING",(E8=__||(__={})).ASSIGN_DISPLAY_OPTIONS="ASSIGN_DISPLAY_OPTIONS",E8.ASSIGN_FALLBACK="ASSIGN_FALLBACK",E8.CLOSE_SKO="CLOSE_SKO",E8.EMIT_OBSERVABILITY_EVENT="EMIT_OBSERVABILITY_EVENT",E8.SHOW_FALLBACK="SHOW_FALLBACK",E8.SHOW_SKO="SHOW_SKO",E8.CANCEL_DELAY_SHOW="CANCEL_DELAY_SHOW";const nh=new b("6.4"),nT=new b("6"),nS=(e=Y())=>e.getSdkVersion().isGreaterThanOrEqualTo(nh),np=(e=Y())=>e.getOperatingSystem()===eR.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nT);var ng=(e=Y())=>nS(e)&&np(e);(E7=_h||(_h={})).SKPV="SKPV",E7.APP_STORE="APP_STORE",E7.OFF="OFF";var nC=(e=Y())=>{let t="APP_STORE";return ng(e)&&(t="SKPV"),t},nI=class extends a{canOpen(){return[_v.IDLE,_v.FALLBACK].some((e=>this.interpreter.state.matches(e)))}close(){this.interpreter.send({type:_E.CLOSE})}fallback(){this.interpreter.state.context.fallback!==_h.OFF&&(this.interpreter.send({type:_E.SET_FALLBACK}),this.open())}finish(){this.interpreter.send({type:_E.FINISH})}getState(){return this.interpreter.state}init(){}interrupt(){this.interpreter.send({type:_E.INTERRUPT})}isIdle(){var e;return null!==(e=this.interpreter.state.matches(_v.IDLE))&&void 0!==e&&e}isInterrupted(){return[_v.CLOSING,_v.DELAY_SHOW_INTERRUPTED].some((e=>this.interpreter.state.matches(e)))}isOpen(){return[_v.DELAY_SHOW_IMMEDIATE,_v.DELAY_SHOW_VISIBLE,_v.IMMEDIATE_SHOW,_v.IMMEDIATE_SHOW_VISIBLE].some((e=>this.interpreter.state.matches(e)))}open(e){let t={type:_E.START_IMMEDIATE_SHOW,fallback:null==e?void 0:e.fallback};(null==e?void 0:e.delayed)&&(t.type=this.interpreter.state.matches(_v.DELAY_SHOW)?_E.SHOW:_E.START_DELAY_SHOW),this.interpreter.send(t)}resume(){this.interpreter.send({type:_E.RESUME})}setDisplayOptions(e){this.interpreter.send({type:_E.SET_DISPLAY_OPTIONS,displayOptions:e})}subscribe(e){return this.interpreter.subscribe(e)}static getServiceIdentifier(){return"StoreKitOverlayServiceInterface"}constructor(e,t={},n=no()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nO=()=>{let e=r.getInstance(),t=nI.getServiceIdentifier();if(e.has(t))return e.get(t)};(E9=_T||(_T={})).CLOSE_OVERLAY_VIEW="closeOverlayView",E9.INTERRUPT_OVERLAY_VIEW="interruptOverlayView",E9.RESUME_OVERLAY_VIEW="resumeOverlayView",E9.SHOW_OVERLAY_VIEW="showOverlayView";var nA=(e=nO)=>({closeOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.close())},interruptOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.interrupt())},resumeOverlayView:()=>{let t=e();(null==t?void 0:t.isInterrupted())&&(null==t||t.resume())},showOverlayView:()=>{let t=e();null!=t&&t.isOpen()||((null==t?void 0:t.isInterrupted())?null==t||t.resume():null==t||t.open())}});(ve=_S||(_S={})).START="start",ve.STOP="stop";var nm=_S,nf=()=>es();(_p||(_p={})).CLOSE_AD="CLOSE_AD";var nN=_p;(_g||(_g={})).CLOSE="close";var nD=_g,nR=(e=nE(),t=nf())=>{e.destroyAll(),t.emit({type:"picture-in-picture",event:nD.CLOSE,fireOnlyOnce:!0}),t.emit({type:"heartbeat",event:nm.STOP}),t.emit({type:"close",event:nN.CLOSE_AD,fireOnlyOnce:!0})};(vt=_C||(_C={})).CLOSE="CLOSE",vt.OPEN="OPEN",vt.PREPARE_FINISHED="PREPARE_FINISHED",vt.PREPARE_SUCCESS="PREPARE_SUCCESS",vt.READY="READY",vt.SET_FALLBACK="SET_FALLBACK",(vn=_I||(_I={})).FALLBACK="FALLBACK",vn.HIDDEN="HIDDEN",vn.INITIAL="INITIAL",vn.PREPARING="PREPARING",vn.SHOWING="SHOWING",vn.DONE="DONE";var ny=class extends a{isDone(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_I.DONE))&&void 0!==t&&t}canOpen(){var e,t,n;return null!==(n=(null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_I.HIDDEN))||(null===(t=this.interpreter)||void 0===t?void 0:t.state.matches(_I.FALLBACK)))&&void 0!==n&&n}close(){var e;null===(e=this.interpreter)||void 0===e||e.send({type:_C.CLOSE})}fallback(){}init(){}isOpen(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_I.SHOWING))&&void 0!==t&&t}open(e){var t;this.hasFallback=e,null===(t=this.interpreter)||void 0===t||t.send({type:_C.OPEN})}subscribe(e){var t;return null===(t=this.interpreter)||void 0===t?void 0:t.subscribe(e)}static getServiceIdentifier(){return"ProductViewServiceInterface"}constructor(e,t={},n=no()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nL=()=>{let e=r.getInstance(),t=ny.getServiceIdentifier();if(e.has(t))return e.get(t)},nP=(e=Y())=>e.getSdkVersion().isLessThan(new b("7"))&&e.getOrientation()===ey.LANDSCAPE;const nw=new b("14"),nb=new b("6.8.1"),nV=(e=Y())=>e.getOperatingSystem()===eR.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nw),nM=(e=Y())=>e.getSdkVersion().isGreaterThanOrEqualTo(nb);var nk=(e=Y(),t=j())=>nV(e)&&nM(e)&&!(t.isMrec()||t.isBanner()||t.isInLine());(vi=_O||(_O={})).MINIMIZED="minimized",vi.MAXIMIZED="maximized";var nU=_O;(vr=_A||(_A={})).SHOW_PRODUCT_VIEW="showProductView",vr.HIDE_PRODUCT_VIEW="hideProductView",vr.END_AD_ON_PRODUCT_VIEW_CLOSE="endAdOnProductViewClose";const nB=()=>({showProductView:()=>{if(nP()&&nk()){let e=nO();return void((null==e?void 0:e.canOpen())&&e.open({fallback:_h.OFF}))}let e=nL();null==e||e.open(!1)},hideProductView:()=>{},endAdOnProductViewClose:()=>{Y().getSdkVersion().isEqualTo(M.sdkSeven)&&ng()&&es().addEventHandler("viewability",((e,t)=>{t.event===nU.MAXIMIZED&&nR()}))}});var nH=()=>ng()?nB():void 0;(va=_m||(_m={}))[va.CLOSE=0]="CLOSE",va[va.SKIP=1]="SKIP",(vo=_f||(_f={})).SET_CLOSE_BUTTON_VISIBLE="setCloseButtonVisible",vo.EMIT_CLOSE_BUTTON_SHOW="emitCloseButtonShow",vo.EMIT_CLOSE_BUTTON_CLICK="emitCloseButtonClick",vo.SET_CLOSE_BUTTON_HIDDEN="setCloseButtonHidden";var nW=_m;(vs=_N||(_N={})).GRANT_REWARD="GRANT_REWARD",vs.FORFEIT_REWARD="FORFEIT_REWARD";var nx=_N;(vl=_D||(_D={})).CLOSE_AD="closeAd",vl.CLOSE_STOREKIT_OVERLAY="closeStoreKitOverlay",vl.ENSURE_REWARD_GRANTED="ensureRewardGranted",vl.SET_IS_THEATRE_MODE_ACTIVE_TRUE="isTheatreModeActiveTrue",vl.SET_IS_THEATRE_MODE_ACTIVE_FALSE="isTheatreModeActiveFalse";var nF=(e=y(),t=nf(),n=nR,i=nO)=>({closeAd:()=>{n()},isTheatreModeActiveTrue:p({isTheatreModeActive:!0}),isTheatreModeActiveFalse:p({isTheatreModeActive:!1}),closeStoreKitOverlay:()=>{var e;null===(e=i())||void 0===e||e.close()},ensureRewardGranted:()=>{let n=t.hasExistingEvent({type:"incentivized-event",event:nx.FORFEIT_REWARD}),i=t.hasExistingEvent({type:"incentivized-event",event:nx.GRANT_REWARD});!Q(e)||n||i||t.emit({type:"incentivized-event",event:nx.GRANT_REWARD,fireOnlyOnce:!0})}});const nG={name:_l.PRIVACY_LOGO_SHOW,actions:[{name:n_.SET_PRIVACY_BUTTON_VISIBLE}]},nK={name:_l.PRIVACY_LOGO_HIDE,actions:[{name:n_.SET_PRIVACY_BUTTON_HIDDEN}]},nY=e=>({name:_l.PRIVACY_BOTTOM_DRAWER_OPEN,actions:e?[{name:n_.SET_PRIVACY_DRAWER_OPEN},{name:n_.TRIGGER_VIEWABLE_CHANGE},{name:nl.PAUSE_VIDEO},{name:_d.PAUSE_INTERVALS},{name:_c.STANDBY_TIMERS},{name:_T.INTERRUPT_OVERLAY_VIEW}]:[{name:n_.OPEN_PRIVACY_URL}]}),nj={name:_l.PRIVACY_BOTTOM_DRAWER_CLOSE,actions:[{name:nl.PLAY_VIDEO},{name:n_.SET_PRIVACY_DRAWER_CLOSED},{name:n_.TRIGGER_VIEWABLE_CHANGE},{name:_d.START_INTERVALS},{name:_c.WAKE_TIMERS},{name:_T.RESUME_OVERLAY_VIEW}]},nX={name:_l.OPEN_PRIVACY_PAGE,actions:[{name:n_.OPEN_PRIVACY_URL}]},nz={name:_l.PRODUCT_VIEW_CLOSE,actions:[{name:_A.END_AD_ON_PRODUCT_VIEW_CLOSE}]},n$={name:_l.CLOSE_BUTTON_MOUNT,actions:[{name:_f.SET_CLOSE_BUTTON_VISIBLE}]},nZ={name:_l.CLOSE_BUTTON_UNMOUNT,actions:[{name:_f.SET_CLOSE_BUTTON_HIDDEN}]},nq={name:_l.CLOSE_BUTTON_CLICK,actions:[{name:_f.EMIT_CLOSE_BUTTON_CLICK}]},nQ={name:_l.CLOSE_BUTTON_WILL_SHOW,actions:[{name:_f.EMIT_CLOSE_BUTTON_SHOW}]},nJ={name:_l.CLOSE_PICTURE_IN_PICTURE,actions:[{name:nl.CLOSE_PICTURE_IN_PICTURE}]},n0={name:_l.STOP_THEATRE_MODE,actions:[{name:_D.SET_IS_THEATRE_MODE_ACTIVE_FALSE}]},n1={name:_l.START_THEATRE_MODE,actions:[{name:_D.SET_IS_THEATRE_MODE_ACTIVE_TRUE}]};var n2=function(e){return!!e&&"function"==typeof e.getLastChanceEndcardConfig},n3=class extends nd{getTransitions(){return super.getTransitions().concat(nK,nG,nY(this.isFullscreen),nj,nX,nJ)}isLastPage(){var e;return!(n2(this)&&this.getLastChanceEndcardConfig().enabled||(null===(e=this.next)||void 0===e?void 0:e.getSceneType())!==eV.closed)}constructor({isFullscreen:e}){super(),this.isFullscreen=e}};const n5={name:_l.MUTE,actions:[{name:nl.MUTE_SOUND},{name:nl.EMIT_MUTED}]},n4={name:_l.UNMUTE,actions:[{name:nl.UN_MUTE_SOUND},{name:nl.EMIT_MUTED}]},n6={name:_l.VIDEO_ERROR,actions:[{name:nl.EMIT_VIDEO_ERROR}]};var n8=e=>{switch(e){case"off":return eM.OFF;case"overlay_view":return eM.SKO;default:return eM.SKPV}},n7=class{getFullScreenClickConfig(){return{enabled:(()=>{if(this.placementType!==ef.FULLSCREEN)return!0;let e=this.skOverlayAutoTokenValue,t=this.fullCtaOptionTokenValue,n=this.fullCtaTokenValue;return"fsc_off"!==t&&("true"===e||"true"===n)})(),id:this.id,target:[ef.BANNER,ef.MREC].includes(this.placementType)?eM.SKPV:n8(this.skFullCtaTokenValue)}}constructor({skOverlayAutoTokenValue:e,fullCtaOptionTokenValue:t,fullCtaTokenValue:n,skFullCtaTokenValue:i,id:r,placementType:a}){this.skOverlayAutoTokenValue=e,this.fullCtaOptionTokenValue=t,this.fullCtaTokenValue=n,this.skFullCtaTokenValue=i,this.id=r,this.placementType=a}};(vd=_R||(_R={})).CHECKPOINT_0="checkpoint.0",vd.CHECKPOINT_100="checkpoint.100",vd.CHECKPOINT_25="checkpoint.25",vd.CHECKPOINT_50="checkpoint.50",vd.CHECKPOINT_75="checkpoint.75",vd.CLICK_URL="clickUrl",vd.POSTROLL_CLICK="postroll.click",vd.POSTROLL_VIEW="postroll.view",vd.VIDEO_CLOSE="video.close",vd.VIDEO_LENGTH="video.length",vd.VIDEO_MUTE="video.mute",vd.VIDEO_UNMUTE="video.unmute",vd.REWARD_GRANTED="rewardGranted";var n9=_R;const ie=e=>Object.values(n9).includes(e);var it=class extends el{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&ie(e)?{type:"tpat",event:e}:"object"==typeof e?e:void 0}},ii=e=>new it(null!=e?e:es()),ir=(e=ii(),t=$())=>{let n=(null==t?void 0:t.getSceneType())===eV.image||(null==t?void 0:t.getSceneType())===eV.endcard;t&&"shouldSplitVideoEndcardClick"in t&&t.shouldSplitVideoEndcardClick?(null==t?void 0:t.getSceneType())===eV.video&&e.emit(n9.CLICK_URL,!0):e.emit(n9.CLICK_URL,!0),n&&e.emit(n9.POSTROLL_CLICK,!0)},ia=class{getStoreKitOverlayAutoShowConfig(e=ir){let t="adv_pref"===this.fullCtaOptionTokenValue,n="false"===this.skOverlayDisableAutoMMPTokenValue;return{enabled:!!nk(this.environmentService,this.placementTypeService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&q(this.skOverlayAutoTokenValue)&&t,autoShowDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayDelaySecondsTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?0:1e3*Math.max(t,0)})(),isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?e:()=>{}}}constructor(e,t,n,i,r,a,o=Y(),s=j()){this.appStoreId=e,this.fullCtaOptionTokenValue=t,this.skOverlayAutoTokenValue=n,this.skOverlayDelaySecondsTokenValue=i,this.skOverlayAutoCloseTokenValue=r,this.skOverlayDisableAutoMMPTokenValue=a,this.environmentService=o,this.placementTypeService=s}},io=(e=y())=>{let t=e.get(L.APP_STORE_ID);if(t)return t;let n=e.get(L.CTA_BUTTON_URL),i=null==n?void 0:n.match(/\/id(\d+)/i);return(null==i?void 0:i[1])?i[1]:void 0},is=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnVideoAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!(!ng(this.environmentService)||void 0===this.appStoreId||0===this.appStoreId.length||this.placementService.isInLine())&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n=Y(),i=j()){this.appStoreOnVideoAutoDelayTokenValue=e,this.appStoreId=t,this.environmentService=n,this.placementService=i}},il=e=>{var t;return!!e&&"false"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},id=class{getStoreKitOverlayAutoShowConfig(e=ir){let t=this.isEndcardOnly?this.skOverlayDelaySecondsTokenValue:this.ecSkOverlayDelaySecondsTokenValue,n="false"===this.ecSkOverlayDisableAutoMMPTokenValue&&0===this.endcardIndex;return{enabled:!(!nk(this.environmentService,this.placementTypeService)||!this.appStoreId||il(this.skOverlayAutoTokenValue))&&!(this.endcardIndex>0)&&("adv_pref"===this.fullCtaOptionTokenValue||this.isEndcardOnly)&&!!t&&parseInt(t,10)>=0,isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoShowDelay:(()=>{let e=parseInt(null!=t?t:"5",10);return Number.isNaN(e)?3e3:Math.max(3e3,1e3*e)})(),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?()=>e():()=>{}}}constructor(e,t,n,i,r,a,o,s,l,d=Y(),c=j()){this.endcardIndex=e,this.isEndcardOnly=t,this.appStoreId=n,this.fullCtaOptionTokenValue=i,this.skOverlayAutoTokenValue=r,this.skOverlayDelaySecondsTokenValue=a,this.ecSkOverlayDelaySecondsTokenValue=o,this.skOverlayAutoCloseTokenValue=s,this.ecSkOverlayDisableAutoMMPTokenValue=l,this.environmentService=d,this.placementTypeService=c}},ic=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnEndcardAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!!ng(this.environmentService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&0===this.endcardIndex&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n,i=Y()){this.endcardIndex=e,this.appStoreId=t,this.appStoreOnEndcardAutoDelayTokenValue=n,this.environmentService=i}};const iu=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});(vc=_y||(_y={})).RESOURCE="resource",vc.EXCEPTION="exception",vc.UNHANDLEDREJECTION="unhandledrejection",vc.PLAYABLE="playable",(vu=_L||(_L={})).IMAGE="img",vu.VIDEO="video";var iE=_y,iv=()=>es(),i_=(e,t=iv())=>{if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t.slice(0,4):[]}catch(e){t.emit({type:"error-logging",event:iE.RESOURCE,data:{error:{message:"Unable to parse app screenshots"}}})}return[]},ih=class{hasAppMetadata(){return!(!this.appIcon||!this.appName)}getAppRatingCount(){var e;let t=parseInt(null!==(e=this.appRatingCount)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?iu.format(t):""}getAppContentRatingImg(){var e,t;return null!==(t={Everyone:"https://cdn-lb.vungle.com/esrb/E.svg","Everyone 10+":"https://cdn-lb.vungle.com/esrb/E10plus.svg",Teen:"https://cdn-lb.vungle.com/esrb/T.svg","Mature 17+":"https://cdn-lb.vungle.com/esrb/M.svg","Adults Only 18+":"https://cdn-lb.vungle.com/esrb/AO.svg"}[null!==(e=this.appContentRating)&&void 0!==e?e:""])&&void 0!==t?t:""}getAppDownloadCount(){let{appDownloadCount:e}=this;if(!e)return"";if(/[KMB]/.test(e))return e;e.includes("-")&&([e]=e.split("-"));let t=Number(e=e.replace(/[,+ ]+/g,""));return t?`${new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0}).format(t)}+`:""}getAppRating(){var e,t;let n=null!==(t=null!==(e=this.appRating)&&void 0!==e?e:this.appStoreRating)&&void 0!==t?t:"4.4",i=n.lastIndexOf("/")+1,r=n.indexOf("-stars.svg"),a=n.substring(i,r);if(a){let e=parseFloat(a);if(!Number.isNaN(e))return e}let o=parseFloat(n);return Number.isNaN(o)?parseFloat("4.4"):o}getAppName(){var e;if(this.appNameEncoded)try{return V(this.appNameEncoded)}catch(e){}return null!==(e=this.appName)&&void 0!==e?e:""}getAppDescription(){var e;if(this.appDescriptionEncoded)try{return V(this.appDescriptionEncoded)}catch(e){}return null!==(e=this.appDescription)&&void 0!==e?e:""}getAppLongDescription(){var e;if(this.appLongDescriptionEncoded)try{return V(this.appLongDescriptionEncoded)}catch(e){}return null!==(e=this.appLongDescription)&&void 0!==e?e:""}getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return V(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText&&""!==this.ctaButtonText.trim()?this.ctaButtonText:this.hasAppMetadata()&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;let t=parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?t:0}getCtaButtonUrl(){var e;return null!==(e=this.ctaButtonUrl)&&void 0!==e?e:""}getAppMetaData(){var e,t;return{enabled:this.hasAppMetadata(),company:this.getAppDescription(),contentRating:null!==(e=this.appContentRating)&&void 0!==e?e:"",contentRatingImg:this.getAppContentRatingImg(),description:this.getAppLongDescription(),downloads:this.getAppDownloadCount(),icon:null!==(t=this.appIcon)&&void 0!==t?t:"",isRatingGreaterThanMinimum:this.getAppRating()>=4,minimumAppRating:4,name:this.getAppName(),price:"",rating:this.getAppRating(),ratingCount:this.getAppRatingCount(),screenshots:i_(this.appScreenShots,this.errorLoggingReportingService)}}constructor({ctaButtonUrl:e,ctaButtonText:t,ctaButtonTextEncoded:n,ctaButtonDelay:i,appName:r,appIcon:a,appDescription:o,appRatingCount:s,appLongDescription:l,appContentRating:d,appScreenShots:c,appDownloadCount:u,appRating:E,appStoreRating:v,appStoreId:_,appNameEncoded:h,appDescriptionEncoded:T,appLongDescriptionEncoded:S,errorLoggingReportingService:p=iv()}){this.ctaButtonUrl=e,this.ctaButtonText=t,this.ctaButtonTextEncoded=n,this.ctaButtonDelay=i,this.appName=r,this.appIcon=a,this.appDescription=o,this.appRatingCount=s,this.appLongDescription=l,this.appContentRating=d,this.appScreenShots=c,this.appDownloadCount=u,this.appRating=E,this.appStoreRating=v,this.appStoreId=_,this.appNameEncoded=h,this.appDescriptionEncoded=T,this.appLongDescriptionEncoded=S,this.errorLoggingReportingService=p}};const iT=(e,t=y(),n=j())=>({appNameEncoded:t.get(L.APP_NAME_ENCODED),appStoreId:t.get(L.APP_STORE_ID),ctaButtonDelay:t.get(L.DOWNLOAD_BUTTON_DELAY_SECONDS),ctaButtonText:t.get(L.CTA_BUTTON_TEXT),ctaButtonTextEncoded:t.get(L.CTA_BUTTON_ENCODED_TEXT),ctaButtonUrl:t.get(L.CTA_BUTTON_URL),ctaTarget:eM.SKPV,enabled:!1,endcardCloseButtonDelaySeconds:t.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),fullCtaOptionTokenValue:t.get(L.FULL_CTA_OPTION),fullCtaTokenValue:t.get(L.FULL_CTA),hasEndcard:t.has(L.EC_HTML)||t.has(L.EC_IMAGE),hasVideo:t.has(L.MAIN_VIDEO)||t.has(L.MAIN_STREAM),icon:t.get(L.APP_ICON),id:e,isFullscreen:n.isFullscreen(),name:t.get(L.APP_NAME),showECCloseButtonCountDownTokenValue:t.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),skCtaOnlyTokenValue:t.get(L.SK_CTA_ONLY),skFscTokenValue:t.get(L.SK_FSC),staticEndcardCloseButtonDelaySeconds:t.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS)});var iS=class extends ih{getCloseDelay(){let e=this.hasVideo&&!this.hasEndcard,t=3;return e&&this.endcardCloseButtonDelaySeconds?t=Number(this.endcardCloseButtonDelaySeconds):this.staticEndcardCloseButtonDelaySeconds&&(t=Number(this.staticEndcardCloseButtonDelaySeconds)),Math.min(Math.max(t,1),e?6:30)}getCountDown(){return!this.showECCloseButtonCountDownTokenValue||"true"===this.showECCloseButtonCountDownTokenValue}getLastChanceEndcardConfig(){var e;return{enabled:this.isFullscreen&&this.enabled,id:this.id,appMeta:this.getAppMetaData(),cta:{text:this.getCtaButtonText(),url:this.ctaButtonUrl||"",isPersistent:!1,target:n8(this.skCtaOnlyTokenValue),delay:parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"4",10)},fsc:{enabled:q(this.fullCtaTokenValue)&&"fsc_off"!==this.fullCtaOptionTokenValue,ctaUrl:this.ctaButtonUrl,target:n8(this.skFscTokenValue)},close:{delay:this.getCloseDelay(),style:nW.CLOSE,countdown:this.getCountDown()}}}setLastChanceEndcardConfig(){}constructor({appNameEncoded:e,appStoreId:t,ctaButtonDelay:n,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonUrl:a,ctaTarget:o,enabled:s=!1,endcardCloseButtonDelaySeconds:l,fullCtaOptionTokenValue:d,fullCtaTokenValue:c,hasEndcard:u,hasVideo:E,icon:v,id:_,isFullscreen:h,name:T,showECCloseButtonCountDownTokenValue:S,skCtaOnlyTokenValue:p,skFscTokenValue:g,staticEndcardCloseButtonDelaySeconds:C},I){super({ctaButtonUrl:a,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonDelay:n,appName:T,appIcon:v,appStoreId:t,appNameEncoded:e,errorLoggingReportingService:I}),this.appNameEncoded=e,this.appStoreId=t,this.ctaButtonDelay=n,this.ctaButtonText=i,this.ctaButtonTextEncoded=r,this.ctaButtonUrl=a,this.ctaTarget=null!=o?o:eM.SKPV,this.enabled=s,this.endcardCloseButtonDelaySeconds=l,this.fullCtaOptionTokenValue=d,this.fullCtaTokenValue=c,this.hasEndcard=!!u,this.hasVideo=!!E,this.icon=v,this.id=_,this.isFullscreen=!!h,this.appName=T,this.showECCloseButtonCountDownTokenValue=S,this.skCtaOnlyTokenValue=p,this.skFscTokenValue=g,this.staticEndcardCloseButtonDelaySeconds=C}},ip=class{getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({ecCloseButtonDelaySecondsTokenValue:e,staticEcCloseButtonDelaySecondsTokenValue:t,endcardCloseButtonAsSkipTokenValue:n,showECCloseButtonCountDownTokenValue:i,isSecondEndcard:r}){this.getDelay=()=>{let e=0;return this.isSecondEndcard&&this.staticEcCloseButtonDelaySecondsTokenValue?e=Number(this.staticEcCloseButtonDelaySecondsTokenValue):this.ecCloseButtonDelaySecondsTokenValue&&(e=Number(this.ecCloseButtonDelaySecondsTokenValue)),e},this.getStyle=()=>this.isSecondEndcard?nW.CLOSE:q(this.endcardCloseButtonAsSkipTokenValue)?nW.SKIP:nW.CLOSE,this.getCountDown=()=>!this.showECCloseButtonCountDownTokenValue||q(this.showECCloseButtonCountDownTokenValue),this.ecCloseButtonDelaySecondsTokenValue=e,this.staticEcCloseButtonDelaySecondsTokenValue=t,this.endcardCloseButtonAsSkipTokenValue=n,this.showECCloseButtonCountDownTokenValue=i,this.isSecondEndcard=r}},ig=class{getTrackingEventMapConfig(){return{enabled:this.enabled,events:this.events}}constructor(e,t){this.enabled=e,this.events=t}},iC=class extends ih{getCallToActionConfig(){return{url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay(),target:n8(this.skEcCtaOnlyTokenValue)}}constructor({skEcCtaOnlyTokenValue:e,appMetaProviderParams:t}){super(t),this.skEcCtaOnlyTokenValue=e}};(vE=_P||(_P={})).ON_CREATIVE_VIEW="onCreativeView",vE.DESTROY_IFRAME="destroyIframe",vE.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS="flushMraidEventsProxyCallbacks",vE.INIT_CHECKPOINTS="initCheckpoints",vE.INIT_OMSDK_HTML_DISPLAY_SERVICE="initOmsdkHtmlDisplayService",vE.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW="closeWillAppear",vE.ON_SHOW="onShow";var iI=_P;class iO extends nd{getId(){return"closed"}static getInstances(){let e=j();return e.isBanner()||e.isMrec()||e.isInLine()?[]:[new iO]}getSceneType(){return eV.closed}constructor(){super(),this.addEntryAction({name:_D.ENSURE_REWARD_GRANTED}),this.addEntryAction({name:iI.DESTROY_IFRAME}),this.getEntryActions().some((e=>e.name===_D.CLOSE_AD))||this.addEntryAction({name:_D.CLOSE_AD}),this.addTransition(d({},nz)),this.addTransition(d({},nJ))}}var iA=(e=y(),t=j())=>!!t.isMrec()||q(e.get(L.START_MUTED))||q(e.get(L.REAL_START_MUTED)),im=class{subscribe(e){let t,n=()=>{t&&t.unsubscribe(),this.isUnsubscribed||(this.isUnsubscribed=!0)};return t=this.subscribeFn({next:t=>{this.isUnsubscribed||e.next(t)},error:t=>{var i;this.isUnsubscribed||(null===(i=e.error)||void 0===i||i.call(e,t),n())},complete:()=>{var t;this.isUnsubscribed||(null===(t=e.complete)||void 0===t||t.call(e),n())}}),{unsubscribe:n}}pipe(...e){return e.reduce(((e,t)=>t(e)),this)}constructor(e){this.isUnsubscribed=!1,this.subscribeFn=e}},iN=function(e){return t=>new im((n=>t.subscribe({next:t=>{e(t)&&n.next(t)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})))},iD=(e,t)=>new im((n=>{let i=(e,t)=>n.next(t);return e.addEventHandler(t,i),{unsubscribe:()=>{e.removeEventHandler(t,i)}}})),iR=(e,t,n)=>iD(e,"error-logging").pipe(iN((e=>e.event===t&&(!n||e.data.resourceType===n)))),iy=function(){return e=>new im((t=>{let n=0,i=e.subscribe({next:()=>{n+=1,t.next(n)},error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},complete:()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)}});return{unsubscribe:()=>i.unsubscribe()}}))},iL=function(e){return t=>new im((n=>{let i=null,r=t.subscribe({next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return i=e.subscribe({next:()=>{var e;null===(e=n.complete)||void 0===e||e.call(n),r.unsubscribe(),null==i||i.unsubscribe()}}),{unsubscribe:()=>{r.unsubscribe(),i.unsubscribe()}}}))},iP=(e,t)=>iD(e,"scene-event").pipe(iN((e=>e.event===t)));(vv=_w||(_w={})).CLICK="CLICK",vv.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",vv.CLOSE_BUTTON_SHOW="CLOSE_BUTTON_SHOW",vv.CTA_BUTTON_CLICK="CTA_BUTTON_CLICK",vv.CTA_BUTTON_SHOW="CTA_BUTTON_SHOW",vv.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",vv.LAST_CHANCE_ENDCARD_OPEN="LAST_CHANCE_ENDCARD_OPEN",vv.LOAD_COMPLETE="LOAD_COMPLETE",vv.LOAD_START="LOAD_START",vv.NEAR_CLOSE_BUTTON_CLICK="NEAR_CLOSE_BUTTON_CLICK",vv.PRELOAD_CANCELLED="PRELOAD_CANCELLED",vv.PRELOAD_COMPLETE="PRELOAD_COMPLETE",vv.PRELOAD_START="PRELOAD_START",vv.SCENE_END="SCENE_END",vv.SCENE_START="SCENE_START";var iw=_w,ib=(e,t)=>new im((n=>{let i=null,r=null,a=null;return r=e.subscribe({next:()=>{i=Date.now()}}),a=t.subscribe({next:()=>{var e;null!=i&&(n.next(Date.now()-i),null==r||r.unsubscribe(),null==a||a.unsubscribe(),null===(e=n.complete)||void 0===e||e.call(n))}}),{unsubscribe:()=>{null==r||r.unsubscribe(),null==a||a.unsubscribe()}}})),iV=function(e){return t=>new im((n=>{let i=e,r=t.subscribe({next:e=>{var t;i>0&&(n.next(e),i-=1),0===i&&(null===(t=n.complete)||void 0===t||t.call(n))},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},iM=(e,t,n)=>new im((i=>{let r=ib(e,t).subscribe({next:e=>{var t;i.next(e),null===(t=i.complete)||void 0===t||t.call(i)}}),a=n.subscribe({next:()=>{var e;i.next(0),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe(),a.unsubscribe()}}})),ik=(e,t,n)=>new im((i=>{let r=0,a=null,o=t.subscribe({next:()=>{var e;i.next(r),null===(e=i.complete)||void 0===e||e.call(i),null==a||a.unsubscribe(),o.unsubscribe()}}),s=e.subscribe({next:()=>{a=n.subscribe({next:()=>{r+=1},error:e=>{var t;return null===(t=i.error)||void 0===t?void 0:t.call(i,e)}})}});return{unsubscribe:()=>{null==a||a.unsubscribe(),s.unsubscribe()}}})),iU=function(e){return t=>new im((n=>{let i={next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}};t.subscribe({next:t=>{e(t).subscribe(i)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)}})}))},iB=function(e){return t=>new im((n=>{let i=0;return t.subscribe({next:t=>{try{let r=e(t,i);n.next(r),i+=1}catch(e){var r;null===(r=n.error)||void 0===r||r.call(n,e)}},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})}))},iH=function(e){return t=>new im((n=>{let i=!1,r=t.subscribe({next:e=>{i=!0,n.next(e)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var t;i||n.next(e),null===(t=n.complete)||void 0===t||t.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},iW=e=>iP(e,iw.CLOSE_BUTTON_SHOW).pipe(iU((()=>iP(e,iw.CLICK).pipe(iB((()=>!0))))),iL(iP(e,iw.SCENE_END)),iH(!1)),ix=(e,t)=>iP(e,iw.CLICK).pipe(iL(t),iy(),iH(0)),iF=e=>iM(iP(e,iw.LAST_CHANCE_ENDCARD_OPEN),iP(e,iw.LAST_CHANCE_ENDCARD_CLOSE),iP(e,iw.SCENE_END)),iG=(...e)=>new im((t=>{let n=[],i=()=>{n.forEach((e=>e()))},r=e=>{var n;t.next(e),null===(n=t.complete)||void 0===n||n.call(t),i()},a=e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},o=()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)};e.forEach((e=>{let{unsubscribe:t}=e.subscribe({next:r,error:a,complete:o});n.push(t)}))})),iK=e=>iG(iP(e,iw.SCENE_END).pipe(iB((()=>!1))),iP(e,iw.LAST_CHANCE_ENDCARD_OPEN).pipe(iU((()=>ix(e,iP(e,iw.LAST_CHANCE_ENDCARD_CLOSE)))),iB((e=>e>0)),iH(!1))),iY=e=>ik(iP(e,iw.SCENE_START),iG(iP(e,iw.CLOSE_BUTTON_SHOW),iP(e,iw.SCENE_END)),iP(e,iw.NEAR_CLOSE_BUTTON_CLICK));const ij=e=>"scene-event"===e.type&&null!=e.event;var iX=class extends el{emit(e){let t=this.getReportableEvent(e);t&&this.wrappedService.emit(t)}getEventCount(e){let t=this.getReportableEvent(e);return t?this.wrappedService.getActivityEvents().filter((e=>"event"===e.activity.type&&"scene-event"===e.activity.eventType&&e.activity.name===t.event&&(""===t.data.scene_id||e.activity.data.scene_id===t.data.scene_id)&&e.activity.data.scene_type===t.data.scene_type)).length:0}getReportableEvent(e){if(ij(e))return e;let t=this.injectedGetCurrentScene();return t?{type:"scene-event",event:e,data:{scene_id:t.getId(),scene_type:t.getSceneType()}}:void 0}constructor(e,t=$){super(e),this.injectedGetCurrentScene=t}},iz=(e,t=$)=>new iX(null!=e?e:es(),t),i$=(e=nf(),t=!1)=>{let n=iz(e),i=ib(iP(n,iw.SCENE_START),iP(n,iw.SCENE_END)),r=iP(n,iw.CLICK).pipe(iV(1)),a=iM(iP(n,iw.SCENE_START),r,iP(n,iw.SCENE_END)),o=ik(iP(n,iw.CLOSE_BUTTON_SHOW).pipe(iV(1)),iP(n,iw.SCENE_END),iP(n,iw.NEAR_CLOSE_BUTTON_CLICK)),s=iM(iP(n,iw.CLOSE_BUTTON_SHOW),iP(n,iw.CLOSE_BUTTON_CLICK),iP(n,iw.SCENE_END)),l=iW(n),d={click_count:ix(n,iP(n,iw.SCENE_END)),close_button_idle_time:s,duration:i,first_click:a,interaction_after_close_button_visible:l,near_click_count_after_close_button_appears:o,near_click_count_before_close_button_appears:iY(n)};return t&&(d.last_chance_endcard_duration=iF(n),d.last_chance_endcard_clicked=iK(n)),d},iZ=(e,t)=>iD(e,"video").pipe(iN((e=>e.event===t)));(v_=_b||(_b={})).BANDWIDTH_ESTIMATION="bandwidthEstimation",v_.CAN_PLAY_THROUGH="canplaythrough",v_.CLOSE="close",v_.DURATION_CHANGE="durationchange",v_.ENDED="ended",v_.ERROR="error",v_.HLS_LEVEL_PLAYLIST_LOADED="hlsLevelPlaylistLoaded",v_.MUTE="mute",v_.PAUSE="pause",v_.PLAY="play",v_.PROGRESS="progress",v_.SUSPEND="suspend",v_.TIME_UPDATE="timeupdate",v_.UNMUTE="unmute",v_.WAITING="waiting";var iq=_b,iQ=(e,t)=>{let n=Number(t.incentivizedCloseButtonDelaySeconds);return!t.isIncentiveTiedToCloseButtonDelay||Number.isNaN(n)||n>e?.8*e:.8*n};(vh=_V||(_V={})).PROGRESS="progress",vh.VIDEO_LENGTH="videoLength",vh.VIDEO_REACHED_DURATION="videoReachedDuration";var iJ=_V,i0=(e,t)=>0===t?0:t-e<=.5?4:Math.floor(e/t*4);const i1=()=>es(),i2=()=>es(),i3=()=>es(),i5=(e,t,n)=>{R().getMraidBridgeExt()&&t>0&&e>0&&i2().emit({type:"videoViewed",event:iJ.VIDEO_LENGTH,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},i4=(e,t,n)=>{let i=i0(e,t),r=i2();4===i&&r.emit({type:"videoViewed",event:iJ.VIDEO_REACHED_DURATION,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},i6=(e,t,n)=>{let i=i2();i.getActivityEvents().some((e=>e.activity.name===iJ.PROGRESS&&e.activity.data.seconds>=n))||i.emit({type:"videoViewed",event:iJ.PROGRESS,data:{currentTime:e,duration:t,seconds:n}}),i5(e,t,n),i4(e,t,n)};var i8=(e,t,n=R(),i=ii())=>{var r,a,o,s;let l=n.getMraidBridgeExt();if(!l)return;let d=Math.floor(1e3*Math.max(null!==(o=null===(r=t.data)||void 0===r?void 0:r.currentTime)&&void 0!==o?o:0,.1)),c=Math.floor(1e3*(null!==(s=null===(a=t.data)||void 0===a?void 0:a.duration)&&void 0!==s?s:0));switch(t.event){case iJ.PROGRESS:l.notifyEventValuePairEvent("videoViewed",d);break;case iJ.VIDEO_REACHED_DURATION:l.notifyEventValuePairEvent("videoViewed",c);break;case iJ.VIDEO_LENGTH:l.notifyEventValuePairEvent("videoLength",c),i.emit(n9.VIDEO_LENGTH,!0)}};const i7=[{currentTime:.1,timeout:0},{currentTime:2,timeout:2e3},{currentTime:3,timeout:1e3},{currentTime:4,timeout:1e3},{currentTime:5,timeout:1e3}],i9=(e,t)=>[n9.CHECKPOINT_0,n9.CHECKPOINT_25,n9.CHECKPOINT_50,n9.CHECKPOINT_75,n9.CHECKPOINT_100][Math.floor(e/t*4)],re=(e,t=nE(),n=ii())=>{let i=i7[e],r=i7.length-1;t.getNewTimer(i.timeout,(()=>{n.emit(i9(i.currentTime,5),!0,{currentTime:i.currentTime,duration:5}),i6(i.currentTime,5,Math.round(i.currentTime)),e!==r&&re(e+1)})).start()};var rt=(e,t)=>iD(e,"incentivized-event").pipe(iN((e=>e.event===t))),rn=e=>new im((t=>{let n=()=>{var e;t.next(nx.FORFEIT_REWARD),null===(e=t.complete)||void 0===e||e.call(t)};rt(e,nx.FORFEIT_REWARD).subscribe({next:n,error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)}}),e.hasExistingEvent({type:"incentivized-event",event:nx.FORFEIT_REWARD})&&n()})),ri=e=>new im((t=>{var n;e.hasExistingEvent({type:"incentivized-event",event:nx.GRANT_REWARD})&&(t.next(nx.FORFEIT_REWARD),null===(n=t.complete)||void 0===n||n.call(t))})),rr=(e,t,n)=>new im((i=>{let r=t.getNewTimer(e,(()=>{var e;i.next(n),null===(e=i.complete)||void 0===e||e.call(i)}));return r.start(),{unsubscribe:()=>{r.destroy()}}})),ra=(e,t,n=nf(),i=nE())=>new im((r=>{let a=(e===eV.video?iZ(n,iq.PLAY).pipe(iV(1),iU((e=>{var r;return iG(rr(1e3*iQ(null===(r=e.data)||void 0===r?void 0:r.duration,t),i,nx.GRANT_REWARD),iP(n,iw.SCENE_END).pipe(iB((()=>nx.FORFEIT_REWARD))),rn(n),ri(n))}))):iP(n,iw.SCENE_START).pipe(iU((()=>iG(rr(1e3*iQ(5,t),i,nx.GRANT_REWARD),iP(n,iw.SCENE_END).pipe(iB((()=>nx.FORFEIT_REWARD))),rn(n),ri(n)))))).subscribe({next:e=>{var t;e===nx.GRANT_REWARD&&n.emit({type:"incentivized-event",event:nx.GRANT_REWARD,fireOnlyOnce:!0}),null===(t=r.complete)||void 0===t||t.call(r)},error:e=>{var t;return null===(t=r.error)||void 0===t?void 0:t.call(r,e)}});return{unsubscribe:()=>{a.unsubscribe()}}}));(vT=_M||(_M={}))[vT.NOT_ENABLED=0]="NOT_ENABLED",vT[vT.CANCELLED=-1]="CANCELLED";var ro=e=>{let t=null,n=iP(e,iw.PRELOAD_START),i=iP(e,iw.PRELOAD_COMPLETE),r=iP(e,iw.PRELOAD_CANCELLED),a=iP(e,iw.SCENE_END);return new im((e=>{let o=n.subscribe({next:()=>{t=Date.now()}}),s=i.subscribe({next:()=>{var n;null!==t&&(e.next(Date.now()-t),null===(n=e.complete)||void 0===n||n.call(e))}}),l=()=>{var n;e.next(null!=t?-1*(Date.now()-t):0),null===(n=e.complete)||void 0===n||n.call(e)},d=r.subscribe({next:l}),c=a.subscribe({next:l});return{unsubscribe:()=>{o.unsubscribe(),s.unsubscribe(),d.unsubscribe(),c.unsubscribe()}}}))};(vS=_k||(_k={})).NESTED_IFRAME_WITH_CORS="cors",vS.NESTED_IFRAME_WITHOUT_CORS="basic";var rs=()=>es();(_U||(_U={})).NESTED_IFRAME_TYPE="NESTED_IFRAME_TYPE";var rl=_U,rd=(e=$,t=rs())=>{let n=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"iframe"===t.activity.eventType&&t.activity.name===rl.NESTED_IFRAME_TYPE&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).map((e=>{var t;return null===(t=e.activity.data)||void 0===t?void 0:t.nested_iframe_type}));return n.includes(_k.NESTED_IFRAME_WITH_CORS)?_k.NESTED_IFRAME_WITH_CORS:n.includes(_k.NESTED_IFRAME_WITHOUT_CORS)?_k.NESTED_IFRAME_WITHOUT_CORS:""},rc=(e,t,n=$)=>new im((i=>{let r=iP(e,iw.SCENE_END).subscribe({next:()=>{var e;i.next(rd(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),ru=(e,t=!1,n=nf(),i=nE())=>{let r=iz(n),a=iR(n,iE.PLAYABLE).pipe(iy()).pipe(iL(iP(r,iw.SCENE_END))),o=iM(iP(r,iw.LOAD_START),iP(r,iw.LOAD_COMPLETE),iP(r,iw.SCENE_END)),s=C(d({},i$(n,t)),{error_count:a,iframe_type:rc(r,n),load_duration:o,preload_duration:ro(r)});return e.enabled&&(s.grant_reward=ra(eV.endcard,e,n,i)),s},rE=(e,t)=>({ctaButtonUrl:e.get(L.CTA_BUTTON_URL),ctaButtonText:e.get(L.CTA_BUTTON_TEXT),ctaButtonTextEncoded:e.get(L.CTA_BUTTON_ENCODED_TEXT),ctaButtonDelay:e.get(L.DOWNLOAD_BUTTON_DELAY_SECONDS),appName:e.get(L.APP_NAME),appIcon:e.get(L.APP_ICON),appDescription:e.get(L.APP_DESCRIPTION),appRatingCount:e.get(L.APP_RATING_COUNT),appLongDescription:e.get(L.APP_LONG_DESCRIPTION),appContentRating:e.get(L.APP_CONTENT_RATING),appScreenShots:e.get(L.APP_SCREENSHOTS),appDownloadCount:e.get(L.APP_DOWNLOAD_COUNT),appRating:e.get(L.APP_RATING),appStoreRating:e.get(L.APP_STORE_RATING),appStoreId:e.get(L.APP_STORE_ID),appNameEncoded:e.get(L.APP_NAME_ENCODED),appDescriptionEncoded:e.get(L.APP_DESCRIPTION_ENCODED),appLongDescriptionEncoded:e.get(L.APP_LONG_DESCRIPTION_ENCODED),errorLoggingReportingService:t}),rv=class{getIncentivizedConfig(){return{enabled:this.enabled,incentivizedCloseButtonDelaySeconds:this.incentivizedCloseButtonDelaySeconds,isIncentiveTiedToCloseButtonDelay:this.isIncentiveTiedToCloseButtonDelay}}constructor({enabled:e=!1,incentivizedCloseButtonDelaySeconds:t,isIncentiveTiedToCloseButtonDelay:n=!1}){this.enabled=e,this.incentivizedCloseButtonDelaySeconds=t,this.isIncentiveTiedToCloseButtonDelay=n}},r_={},rh=function(e,t,n,i,r){var a=new Worker(r_[t]||(r_[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var i=Error(n[0]);i.code=n[1],i.stack=n[2],r(i,null)}else r(null,t)},a.postMessage(n,i),a},rT=Uint8Array,rS=Uint16Array,rp=Int32Array,rg=new rT([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rC=new rT([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rI=new rT([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rO=function(e,t){for(var n=new rS(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new rp(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r:r}},rA=rO(rg,2),rm=rA.b,rf=rA.r;rm[28]=258,rf[258]=28;for(var rN=rO(rC,0),rD=rN.b,rR=rN.r,ry=new rS(32768),rL=0;rL<32768;++rL){var rP=(43690&rL)>>1|(21845&rL)<<1;rP=(61680&(rP=(52428&rP)>>2|(13107&rP)<<2))>>4|(3855&rP)<<4,ry[rL]=((65280&rP)>>8|(255&rP)<<8)>>1}var rw=function(e,t,n){for(var i,r=e.length,a=0,o=new rS(t);a<r;++a)e[a]&&++o[e[a]-1];var s=new rS(t);for(a=1;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){i=new rS(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var d=a<<4|e[a],c=t-e[a],u=s[e[a]-1]++<<c,E=u|(1<<c)-1;u<=E;++u)i[ry[u]>>l]=d}else for(a=0,i=new rS(r);a<r;++a)e[a]&&(i[a]=ry[s[e[a]-1]++]>>15-e[a]);return i},rb=new rT(288);for(rL=0;rL<144;++rL)rb[rL]=8;for(rL=144;rL<256;++rL)rb[rL]=9;for(rL=256;rL<280;++rL)rb[rL]=7;for(rL=280;rL<288;++rL)rb[rL]=8;var rV=new rT(32);for(rL=0;rL<32;++rL)rV[rL]=5;var rM=rw(rb,9,0),rk=rw(rb,9,1),rU=rw(rV,5,0),rB=rw(rV,5,1),rH=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},rW=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},rx=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},rF=function(e){return(e+7)/8|0},rG=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new rT(e.subarray(t,n))},rK=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rY=function(e,t,n){var i=Error(t||rK[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,rY),!n)throw i;return i},rj=function(e,t,n,i){var r=e.length,a=i?i.length:0;if(!r||t.f&&!t.l)return n||new rT(0);var o=!n,s=o||2!=t.i,l=t.i;o&&(n=new rT(3*r));var d=function(e){var t=n.length;if(e>t){var i=new rT(Math.max(2*t,e));i.set(n),n=i}},c=t.f||0,u=t.p||0,E=t.b||0,v=t.l,_=t.d,h=t.m,T=t.n,S=8*r;do{if(!v){c=rW(e,u,1);var p=rW(e,u+1,3);if(u+=3,!p){var g=e[(D=rF(u)+4)-4]|e[D-3]<<8,C=D+g;if(C>r){l&&rY(0);break}s&&d(E+g),n.set(e.subarray(D,C),E),t.b=E+=g,t.p=u=8*C,t.f=c;continue}if(1==p)v=rk,_=rB,h=9,T=5;else if(2==p){var I=rW(e,u,31)+257,O=rW(e,u+10,15)+4,A=I+rW(e,u+5,31)+1;u+=14;for(var f=new rT(A),m=new rT(19),N=0;N<O;++N)m[rI[N]]=rW(e,u+3*N,7);u+=3*O;var L=rH(m),R=(1<<L)-1,y=rw(m,L,1);for(N=0;N<A;){var D,P=y[rW(e,u,R)];if(u+=15&P,(D=P>>4)<16)f[N++]=D;else{var w=0,V=0;for(16==D?(V=3+rW(e,u,3),u+=2,w=f[N-1]):17==D?(V=3+rW(e,u,7),u+=3):18==D&&(V=11+rW(e,u,127),u+=7);V--;)f[N++]=w}}var b=f.subarray(0,I),M=f.subarray(I);h=rH(b),T=rH(M),v=rw(b,h,1),_=rw(M,T,1)}else rY(1);if(u>S){l&&rY(0);break}}s&&d(E+131072);for(var k=(1<<h)-1,U=(1<<T)-1,B=u;;B=u){var H=(w=v[rx(e,u)&k])>>4;if((u+=15&w)>S){l&&rY(0);break}if(w||rY(2),H<256)n[E++]=H;else{if(256==H){B=u,v=null;break}var W=H-254;if(H>264){var x=rg[N=H-257];W=rW(e,u,(1<<x)-1)+rm[N],u+=x}var F=_[rx(e,u)&U],Y=F>>4;F||rY(3),u+=15&F;M=rD[Y];if(Y>3){x=rC[Y];M+=rx(e,u)&(1<<x)-1,u+=x}if(u>S){l&&rY(0);break}s&&d(E+131072);var K=E+W;if(E<M){var G=a-M,j=Math.min(M,K);for(G+E<0&&rY(3);E<j;++E)n[E]=i[G+E]}for(;E<K;++E)n[E]=n[E-M]}}t.l=v,t.p=B,t.b=E,t.f=c,v&&(c=1,t.m=h,t.d=_,t.n=T)}while(!c);return E!=n.length&&o?rG(n,0,E):n.subarray(0,E)},rX=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},rz=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},r$=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,a=n.slice();if(!r)return{t:r2,l:0};if(1==r){var o=new rT(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],d=0,c=1,u=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=r-1;)s=n[n[d].f<n[u].f?d++:u++],l=n[d!=c&&n[d].f<n[u].f?d++:u++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};var E=a[0].s;for(i=1;i<r;++i)a[i].s>E&&(E=a[i].s);var v=new rS(E+1),_=rZ(n[c-1],v,0);if(_>t){i=0;var h=0,T=_-t,S=1<<T;for(a.sort((function(e,t){return v[t.s]-v[e.s]||e.f-t.f}));i<r;++i){var p=a[i].s;if(!(v[p]>t))break;h+=S-(1<<_-v[p]),v[p]=t}for(h>>=T;h>0;){var g=a[i].s;v[g]<t?h-=1<<t-v[g]++-1:++i}for(;i>=0&&h;--i){var C=a[i].s;v[C]==t&&(--v[C],++h)}_=t}return{t:new rT(v),l:_}},rZ=function(e,t,n){return-1==e.s?Math.max(rZ(e.l,t,n+1),rZ(e.r,t,n+1)):t[e.s]=n},rq=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new rS(++t),i=0,r=e[0],a=1,o=function(e){n[i++]=e},s=1;s<=t;++s)if(e[s]==r&&s!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(r),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(r);a=1,r=e[s]}return{c:n.subarray(0,i),n:t}},rQ=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},rJ=function(e,t,n){var i=n.length,r=rF(t+2);e[r]=255&i,e[r+1]=i>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var a=0;a<i;++a)e[r+a+4]=n[a];return 8*(r+4+i)},r0=function(e,t,n,i,r,a,o,s,l,d,c){rX(t,c++,n),++r[256];for(var u,E,v,_,h=r$(r,15),T=h.t,S=h.l,p=r$(a,15),g=p.t,C=p.l,I=rq(T),O=I.c,A=I.n,f=rq(g),m=f.c,N=f.n,L=new rS(19),R=0;R<O.length;++R)++L[31&O[R]];for(R=0;R<m.length;++R)++L[31&m[R]];for(var y=r$(L,7),D=y.t,P=y.l,w=19;w>4&&!D[rI[w-1]];--w);var V=d+5<<3,b=rQ(r,rb)+rQ(a,rV)+o,M=rQ(r,T)+rQ(a,g)+o+14+3*w+rQ(L,D)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&V<=b&&V<=M)return rJ(t,c,e.subarray(l,l+d));if(rX(t,c,1+(M<b)),c+=2,M<b){u=rw(T,S,0),E=T,v=rw(g,C,0),_=g;var k=rw(D,P,0);rX(t,c,A-257),rX(t,c+5,N-1),rX(t,c+10,w-4),c+=14;for(R=0;R<w;++R)rX(t,c+3*R,D[rI[R]]);c+=3*w;for(var U=[O,m],B=0;B<2;++B){var H=U[B];for(R=0;R<H.length;++R){var W=31&H[R];rX(t,c,k[W]),c+=D[W],W>15&&(rX(t,c,H[R]>>5&127),c+=H[R]>>12)}}}else u=rM,E=rb,v=rU,_=rV;for(R=0;R<s;++R){var x=i[R];if(x>255){rz(t,c,u[(W=x>>18&31)+257]),c+=E[W+257],W>7&&(rX(t,c,x>>23&31),c+=rg[W]);var F=31&x;rz(t,c,v[F]),c+=_[F],F>3&&(rz(t,c,x>>5&8191),c+=rC[F])}else rz(t,c,u[x]),c+=E[x]}return rz(t,c,u[256]),c+E[256]},r1=new rp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),r2=new rT(0),r3=function(e,t,n,i,r,a){var o=a.z||e.length,s=new rT(i+o+5*(1+Math.ceil(o/7e3))+r),l=s.subarray(i,s.length-r),d=a.l,c=7&(a.r||0);if(t){c&&(l[0]=a.r>>3);for(var u=r1[t-1],E=u>>13,v=8191&u,_=(1<<n)-1,h=a.p||new rS(32768),T=a.h||new rS(_+1),S=Math.ceil(n/3),p=2*S,g=function(t){return(e[t]^e[t+1]<<S^e[t+2]<<p)&_},C=new rp(25e3),I=new rS(288),O=new rS(32),A=0,f=0,m=a.i||0,N=0,L=a.w||0,R=0;m+2<o;++m){var y=g(m),D=32767&m,P=T[y];if(h[D]=P,T[y]=D,L<=m){var w=o-m;if((A>7e3||N>24576)&&(w>423||!d)){c=r0(e,l,0,C,I,O,f,N,R,m-R,c),N=A=f=0,R=m;for(var V=0;V<286;++V)I[V]=0;for(V=0;V<30;++V)O[V]=0}var b=2,M=0,k=v,U=D-P&32767;if(w>2&&y==g(m-U))for(var B=Math.min(E,w)-1,H=Math.min(32767,m),W=Math.min(258,w);U<=H&&--k&&D!=P;){if(e[m+b]==e[m+b-U]){for(var x=0;x<W&&e[m+x]==e[m+x-U];++x);if(x>b){if(b=x,M=U,x>B)break;var F=Math.min(U,x-2),Y=0;for(V=0;V<F;++V){var K=m-U+V&32767,G=K-h[K]&32767;G>Y&&(Y=G,P=K)}}}P=h[D=P],U+=D-P&32767}if(M){C[N++]=268435456|rf[b]<<18|rR[M];var j=31&rf[b],Q=31&rR[M];f+=rg[j]+rC[Q],++I[257+j],++O[Q],L=m+b,++A}else C[N++]=e[m],++I[e[m]]}}for(m=Math.max(m,L);m<o;++m)C[N++]=e[m],++I[e[m]];c=r0(e,l,d,C,I,O,f,N,R,m-R,c),d||(a.r=7&c|l[c/8|0]<<3,c-=7,a.h=T,a.p=h,a.i=m,a.w=L)}else{for(m=a.w||0;m<o+d;m+=65535){var X=m+65535;X>=o&&(l[c/8|0]=d,X=o),c=rJ(l,c+1,e.subarray(m,X))}a.i=o}return rG(s,0,i+rF(c)+r)},r5=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new rT(a.length+e.length);o.set(a),o.set(e,a.length),e=o,r.w=a.length}return r3(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,i,r)},r4=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},r6=function(e,t,n){for(var i=e(),r=e.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<i.length;++o){var s=i[o],l=a[o];if("function"==typeof s){t+=";"+l+"=";var d=s.toString();if(s.prototype)if(-1!=d.indexOf("[native code]")){var c=d.indexOf(" ",8)+1;t+=d.slice(c,d.indexOf("(",c))}else for(var u in t+=d,s.prototype)t+=";"+l+".prototype."+u+"="+s.prototype[u].toString();else t+=d}else n[l]=s}return t},r8=[],r7=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},r9=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&rY(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},ae=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},at="undefined"!=typeof TextDecoder&&new TextDecoder;try{at.decode(r2,{stream:!0})}catch(e){}var an=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return{s:t,r:rG(e,n-1)};t+=r?3==r?String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):1&r?String.fromCharCode((31&i)<<6|63&e[n++]):String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):String.fromCharCode(i)}};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ai=e=>e.replace(/(top\.window\.open|top\.mraid\.open|parent\.window\.open|parent\.mraid\.open)\((.*?)\)/g,"mraid.open($2)"),ar=e=>{let t=/(?:window\.)?(?:top\.|parent\.)?(?:window\.)?(?:location(?:\.href)?)\s*=\s*([^;\n]+?)(\n|;|\s*<\/script>|$)/g;return t.test(e)?e.replace(t,((e,t,n)=>`mraid.open(${t})${n}`)):e},aa=e=>{let t=/<script[^>]*?src=(["'][^"']*?mraid.js[^>]*?["'])[^>]*?>(<\/script>)?/gi;return t.test(e)?e.replace(t,""):e},ao=class extends a{decompress(e){var t,n;let i=atob(e),r=new Uint8Array(i.length);for(let e=0;e<i.length;e+=1)r[e]=i.charCodeAt(e);return function(e){if(at)return at.decode(e);var t=an(e),n=t.s;return t.r.length&&rY(8),n}(((n=r9(r))+8>r.length&&rY(6,"invalid gzip data"),rj(r.subarray(n,-8),{i:2},new rT(ae(r)),t))).toString()}decode(e,t){try{let n;n=t&&this.placementTypeService.isFullscreen()?this.decompress(e):V(e);let i=aa(n),r=ar(i);return ai(r)}catch(e){return this.errorLoggingService.emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:"Failed to decode endcard"}}}),""}}static getServiceIdentifier(){return"HTMLDecoderServiceInterface"}constructor(e=j(),t=iv()){super(),this.placementTypeService=e,this.errorLoggingService=t}},as=()=>{let e=r.getInstance(),t=ao.getServiceIdentifier();return e.get(t)},al=class extends a{getBaseUrl(e){try{return new URL(e).origin}catch(e){return""}}getEndcardContentWithSrcRemoved(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.getElementsByTagName("iframe")[0].removeAttribute("src"),t.documentElement.innerHTML}isValidDimension(e,t){let n=e.getAttribute(t);if(null!==n){if(n.endsWith("%")&&0===parseFloat(n))return!1;let e=parseFloat(n);return!(Number.isNaN(e)||e<=1)}return!0}getNestedIframeContentData(e){try{let t=(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("iframe");if(1!==t.length)return;let n=t[0],i=n.getAttribute("src");if(!(null==i?void 0:i.startsWith("http")))return;let r=n.getAttribute("style");if((null==r?void 0:r.toLowerCase().replace(/\s+/g," ").includes("display: none"))||!this.isValidDimension(n,"width")||!this.isValidDimension(n,"height"))return;return{src:i,baseUrl:this.getBaseUrl(i)}}catch(e){return}}async initializeIframeContentData(e,t){let n={content:e};if(t){let{src:i}=t;n.nestedFrameContent=d({},t);try{let t=await window.fetch(i);if(!t.ok)throw Error("failed to fetch nested iframe content");n.nestedFrameContent.content=await t.text(),n.content=this.getEndcardContentWithSrcRemoved(e)}catch(e){}}return n}static getServiceIdentifier(){return"IframeServiceInterface"}},ad=()=>{let e=r.getInstance(),t=al.getServiceIdentifier();return e.get(t)};const ac=[L.EC_IMAGE,L.EC_IMAGE_2,L.EC_HTML,L.ADM_HTML,L.EC_HTML_2];(vp=_B||(_B={})).BASE64_ENCODED="base64-encoded",vp.GZIP="gzip",vp.NONE="none";class au extends n3{getId(){return this.id}getSceneType(){return this.sceneType}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nW.CLOSE:this.closeButtonConfig.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}getCallToActionConfig(){return this.callToActionConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:ru(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}getHasNestedIframe(){return this.hasNestedFrame}initIframeContentData(){let e=this.iframeService.getNestedIframeContentData(this.endcardContent);this.hasNestedFrame=!!e,this.iframeContentData=this.iframeService.initializeIframeContentData(this.endcardContent,e)}async getIframeContentData(){var e;return null!==(e=this.iframeContentData)&&void 0!==e?e:Promise.resolve({content:this.endcardContent})}getObservabilityData(){return C(d({},super.getObservabilityData()),{has_nested_iframe:this.getHasNestedIframe()})}static getInstances(e=y(),t=j(),n=Y(),i=iv(),r=as(),a=ad()){let o=[L.EC_HTML,L.ADM_HTML,L.EC_HTML_2],s=[],l={[L.EC_HTML]:"endcard",[L.ADM_HTML]:"endcard",[L.EC_HTML_2]:"secondEndcard"},d=q(e.get(L.EC_HTML_PRELOAD));return o.filter((t=>e.has(t))).forEach(((o,c)=>{var u;let E=o===L.ADM_HTML,v=`${l[o]}_${c}`,_=new iS(iT(v,e,t),i);s.push(new au({id:v,endcardContent:r.decode(null!==(u=e.get(o))&&void 0!==u?u:"",q(e.get(L.EC_HTML_COMPRESS))),index:c,isAlternative:!1,compressionType:q(e.get(L.EC_HTML_COMPRESS))?"gzip":"base64-encoded",storeKitOverlayAutoShowConfig:new id(c,this.isEndcardOnly(e),io(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.EC_SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new ic(c,io(e),e.get(L.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:_.getLastChanceEndcardConfig(),omsdkEnabled:E,closeButtonConfig:new ip({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===c}).getCloseButtonConfig(),trackingEventMapConfig:new ig(!1).getTrackingEventMapConfig(),callToActionConfig:new iC({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:rE(e,i)}).getCallToActionConfig(),muted:iA(e,t),eligibleToPreload:d,placementTypeService:t,shouldSplitVideoEndcardClick:q(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new rv({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:a}))})),s}constructor({id:e,endcardContent:t,index:n,isAlternative:i,compressionType:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:o,lastChanceEndcardConfig:s,omsdkEnabled:l,closeButtonConfig:d,trackingEventMapConfig:c,muted:u=!1,eligibleToPreload:E=!1,callToActionConfig:v,placementTypeService:_=j(),shouldSplitVideoEndcardClick:h=!1,eventStreams:T,incentivizedConfig:S,iframeService:p=ad()}){super({isFullscreen:_.isFullscreen()}),this.sceneType=eV.endcard,this.hasNestedFrame=!1,this.id=e,this.endcardContent=t,this.index=n,this.alternative=i,this.compressionType=r,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=o,this.lastChanceEndcardConfig=s,this.omsdkEnabled=l,this.trackingEventMapConfig=c,this.closeButtonConfig=d,this.callToActionConfig=v,this.placementTypeService=_,this.muted=u,this.eligibleToPreload=E,this.shouldSplitVideoEndcardClick=h,this.eventStreams=T,this.incentivizedConfig=S,this.iframeService=p,l&&this.addEntryAction({name:iI.INIT_OMSDK_HTML_DISPLAY_SERVICE}),this.addTransition(n$),this.addTransition(nZ),this.addTransition(nq),this.addTransition(nQ),this.addOrUpdateTransition({name:_l.CLOSE,actions:[],scene:new iO}),this.addExitAction({name:iI.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}),this.addOrUpdateTransition({name:_l.CLOSE_BUTTON_WILL_SHOW,actions:[{name:iI.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW}]}),this.addTransition({name:_l.CREATIVE_VIEW,actions:[{name:iI.ON_CREATIVE_VIEW}]}),this.addEntryAction({name:iI.ON_SHOW})}}au.isEndcardOnly=(e=y())=>{let t=!e.has(L.MAIN_VIDEO)&&!e.has(L.MAIN_STREAM),n=1===ac.filter((t=>e.has(t))).length;return t&&n};var aE=au,av=class{getDelay(){return q(this.incentivizedTokenValue)&&this.incentivizedCloseButtonDelaySecondsTokenValue?Number(this.incentivizedCloseButtonDelaySecondsTokenValue):this.closeButtonDelaySecondsTokenValue?Number(this.closeButtonDelaySecondsTokenValue):0}getCountDown(){return void 0===this.showVideoCloseButtonCountDownTokenValue||q(this.showVideoCloseButtonCountDownTokenValue)}getStyle(){return q(this.videoCloseButtonAsSkipTokenValue)?nW.SKIP:nW.CLOSE}getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({closeButtonDelaySecondsTokenValue:e,incentivizedCloseButtonDelaySecondsTokenValue:t,incentivizedTokenValue:n,videoCloseButtonAsSkipTokenValue:i,showVideoCloseButtonCountDownTokenValue:r}){this.closeButtonDelaySecondsTokenValue=e,this.incentivizedCloseButtonDelaySecondsTokenValue=t,this.incentivizedTokenValue=n,this.videoCloseButtonAsSkipTokenValue=i,this.showVideoCloseButtonCountDownTokenValue=r}},a_=class{getProgressBarConfig(){var e,t;return{show:!this.isBanner&&!il(this.videoProgressBarTokenValue),color:null!==(t=null!==(e=this.videoProgressBarColorTokenValue)&&void 0!==e?e:this.ctaButtonBackgroundTokenValue)&&void 0!==t?t:ea}}constructor({videoProgressBarTokenValue:e,videoProgressBarColorTokenValue:t,ctaButtonBackgroundTokenValue:n,isBanner:i}){this.videoProgressBarTokenValue=e,this.videoProgressBarColorTokenValue=t,this.ctaButtonBackgroundTokenValue=n,this.isBanner=i}};const ah=(e=y(),t=j(),n=iv())=>{let i=rE(e,n);return{appStoreId:io(e),skCtaOnlyTokenValue:e.get(L.SK_CTA_ONLY),blockPersistentCtaTokenValue:e.get(L.BLOCK_PERSISTENT_CTA),appMetaProviderParams:i,placementTypeService:t}};var aT=class extends ih{getCallToActionTarget(){return this.placementTypeService.isBanner()||this.placementTypeService.isMrec()?eM.SKPV:n8(this.skCtaOnlyTokenValue)}isPersistentCtaEnabled(){return(this.placementTypeService.isFullscreen()||this.placementTypeService.isMrec()||this.placementTypeService.isInLine())&&!q(this.blockPersistentCtaTokenValue)}getCallToActionConfig(){return{isPersistent:this.isPersistentCtaEnabled(),target:this.getCallToActionTarget(),url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay()}}constructor({appStoreId:e,skCtaOnlyTokenValue:t,blockPersistentCtaTokenValue:n,appMetaProviderParams:i,placementTypeService:r=j()}){super(i),this.appStoreId=e,this.skCtaOnlyTokenValue=t,this.blockPersistentCtaTokenValue=n,this.placementTypeService=r}},aS=class{getStreamManifest(){var e;if(void 0!==this.mainManifestTokenValue&&""!==this.mainManifestTokenValue)return{manifest:V(this.mainManifestTokenValue),track_0:V(null!==(e=this.track0TokenValue)&&void 0!==e?e:""),chunks:this.chunkSeriesValues}}constructor(e,t,n){this.mainManifestTokenValue=e,this.track0TokenValue=t,this.chunkSeriesValues=n}},ap=function(e){if(null===e||"object"!=typeof e||"function"!=typeof e.getStreamManifest)return!1;let t=e.getStreamManifest();return void 0===t||!(null===t||"object"!=typeof t||void 0!==t.manifest&&"string"!=typeof t.manifest||void 0!==t.track_0&&"string"!=typeof t.track_0||!(void 0===t.chunks||Array.isArray(t.chunks)&&t.chunks.every((e=>"string"==typeof e||null!==e&&"object"==typeof e&&Object.values(e).every((e=>"string"==typeof e))))))};const ag=e=>{if("object"==typeof e)return Object.values(e).some((e=>ag(e)));let t=e.toLowerCase();return!t.startsWith("http://")&&!t.startsWith("https://")};var aC=e=>`file://${window.location.pathname.replace("index.html","")}${e}`,aI=class{getCachedFirstTrack(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!ap(n)||!this.hasCachedFirstTrack())return"";let i=null===(t=n.getStreamManifest())||void 0===t?void 0:t.track_0;return void 0===i?"":i}getCachedManifest(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!ap(n)||!this.hasCachedManifest())return"";let i=null===(t=n.getStreamManifest())||void 0===t?void 0:t.manifest;return void 0===i?"":i}getCachedVideoSegmentUrls(){var e,t,n,i;let r=null===(e=z.getValue())||void 0===e?void 0:e.scene;return ap(r)&&null!==(i=null===(n=r.getStreamManifest())||void 0===n||null===(t=n.chunks)||void 0===t?void 0:t.map((e=>{if(ag(e))if("string"==typeof e){if(!e.toLowerCase().startsWith("file://"))return aC(e)}else if("object"==typeof e)return Object.entries(e).reduce(((e,[t,n])=>(e[t]=n.toLowerCase().startsWith("file://")?n:aC(n),e)),{});return e})))&&void 0!==i?i:[]}hasCachedFirstTrack(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;return!!ap(n)&&!!(null===(t=n.getStreamManifest())||void 0===t?void 0:t.track_0)}hasCachedManifest(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;return!!ap(n)&&!!(null===(t=n.getStreamManifest())||void 0===t?void 0:t.manifest)}hasCachedStreamChunks(){var e,t,n;let i=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!ap(i))return!1;let r=null!==(n=null===(t=i.getStreamManifest())||void 0===t?void 0:t.chunks)&&void 0!==n?n:[];return 0!==r.length&&ag(r[0])}getChunkFormat(){var e,t;let n=null===(e=z.getValue())||void 0===e?void 0:e.scene;if(!ap(n)||!this.hasCachedStreamChunks())return"";let i=(null===(t=n.getStreamManifest())||void 0===t?void 0:t.chunks)[0].split(".");return i.length<2?"":i[i.length-1]}},aO=(e,t)=>{let n=iZ(e,iq.HLS_LEVEL_PLAYLIST_LOADED),i=iP(t,iw.SCENE_END);return new im((e=>{let t=n.subscribe({next:t=>{var n,i;e.next(null===(n=t.data)||void 0===n?void 0:n.startingSequenceNumber),null===(i=e.complete)||void 0===i||i.call(e)}}),r=i.subscribe({next:()=>{var t;e.next(void 0),null===(t=e.complete)||void 0===t||t.call(e)}});return{unsubscribe:()=>{t.unsubscribe(),r.unsubscribe()}}}))},aA=(e=$,t=i1())=>{var n,i,r;return null!==(r=null===(i=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"video"===t.activity.eventType&&t.activity.name===iq.BANDWIDTH_ESTIMATION&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).pop())||void 0===i||null===(n=i.activity.data)||void 0===n?void 0:n.bwe)&&void 0!==r?r:-1},am=(e,t,n=$)=>new im((i=>{let r=iP(e,iw.SCENE_END).subscribe({next:()=>{var e;i.next(aA(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),af=(e,t)=>iD(e,"theatre-mode-event").pipe(iN((e=>e.event===t)));(vg=_H||(_H={})).HIDE_CONTROLS="HIDE_CONTROLS",vg.REVEAL_CONTROLS="REVEAL_CONTROLS",vg.DISABLE_THEATRE_MODE="DISABLE_THEATRE_MODE";var aN=_H,aD=(e,t=!1,n=nf(),i=nE())=>{let r=iz(n),a=iR(n,iE.RESOURCE,_L.VIDEO).pipe(iy()).pipe(iL(iP(r,iw.SCENE_END))),o=iM(iP(r,iw.LOAD_START),iP(r,iw.LOAD_COMPLETE),iP(r,iw.SCENE_END)),s=iM(iP(r,iw.CTA_BUTTON_SHOW),iP(r,iw.CTA_BUTTON_CLICK),iP(r,iw.SCENE_END)),l=C(d({},i$(n,t)),{average_bandwidth:am(r,n),cta_duration:s,error_count:a,hls_staring_sequence_number:aO(n,r),load_duration:o,preload_duration:ro(r)});e.enabled&&(l.grant_reward=ra(eV.video,e,n,i));let c=af(n,aN.HIDE_CONTROLS).pipe(iy());l.hide_controls_count=c.pipe(iL(iP(r,iw.SCENE_END)));let u=af(n,aN.REVEAL_CONTROLS).pipe(iy());return l.reveal_controls_count=u.pipe(iL(iP(r,iw.SCENE_END))),l};(vC=_W||(_W={})).PROGRESSIVE="mp4",vC.HLS="hls";class aR extends n3{getTransitions(){let e=super.getTransitions();return e.push(n5,n4,n6,n$,nZ,nq,nQ,n1,n0),e}getId(){return this.id}getSceneType(){return eV.video}getVideoPlayer(){return"mp4"===this.videoType?"progressive":window.Hls.isSupported()?"custom":"native"}getVideoUrl(){return"mp4"===this.videoType&&void 0!==this.originalVideoUrl?this.originalVideoUrl:this.url}getObservabilityData(){var e,t,n,i;let r=new aI;return{cached:r.getCachedVideoSegmentUrls().length,format:r.getChunkFormat(),manifest:r.hasCachedManifest(),local:this.url.toLowerCase().startsWith("file://")?1:0,player:this.getVideoPlayer(),segments:null!==(n=null===(t=this.getStreamManifest())||void 0===t||null===(e=t.chunks)||void 0===e?void 0:e.length)&&void 0!==n?n:0,track:r.hasCachedFirstTrack(),url:null!==(i=this.getVideoUrl())&&void 0!==i?i:"",video:this.videoType}}getProgressBarConfig(){return this.progressBarConfig}getFullScreenClickConfig(){return this.fullScreenClickConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nW.CLOSE:this.closeButtonConfig.style})}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getCallToActionConfig(){return this.callToActionConfig}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getStreamManifest(){return this.streamManifest}getEventStreams(){return this.eventStreams?this.eventStreams:aD(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}static isLoopingVideo(e,t=!1){return t||q(e)}static getInstances(e=y(),t=j(),n=Y(),i=iv()){let r=[L.MAIN_VIDEO,L.MAIN_STREAM],a=[],o=e.get(L.ORIGINAL_VIDEO_URL),s=aR.isLoopingVideo(e.get(L.VIDEO_LOOPING),aR.isVideoOnly(e)),l=q(e.get(L.THEATRE_MODE_ENABLED))||q("false");return r.filter((t=>e.has(t))).forEach(((r,d)=>{var c;let u=r===L.MAIN_STREAM?"hls":"mp4",E=`video_${d}`,v=new iS(iT(E,e,t),i),_=new aT(ah(e,t,i)).getCallToActionConfig(),h=new ia(io(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig();a.push(new aR({id:E,url:null!==(c=e.get(r))&&void 0!==c?c:"",index:d,isAlternative:!1,videoType:u,streamManifest:new aS(e.get(L.MAIN_MANIFEST),e.get(L.TRACK_0),e.getSeriesValues("STREAM_CHUNK_")).getStreamManifest(),theatreModeEnabled:l,progressBarConfig:new a_({videoProgressBarTokenValue:e.get(L.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(L.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(L.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),fullScreenClickConfig:new n7({skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),id:E,placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:h,appStoreOnDelayConfig:new is(e.get(L.APP_STORE_ON_VIDEO_AUTO_DELAY),io(e),n,t).getAppStoreOnDelayConfig(),callToActionConfig:_,lastChanceEndcardConfig:v.getLastChanceEndcardConfig(),trackingEventMapConfig:new ig(!1).getTrackingEventMapConfig(),closeButtonConfig:new av({closeButtonDelaySecondsTokenValue:e.get(L.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(L.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(L.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(L.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),originalVideoUrl:o,loopVideo:s,showDownloadButton:q(e.get(L.VIDEO_SHOW_CTA))&&(!_.isPersistent||h.enabled),isFullscreen:t.isFullscreen(),muted:iA(e,t),shouldSplitVideoEndcardClick:q(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new rv({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}constructor({id:e,url:t,index:n,isAlternative:i,videoType:r,streamManifest:a,fullScreenClickConfig:o,storeKitOverlayAutoShowConfig:s,theatreModeEnabled:l,appStoreOnDelayConfig:d,callToActionConfig:c,lastChanceEndcardConfig:u,progressBarConfig:E,closeButtonConfig:v,originalVideoUrl:_,trackingEventMapConfig:h,showDownloadButton:T,loopVideo:S=!1,muted:p=!1,isFullscreen:g,shouldSplitVideoEndcardClick:C=!1,eventStreams:I,incentivizedConfig:O}){super({isFullscreen:g}),this.id=e,this.url=t,this.index=n,this.alternative=i,this.videoType=r,this.streamManifest=a,this.progressBarConfig=E,this.fullScreenClickConfig=o,this.storeKitOverlayAutoShowConfig=s,this.appStoreOnDelayConfig=d,this.callToActionConfig=c,this.showDownloadButton=T,this.lastChanceEndcardConfig=u,this.theatreModeEnabled=l,this.closeButtonConfig=v,this.originalVideoUrl=_,this.loopVideo=S,this.muted=p,this.trackingEventMapConfig=h,this.shouldSplitVideoEndcardClick=C,this.eventStreams=I,this.incentivizedConfig=O,this.addTransition({name:_l.NEXT,actions:[{name:nl.CLOSE_VIDEO}]})}}aR.isVideoOnly=(e=y())=>{let t=!e.some(...ac),n=1===[L.MAIN_VIDEO,L.MAIN_STREAM].filter((t=>e.has(t))).length;return t&&n};var ay=function(e){return e instanceof aR&&Object.values(_W).includes(e.videoType)&&"object"==typeof e.progressBarConfig&&"object"==typeof e.fullScreenClickConfig&&"object"==typeof e.storeKitOverlayAutoShowConfig&&"object"==typeof e.appStoreOnDelayConfig&&"object"==typeof e.callToActionConfig&&"object"==typeof e.lastChanceEndcardConfig&&"object"==typeof e.trackingEventMapConfig&&(void 0===e.originalVideoUrl||!0)&&(void 0===e.loopVideo||!0)},aL=e=>e instanceof aE&&e.getSceneType()===eV.endcard,aP=class extends a{static getServiceIdentifier(){return"PreloadServiceInterface"}isHTMLPreloading(e,t=ns(e)){return(null==t?void 0:t.state.value)===_a.PRELOADING}getHTMLScenesToPreload(e){let t=[];if(ay(e)){aL(e.next)&&e.next.eligibleToPreload&&t.push({scene:e.next,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1});let n=e.getTransitions().find((e=>e.name===_l.COMPLETE));aL(null==n?void 0:n.scene)&&n.scene!==e.next&&n.scene.eligibleToPreload&&t.push({scene:n.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1})}else if(aL(e)&&e.eligibleToPreload){let n=ns(e.getId());(null==n?void 0:n.state.context.preloadSuccess)&&(t.push({scene:e,isCloseButtonVisible:!0,isPrivacyButtonVisible:!0,shouldRenderIFrame:!0,startPreloading:!1}),e.getTransitions().forEach((e=>{e.scene&&aL(e.scene)&&e.scene.eligibleToPreload&&t.push({scene:e.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!0})})))}return t.length>0?t:void 0}startPreloading(e,t=ns(e)){null==t||t.send(_r.PRELOAD)}cancelPreloading(e,t=ns(e)){null==t||t.send(_r.CANCEL_PRELOAD)}};(vI=_x||(_x={})).SCRIPT_ERROR="Unexpected script error",vI.UNHANDLED_REJECTION="Unhandled rejection error",vI.TOKEN_ERROR="syntaxerror: unexpected token ':'",(vO=_F||(_F={}))[vO.InvalidImageError=1e4]="InvalidImageError",vO[vO.InvalidVideoError=10001]="InvalidVideoError",vO[vO.Error=30006]="Error";var aw=class extends a{getMessageFromErrorEvent(e){var t;return e.message&&""!==e.message?e.message:(null===(t=e.error)||void 0===t?void 0:t.message)&&""!==e.error.message?e.error.message:"Unexpected script error"}isIgnoredError(e){let t=e.toLowerCase();return["syntaxerror: unexpected token ':'"].some((e=>-1!==t.indexOf(e)))}sendImageError(e,t=!1){let n=this.getImageErrorEvent(e.target);t&&(n.data.isFatal=!0),this.send(n)}shouldImageErrorBeFatal(e){var t;return"image_0"===e&&!(null===(t=this.currentScene())||void 0===t?void 0:t.prev)}handlePlayableError(e){var t,n,i,r;let a=e.data&&"playable-error"===e.data.title,o=null!==(i=null===(n=e.data)||void 0===n||null===(t=n.content)||void 0===t?void 0:t.message)&&void 0!==i?i:"";a&&!this.isIgnoredError(o)&&(e.data.content.error_source=ew.PLAYABLE,this.send({type:"error-logging",event:iE.PLAYABLE,data:{error:e.data.content,sceneId:null===(r=$())||void 0===r?void 0:r.getId()}}))}handleUnhandledrejectionError(e){var t,n;this.send({type:"error-logging",event:iE.UNHANDLEDREJECTION,data:{error:{message:null!==(n=null===(t=e.reason)||void 0===t?void 0:t.toString())&&void 0!==n?n:"Unhandled rejection error",error_source:ew.TEMPLATE}}})}handleCommonError(e){let{localName:t}=e.target;if("video"===t)return;if("img"===t){let{id:t}=e.target,n=this.shouldImageErrorBeFatal(t);return void this.sendImageError(e,n)}let n={type:"error-logging",event:iE.EXCEPTION,data:{error:{message:this.getMessageFromErrorEvent(e),error_source:ew.TEMPLATE,resource_url:null==e?void 0:e.filename}}};this.send(n)}getErrorCode(e){var t;let n=null===(t=e.data)||void 0===t?void 0:t.resourceType;return n===_L.IMAGE?1e4:n===_L.VIDEO?10001:30006}getImageErrorEvent(e){let{currentSrc:t}=e;return{type:"error-logging",event:iE.RESOURCE,data:{resourceType:_L.IMAGE,error:{resource_url:t,error_source:ew.RESOURCE,message:U}}}}init(){window.addEventListener("error",this.handleCommonError.bind(this),!0),window.addEventListener("unhandledrejection",this.handleUnhandledrejectionError.bind(this)),window.addEventListener("message",this.handlePlayableError.bind(this))}send(e){this.errorLoggingReportingService.emit(e)}notifyFatalError(e){var t,n,i,r;let a=this.getErrorCode(e),o=null!==(r=null===(t=e.data.error)||void 0===t?void 0:t.message)&&void 0!==r?r:"Unknown error";this.observabilityEventReportingService.emit({name:eP.FATAL_ERROR,message:o,error_code:a}),null===(i=this.mraidService.getMraidBridgeExt())||void 0===i||null===(n=i.notifyError)||void 0===n||n.call(i,a,o,!0)}static getServiceIdentifier(){return"ErrorLoggingServiceInterface"}constructor(e=R(),t=iv(),n=eZ(),i=$){super(),this.mraidService=e,this.errorLoggingReportingService=t,this.observabilityEventReportingService=n,this.currentScene=i}},ab={};function aV(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(ab=aV).default=aV;class aM extends Error{}var ak=(e,t=1e4,n=new aM("Timed out waiting!"))=>new Promise(((i,r)=>{let a=t=>{var o;let s=e();((o=ab)&&o.__esModule?o.default:o)(s)?s.then((e=>{e?i(e):t<0?r(n):setTimeout((()=>a(t-100)),100)})):s?i(s):t<0?r(n):setTimeout((()=>a(t-100)),100)};setTimeout((()=>a(t-100)),100)}));class aU extends a{addEventStreams(e){var t;let n=e.getId();if(null===(t=this.sceneEventStreams[n])||void 0===t?void 0:t.hasCompleted)throw Error("Cannot add more event streams after completion");let i=e.getEventStreams(),r={eventStreams:i,results:{},errors:{},completed:{},hasCompleted:!1};this.sceneEventStreams[n]=r,0!==Object.keys(i).length?Object.keys(r.eventStreams).forEach((e=>{r.eventStreams[e].subscribe({next:t=>{r.results[e]=t},error:t=>{r.errors[e]=t},complete:()=>{r.completed[e]=!0}})})):r.hasCompleted=!0}end(e){this.reportingService.emit({type:"scene-event",event:iw.SCENE_END,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}start(e){this.addEventStreams(e),this.reportingService.emit({type:"scene-event",event:iw.SCENE_START,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}subscribeAll(e){let t=e.getId(),n=this.sceneEventStreams[t];return n.hasCompleted?Promise.resolve({}):new Promise((e=>{ak((()=>Object.keys(n.eventStreams).every((e=>!!n.errors[e]||n.completed[e]))),aU.MAX_WAIT_TIME,Error(`Event streams for scene ${t} have not completed successfully`)).then((()=>{n.hasCompleted=!0,e(n.results)}))}))}haveAllCompleted(){return 0===Object.keys(this.sceneEventStreams).length||Object.keys(this.sceneEventStreams).every((e=>this.sceneEventStreams[e].hasCompleted))}reset(){this.sceneEventStreams={}}static getServiceIdentifier(){return"EventStreamServiceInterface"}constructor(e=iz()){super(),this.reportingService=e,this.sceneEventStreams={}}}aU.MAX_WAIT_TIME=2e3;var aB=()=>({dbName:"viewMaster_indexed_db_urlCache",dbVersion:1,objectStore:{name:"urlCache",keyPath:"url",expiry:30}}),aH=class extends a{async addRecord(){}async get(){return Promise.resolve(void 0)}async getAllRecords(){return Promise.resolve([])}async clearStore(){}async deleteExpiredRecords(){}},aW=class extends aH{static getServiceIdentifier(){return"UrlCacheServiceInterface"}};class ax{static async hasSufficientSpace(){var e;if(!(null===(e=window.navigator.storage)||void 0===e?void 0:e.estimate))return!0;let{quota:t,usage:n}=await window.navigator.storage.estimate();return!t||!n||t-n>=5e6}static async shouldInitIndexedDB(){return!!window.indexedDB&&ax.hasSufficientSpace()}static handleUpgrade(e,t){let n=e.target.result,{name:i,keyPath:r,index:a}=t;if(!n.objectStoreNames.contains(i)){let e=n.createObjectStore(i,{keyPath:r});a&&e.createIndex(a.name,a.keyPath,a.options)}}static convertToError(e){var t;return Error(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Unknown error from IndexedDB")}static async open(e){if(await ax.shouldInitIndexedDB())return new Promise(((t,n)=>{let{dbName:i,objectStore:r,dbVersion:a}=e,o=window.indexedDB.open(i,a);o.onupgradeneeded=e=>ax.handleUpgrade(e,r),o.onsuccess=e=>t(e.target.result),o.onerror=e=>n(ax.convertToError(e.target.error))})).catch((()=>{}))}reportError(e){let t=e instanceof Error?e.message:String(e);this.errorLoggingReportingService.emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:t}}})}async withTransaction(e,t,n){if(!this.db.objectStoreNames.contains(this.storeName))return n;try{let n=this.db.transaction(this.storeName,e),i=n.objectStore(this.storeName);return await new Promise(((e,r)=>{n.onerror=()=>r(ax.convertToError(n.error)),t(i).then((t=>e(t))).catch((e=>r(ax.convertToError(e))))}))}catch(e){return this.reportError(e),n}}handleCursor(e,t,n,i){let r=e.target.result;if(r)if(r.value.createDate<t){let e=r.delete();e.onsuccess=()=>r.continue(),e.onerror=()=>i(ax.convertToError(e.error))}else r.continue();else n()}async deleteExpiredRecords(){let e=Date.now()-864e5*this.expiry;return this.withTransaction("readwrite",(t=>new Promise(((n,i)=>{let r=t.openCursor();r.onsuccess=t=>this.handleCursor(t,e,n,i),r.onerror=()=>i(ax.convertToError(r.error))}))),void 0)}async addRecord(e){return e.createDate||(e.createDate=Date.now()),this.withTransaction("readwrite",(async t=>{let n=t.put(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=()=>t(ax.convertToError(n.error))}))}),void 0)}async get(e){return this.withTransaction("readonly",(async t=>{let n=t.get(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(ax.convertToError(n.error))}))}),void 0)}async getAllRecords(){return this.withTransaction("readonly",(async e=>new Promise(((t,n)=>{let i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(ax.convertToError(i.error))}))),[])}async clearStore(){return this.withTransaction("readwrite",(async e=>{let t=e.clear();return new Promise(((e,n)=>{t.onsuccess=()=>e(),t.onerror=()=>n(ax.convertToError(t.error))}))}),void 0)}constructor(e,t,n=iv()){this.db=e;let{objectStore:i}=t;this.storeName=i.name,this.keyPath=i.keyPath,this.expiry=i.expiry,this.errorLoggingReportingService=n}}var aF=class{async getIndexedDatabaseService(){return this.indexedDatabaseService}constructor(e,t,n){this.indexedDatabaseService=ax.open(e).then((i=>i?new ax(i,e,t):new n)).then((e=>e.deleteExpiredRecords().then((()=>e))))}},aG=class extends a{async addRecord(e){return(await this.indexedDatabaseService).addRecord(e)}async get(e){return(await this.indexedDatabaseService).get(e)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async clearStore(){let e=await this.indexedDatabaseService;await e.clearStore()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UrlCacheServiceInterface"}constructor(e=aB(),t=iv()){super(),this.indexedDatabaseService=new aF(e,t,aW).getIndexedDatabaseService()}};(vA=_G||(_G={})).LANDSCAPE="landscape",vA.PORTRAIT="portrait",vA.UNKNOWN="unknown",(vm=_K||(_K={})).LOAD_FAIL="LOAD_FAIL",vm.PLAY="PLAY",vm.CAN_PLAY="CAN_PLAY",vm.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",vm.PAUSE="PAUSE",vm.END="END",vm.TIME_UPDATE="TIME_UPDATE",vm.CLOSE="CLOSE",vm.DURATION_CHANGE="DURATION_CHANGE",vm.WAITING="WAITING",vm.SUSPEND="SUSPEND",vm.RETRY="RETRY",vm.MAXIMIZE="MAXIMIZE",vm.MINIMIZE="MINIMIZE",(vf=_Y||(_Y={})).LOADING="LOADING",vf.LOAD_FAIL_RETRY="LOAD_FAIL_RETRY",vf.PLAYING="PLAYING",vf.PAUSED="PAUSED",vf.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",vf.ENDED="ENDED",vf.FINAL="FINAL",(vN=_j||(_j={})).UPDATE_PROGRESS="updateProgress",vN.EMIT_PROGRESS="emitProgress",vN.EMIT_LOAD="emitLoad",vN.EMIT_PLAY="emitPlay",vN.EMIT_PAUSE="emitPause",vN.EMIT_CLOSE="emitClose",vN.EMIT_CLOSE_FULLY_PLAYED="emitCloseFullyPlayed",vN.INCREMENT_LOOP_COUNT="incrementLoopCount",vN.REPORT_VIDEO_START="reportVideoStart",vN.SET_CAN_PLAY="setCanPlay",vN.EMIT_DURATION_CHANGE="emitDurationChange",vN.EMIT_TIME_UPDATE="emitTimeUpdate",vN.EMIT_WAITING="emitWaiting",vN.EMIT_SUSPEND="emitSuspend",vN.UPDATE_CURRENT_TIME="updateCurrentTime",vN.RESET_CURRENT_TIME="resetCurrentTime",vN.EMIT_CHECKPOINT_TPAT_EVENT="emitCheckpointTpatEvent",vN.EMIT_SCENE_EVENT="emitTrackingEvent",(_X||(_X={})).FSC="FSC";var aK=_X;const aY=()=>es(),aj=()=>es();var aX=class extends a{setVideoContext(e,t,n){this.videoScene=e,this.videoElement=t,this.videoInterpreter=n}getVideoScene(){return this.videoScene}getVideoElement(){return this.videoElement}getVideoInterpreter(){return this.videoInterpreter}getFullScreenCallToActionEventHandlerProps(){var e;return this.videoScene?{fullScreenClickConfig:C(d({},this.videoScene.getFullScreenClickConfig()),{enabled:!0,target:null!==(e=this.videoScene.getFullScreenClickConfig().target)&&void 0!==e?e:eM.SKPV}),trackingEventMapConfig:C(d({},this.videoScene.getTrackingEventMapConfig()),{enabled:!0}),sceneId:this.videoScene.getId()}:{}}clickHandler(){this.fullScreenCallToActionReportingService.emit({type:"fsc",event:aK.FSC})}videoAdViewableChange(e,t,n=!1){this.videoScene&&this.videoInterpreter&&(t.event!==nU.MAXIMIZED||n?t.event===nU.MINIMIZED&&this.videoInterpreter.send({type:_K.MINIMIZE}):this.videoInterpreter.send({type:_K.MAXIMIZE,hasHlsVideo:this.videoScene.videoType===_W.HLS}))}isPortrait(){return this.environmentService.getOrientation()===ey.PORTRAIT}closeVideo(){var e;null===(e=this.videoInterpreter)||void 0===e||e.send({type:_K.CLOSE}),this.setVideoContext(void 0,null)}static getServiceIdentifier(){return"PictureInPictureServiceInterface"}constructor(e=Y(),t=aj()){super(),this.environmentService=e,this.fullScreenCallToActionReportingService=t,this.videoElement=null}},az=()=>({dbName:"viewMaster_indexed_db",dbVersion:1,objectStore:{name:"userActivity",keyPath:"eventId",expiry:90}}),a$=class extends aH{static getServiceIdentifier(){return"UserActivityServiceInterface"}},aZ=class extends a{findObservabilityActivityEvent(e){return t=>{var n;if("eventType"in t.activity&&"observability"===t.activity.eventType&&(null===(n=t.activity.data)||void 0===n?void 0:n.name)===e)return t.activity}}findSceneEventActivityEvent(e,t){return n=>{var i;if("eventType"in n.activity&&"scene-event"===n.activity.eventType&&n.activity.name===e&&(null===(i=n.activity.data)||void 0===i?void 0:i.scene_type)===t)return n.activity}}getAdStartTime(){let e=this.reportingService.getActivity().find(this.findObservabilityActivityEvent(eP.AD_START));if(e)return new Date(e.timestamp)}getVideoEnd(){var e;let t=this.reportingService.getActivityEvents().find((e=>"video"===e.activity.eventType&&e.activity.name===iq.CLOSE));if(null==t||null===(e=t.activity.data)||void 0===e?void 0:e.maximumViewingTime)return Math.floor(1e3*t.activity.data.maximumViewingTime)}getEndcardInteractions(){var e;let t=this.reportingService.getActivityEvents().find((e=>{var t,n;return"observability"===e.activity.eventType&&(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eP.SCENE_END&&"endcard_0"===(null===(n=e.activity.data)||void 0===n?void 0:n.scene_id)}));return null==t||null===(e=t.activity.data)||void 0===e?void 0:e.endcard_click_count}getEndcardDuration(){var e;let t=this.reportingService.getActivityEvents().find((e=>{var t,n;return"observability"===e.activity.eventType&&(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eP.SCENE_END&&"endcard_0"===(null===(n=e.activity.data)||void 0===n?void 0:n.scene_id)}));return null==t||null===(e=t.activity.data)||void 0===e?void 0:e.duration}getVideoCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findObservabilityActivityEvent(eP.VIDEO_START)),n=e.find(this.findSceneEventActivityEvent(iw.CLOSE_BUTTON_SHOW,eV.video));if(t&&n)return n.timestamp-t.timestamp}getEndcardCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findSceneEventActivityEvent(iw.SCENE_START,eV.endcard)),n=e.find(this.findSceneEventActivityEvent(iw.CLOSE_BUTTON_SHOW,eV.endcard));if(t&&n)return n.timestamp-t.timestamp}getEndcardInteractionsAfterCloseButton(){return this.reportingService.getActivityEvents().filter((e=>{var t;return(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eP.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE})).length}getUserActivityData(){var e,t,n;return{eventId:null!==(e=this.tokenService.get(L.SESSION_ID))&&void 0!==e?e:"",creativeId:null!==(t=this.tokenService.get(L.CREATIVE_ID))&&void 0!==t?t:"",adSource:this.tokenService.get(L.AD_SOURCE),placementType:this.placementTypeService.getPlacementType(),time:this.getAdStartTime(),videoUrl:null!==(n=this.tokenService.get(L.ORIGINAL_VIDEO_URL))&&void 0!==n?n:this.tokenService.get(L.MAIN_STREAM),videoStart:0,videoEnd:this.getVideoEnd(),endcardInteractions:this.getEndcardInteractions(),endcardDuration:this.getEndcardDuration(),videoCloseShown:this.getVideoCloseShown(),endcardCloseShown:this.getEndcardCloseShown(),endcardInteractionsAfterCloseButton:this.getEndcardInteractionsAfterCloseButton(),rewarded:this.injectedIsIncentivized(this.tokenService),createDate:Date.now(),averageBandwidth:this.injectedGetVideoStreamAverageBandwidth()}}async addRecord(){let e=await this.indexedDatabaseService,t=this.getUserActivityData();return e.addRecord(t)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UserActivityServiceInterface"}constructor(e=az(),t=iv(),n=y(),i=nf(),r=aA,a=j(),o=Q){super(),this.indexedDatabaseService=new aF(e,t,a$).getIndexedDatabaseService(),this.tokenService=n,this.reportingService=i,this.placementTypeService=a,this.injectedIsIncentivized=o,this.injectedGetVideoStreamAverageBandwidth=r}},aq=0;function aQ(e,t,n,i,r,a){t||(t={});var o,s,l=t;if("ref"in l)for(s in l={},t)"ref"==s?o=t[s]:l[s]=t[s];var d={type:e,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--aq,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===l[s]&&(l[s]=o[s]);return eB.vnode&&eB.vnode(d),d}const aJ={V4_9_0:new b("4.9.0"),V4_9_3:new b("4.9.3"),V5_0_0:new b("5.0.0"),V5_0_1:new b("5.0.1"),V5_1_2:new b("5.1.2"),V5_2_1:new b("5.2.1")};(vD=_z||(_z={})).SILENT="silent",vD.UN_SILENT="un-silent";var a0=_z,a1=(e=R())=>{var t,n,i;return null!==(i=null===(n=e.getMraidExt())||void 0===n||null===(t=n.isSilent)||void 0===t?void 0:t.call(n))&&void 0!==i&&i},a2=(e=en())=>{let t=[],n=e=>{e.forEach((e=>{let i=e.getSceneType();(i===eV.video||i===eV.endcard)&&t.push(e),i===eV.composite&&n(e.getScenes())}))};return n(e),t.some((e=>e.muted))},a3=()=>es();const a5=(e=es())=>e.getActivityEvents().some((e=>"silent"===e.activity.eventType&&(e.activity.name===a0.SILENT||e.activity.name===a0.UN_SILENT))),a4=(e,t,n)=>{t||n||e.emit({type:"silent",event:a0.UN_SILENT})},a6=(e,t)=>{e.emit({type:"silent",event:t?a0.SILENT:a0.UN_SILENT})};var a8=(e,t=R(),n=a3(),i=Y(),r=a2())=>{let a=a1(t);var o;i.getOperatingSystem()===eR.iOS?(null===(o=t.getMraid())||void 0===o||o.removeEventListener("silentChange",e),a4(n,r,a)):a6(n,a)},a7=()=>{let e=r.getInstance(),t=eQ.getServiceIdentifier();return e.get(t)},a9=()=>es(),oe=(e=a9(),t=a7())=>{let n=t.isViewable();e.emit({type:"viewability",event:n?nU.MAXIMIZED:nU.MINIMIZED})},ot=()=>{let e=r.getInstance(),t=aP.getServiceIdentifier();return e.get(t)};(vR=_$||(_$={})).INFO="info",vR.READY="ready",vR.ERROR="error",vR.STATE_CHANGE="stateChange",vR.ORIENTATION_CHANGE="orientationChange",vR.VIEWABLE_CHANGE="viewableChange",vR.SIZE_CHANGE="sizeChange",vR.SILENT_CHANGE="silentChange",(_Z||(_Z={})).CLOSE_BUTTON_WILL_SHOW="closeButtonWillShow";var on=class extends a{getEventCallbacks(e,t){return this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=this.callbacks[e][t]||[],[...this.callbacks[e][t]]}updateEventCallbacks(e,t,n){this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=n}addEventListener(e,t,n){if(!this.allowedMraidEvents.includes(t))return;let i=this.getEventCallbacks(e,t);this.updateEventCallbacks(e,t,[...i,n])}removeEventListener(e,t,n){if(this.allowedMraidEvents.includes(t))if(n){let i=this.getEventCallbacks(e,t).filter((e=>e!==n));this.updateEventCallbacks(e,t,i)}else this.updateEventCallbacks(e,t,[])}flushAllEventCallbacks(e){this.callbacks[e]&&Object.keys(this.callbacks[e]).forEach((t=>{this.updateEventCallbacks(e,t,[])}))}init(){this.mraidEvents.forEach((e=>{let t=(...n)=>{"silentChange"===e&&this.injectedHandleAdSilentMessage(t),"viewableChange"===e&&this.injectedHandleAdViewabilityMessage();let i=$();i&&this.getEventCallbacks(i.getId(),e).forEach((e=>{e(...n)}))};this.mraidService.getMraid().addEventListener(e,t)}))}triggerEvent(e,t,...n){"viewableChange"===t&&this.injectedPreloadService.isHTMLPreloading(e)||this.getEventCallbacks(e,t).forEach((e=>{e(...n)}))}static getServiceIdentifier(){return"MraidEventsProxyServiceInterface"}constructor(e,t=R(),n=a8,i=oe,r=ot()){super(),this.mraidEvents=e,this.mraidService=t,this.injectedHandleAdSilentMessage=n,this.injectedHandleAdViewabilityMessage=i,this.injectedPreloadService=r,this.allowedMraidEvents=[...this.mraidEvents,...Object.values(_Z)],this.callbacks={}}},oi=()=>{let e=r.getInstance(),t=on.getServiceIdentifier();return e.get(t)};const or=(e=y())=>e.has(L.ERID_ADVERTISER_INFO,L.ERID_ADVERTISER_LINK,L.ERID_RECOMMEND_RULE,L.CTA_BUTTON_URL);var oa=(e=y())=>({erid_advertiser_info:e.get(L.ERID_ADVERTISER_INFO),erid_advertiser_link:e.get(L.ERID_ADVERTISER_LINK),erid_recommend_rule:e.get(L.ERID_RECOMMEND_RULE)});const oo=e=>e?`?${e.toString()}`:"",os=(e=y())=>{if(or(e)){let t=new URLSearchParams;return t.set("adSource",V(e.get(L.ERID_ADVERTISER_INFO))),t.set("adUrl",V(e.get(L.ERID_ADVERTISER_LINK))),t.set("adRulesUrl",V(e.get(L.ERID_RECOMMEND_RULE))),t.set("adCtaUrl",e.get(L.CTA_BUTTON_URL)),`https://cdn-lb.vungle.com/privacy-policy-and-ad-info-erid/index.html${oo(t)}`}return e.get(L.VUNGLE_PRIVACY_URL)};var ol=()=>({[n_.SET_PRIVACY_BUTTON_VISIBLE]:p({isPrivacyButtonVisible:!0}),[n_.SET_PRIVACY_BUTTON_HIDDEN]:p({isPrivacyButtonVisible:!1}),[n_.OPEN_PRIVACY_URL]:()=>{var e,t;let n=Y(),i=y(),r=eZ(),a=n.getOperatingSystem(),o=a===eR.Android||a===eR.iOS&&n.getMraidVersion().isGreaterThanOrEqualTo(aJ.V5_0_0);r.emit(d({name:eP.PRIVACY_CTA},oa(i))),o&&!or()?null===(e=R().getMraidBridgeExt())||void 0===e||e.openPrivacy(os(i)):null===(t=R().getMraid())||void 0===t||t.open(os(i))},[n_.SET_PRIVACY_DRAWER_OPEN]:p({isPrivacyDrawerOpen:!0}),[n_.SET_PRIVACY_DRAWER_CLOSED]:p({isPrivacyDrawerOpen:!1}),[n_.TRIGGER_VIEWABLE_CHANGE]:e=>{let t=oi(),n=a7();e.isPrivacyDrawerOpen?n.setViewable(!1):n.resetViewable();let i=$();i&&t.triggerEvent(i.getId(),_$.VIEWABLE_CHANGE,n.isViewable())}}),od=()=>{var e;let t=null===(e=z.getValue())||void 0===e?void 0:e.scene;if((null==t?void 0:t.getSceneType())===eV.video)return t;if((null==t?void 0:t.getSceneType())===eV.composite){let e=t.getScenes().find((e=>e.getSceneType()===eV.video));if(e)return e}},oc=(e,t=od)=>{var n;let i=null===(n=t())||void 0===n?void 0:n.getId();if(i)return(null!=e?e:no()).interpreterMap.get(i)},ou=()=>{let e=r.getInstance(),t=na.getServiceIdentifier();return e.get(t)},oE=()=>{let e=r.getInstance(),t=aX.getServiceIdentifier();return e.get(t)},ov=()=>{let e=r.getInstance(),t=aw.getServiceIdentifier();return e.get(t)},o_=(e=oc,t=oE())=>({[nl.MUTE_SOUND]:()=>{ou().mute()},[nl.UN_MUTE_SOUND]:()=>{ou().unmute()},[nl.EMIT_MUTED]:()=>{let e=i1(),t=ou();e.emit({type:"video",event:t.isMuted()?iq.MUTE:iq.UNMUTE})},[nl.EMIT_VIDEO_ERROR]:(e,t)=>{i1().emit({type:"video",event:iq.ERROR,data:t})},[nl.CLOSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.CLOSE})},[nl.CLOSE_VIDEO_CURRENT_SCENE]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.CLOSE})},[nl.PAUSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.PAUSE})},[nl.PLAY_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_K.PLAY})},[nl.POSTROLL_VIEW]:()=>{ii().emit(n9.POSTROLL_VIEW,!0)},[nl.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE]:()=>{eZ().emit(eP.VIDEO_SKIP_TO_ENDCARD)},[nl.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT]:()=>{var n;let i=$(),r=null===(n=e())||void 0===n?void 0:n.state.context.videoElement;t.setVideoContext(i,r,e())},[nl.SHOW_PICTURE_IN_PICTURE]:p({shouldRenderPictureInPicture:()=>!0}),[nl.CLOSE_PICTURE_IN_PICTURE]:p({shouldRenderPictureInPicture:()=>!1}),[nl.SEND_FATAL_VIDEO_ERROR]:()=>{let e=ov(),t={type:"error-logging",event:iE.RESOURCE,data:{resourceType:_L.VIDEO,isFatal:!0,error:Error(H)}};e.send(t)}}),oh=(e=iz())=>({[_f.EMIT_CLOSE_BUTTON_SHOW]:()=>{e.emit(iw.CLOSE_BUTTON_SHOW)},[_f.EMIT_CLOSE_BUTTON_CLICK]:()=>{e.emit(iw.CLOSE_BUTTON_CLICK)},[_f.SET_CLOSE_BUTTON_VISIBLE]:p({isCloseButtonVisible:!0}),[_f.SET_CLOSE_BUTTON_HIDDEN]:p({isCloseButtonVisible:!1})}),oT=()=>"true"===y().get(L.OM_ENABLED);(_q||(_q={})).REMOVE_HANDLER="REMOVE_HANDLER";var oS=()=>{try{return window.OmidSessionClient.default}catch(e){return}},op=class{init(e,t){var n,i;if(this.sessionClient=oS(),!this.sessionClient)return;let{AdSession:r,Partner:a,Context:o,VerificationScriptResource:s,AdEvents:l,MediaEvents:d}=this.sessionClient;if(t){let e=new s(t.vendorURL,t.vendorKey,t.params);this.verificationScriptResources=[e]}let c=Y().getSdkVersion().toString();this.partner=new a(this.vungleData.partnerName,c||this.vungleData.partnerVersion),this.context=new o(this.partner,this.verificationScriptResources),void 0!==e&&(null===(n=this.context)||void 0===n||n.setVideoElement(e)),this.adSession=new r(this.context),(null===(i=this.adSession)||void 0===i?void 0:i.isSupported)&&this.adSession.isSupported()&&(this.adEvents=new l(this.adSession),this.mediaEvents=new d(this.adSession))}eventDrain(){this.funcsOnImpression.forEach((e=>{e()})),this.funcsOnImpression=[]}pushOrCallFunction(e){this.hasSessionStarted?e():this.funcsOnImpression.push(e)}onCtaClick(){this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.adUserInteraction("click")}))}constructor(){this.vungleData={partnerName:"Vungle",partnerVersion:"1.0"},this.hasSessionStartRequested=!1,this.initialized=!1,this.hasSessionStarted=!1,this.funcsOnImpression=[]}};(vy=_Q||(_Q={})).HTML_DISPLAY="htmlDisplay",vy.VIDEO="video";var og=_Q;(_J||(_J={})).LOADED="loaded";var oC=_J;(vL=_0||(_0={})).SESSION_START="sessionStart",vL.SESSION_ERROR="sessionError",vL.SESSION_FINISH="sessionFinish";var oI=_0,oO=class extends op{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(),null===(e=this.adSession)||void 0===e||e.setCreativeType(og.HTML_DISPLAY),null===(t=this.adSession)||void 0===t||t.setImpressionType(oC.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){es().emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:"Unable to init omsdk banner and mrec"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,null===(t=this.adEvents)||void 0===t||t.loaded(null),this.eventDrain())}onSessionChange(e){if(e.type===oI.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();e.type===oI.SESSION_FINISH&&es().emit({type:"cta",event:_q.REMOVE_HANDLER})}static getServiceIdentifier(){return"OmsdkHtmlDisplayServiceInterface"}constructor(){super(),this.init()}},oA=()=>{if(oT()){let e=oO.getServiceIdentifier(),t=new oO;r.getInstance().bind(e,t)}},om=e=>{e.length>0&&((new Image).src=e)},of=()=>es();const oN=(e,t)=>`${e}_${t}`,oD=e=>{let t=e.split("_");return t[t.length-1]},oR=(e,t)=>{var n,i;if(!(null===(n=t.data)||void 0===n?void 0:n.trackingEventMapConfig.enabled))return;let r=oD(t.event),a=null===(i=t.data)||void 0===i?void 0:i.trackingEventMapConfig.events;if(!(null==a?void 0:a[r]))return;let o=a[r];null==o||o.forEach((e=>{om(e)}))};var oy=(e=!0,t=of())=>{tf((()=>e?(t.addEventHandler("tracking-event",oR),()=>{t.removeEventHandler("tracking-event",oR)}):()=>{}),[t,e])},oL=(e,t,n,i=!1,r=of())=>{if(!t||!n||!n.enabled)return;let a=n.events;if(!(null==a?void 0:a[e]))return;let o=oN(t,e);r.emit({type:"tracking-event",event:o,fireOnlyOnce:i,data:{trackingEventMapConfig:n}})},oP=(e,t=en())=>{let n=t.find((t=>t.getId()===e.value));if(!n)throw Error(`No scene found for state ${e.value}`);return n},ow=(e=$,t=ns,n=ii,i=oL)=>({[iI.ON_CREATIVE_VIEW]:()=>{let t=e();t&&[eV.endcard,eV.image].includes(t.getSceneType())&&i(ek.CREATIVE_VIEW,t.getId(),t.getTrackingEventMapConfig(),!0)},[iI.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS]:()=>{let e=$();e&&oi().flushAllEventCallbacks(e.getId())},[iI.DESTROY_IFRAME]:p({shouldRenderIFrame:!1}),[iI.INIT_CHECKPOINTS]:()=>{!n().hasExistingEvent({type:"tpat",event:n9.CHECKPOINT_0})&&a7().isViewable()&&re(0)},[iI.INIT_OMSDK_HTML_DISPLAY_SERVICE]:()=>{oA()},[iI.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW]:()=>{let e=oi(),t=$();t&&(e.triggerEvent(t.getId(),_Z.CLOSE_BUTTON_WILL_SHOW),e.removeEventListener(t.getId(),_Z.CLOSE_BUTTON_WILL_SHOW))},[iI.ON_SHOW]:()=>{let e=no().interpreterMap.get("ad");if(e){let n=t(oP(e.state).getId());null==n||n.send({type:_r.SHOW})}}});(vP=_1||(_1={})).SHOW="SHOW",vP.HIDE="HIDE",(vw=_2||(_2={})).SHOWING="SHOWING",vw.HIDDEN="HIDDEN",(vb=_3||(_3={})).ON_LAST_CHANCE_ENDCARD_SHOW="onLastChanceEndcardShow",vb.ON_LAST_CHANCE_ENDCARD_HIDE="onLastChanceEndcardHide";const ob="last-chance-endcard",oV=e=>({id:null!=e?`${ob}-${e}`:ob,initial:_2.HIDDEN,context:{delay:0},states:{[_2.SHOWING]:{on:{[_1.HIDE]:{target:_2.HIDDEN,actions:[_3.ON_LAST_CHANCE_ENDCARD_HIDE]}}},[_2.HIDDEN]:{on:{[_1.SHOW]:{target:_2.SHOWING,actions:[_3.ON_LAST_CHANCE_ENDCARD_SHOW]}}}}}),oM={actions:{[_3.ON_LAST_CHANCE_ENDCARD_SHOW]:()=>{iz().emit(iw.LAST_CHANCE_ENDCARD_OPEN)},[_3.ON_LAST_CHANCE_ENDCARD_HIDE]:()=>{iz().emit(iw.LAST_CHANCE_ENDCARD_CLOSE)}}};var ok=(e,t)=>{let n=null!=t?t:no(),i=null!=e?`${ob}-${e}`:ob;return n.interpreterMap.get(i)};const oU=X({isLastChanceEndcardOverlayShowing:!1},"LastChanceEndcardOverlayContext");(vV=_5||(_5={})).SHOW_LAST_CHANCE_ENDCARD="showLastChanceEndcard",vV.CLOSE_LAST_CHANCE_ENDCARD="closeLastChanceEndcard";var oB=()=>({showLastChanceEndcard:()=>{let e=z.getValue().scene;if(n2(e)){let t=ok(e.getId());oU.setValue({isLastChanceEndcardOverlayShowing:!0}),null==t||t.send({type:_1.SHOW})}},closeLastChanceEndcard:()=>{oU.setValue({isLastChanceEndcardOverlayShowing:!1});let e=z.getValue().scene;if(n2(e)){let t=ok(e.getId());null==t||t.send({type:_1.HIDE})}}}),oH=class extends a{initializeForComponent(e,t,n){0!==t&&(this.storeKitOverlayService.canOpen()?e(!0):this.timerService.getNewTimer(n,(()=>{this.initializeForComponent(e,t-1,n)})).start())}startAutoShow(e){var t;if(this.reset(),!e.enabled)return Promise.resolve();let n=this.timerService.getNewTimer(null!==(t=e.autoShowDelay)&&void 0!==t?t:0);return this.openTimer=n,(async()=>{let t;if(e.isAutoClose){var i;let n=null!==(i=e.autoCloseDelay)&&void 0!==i?i:5e3;t=this.timerService.getNewTimer(n,(()=>{this.storeKitOverlayService.close()})),this.closeTimer=t}this.storeKitOverlayService.open({delayed:!0,fallback:_h.OFF}),await n.asPromise().then((()=>{this.storeKitOverlayService.open({delayed:!0,fallback:_h.OFF}),t&&t.start(),e.openCallback&&e.openCallback(),n.destroy()}))})()}reset(){this.openTimer&&(this.openTimer.destroy(),this.openTimer=void 0),this.closeTimer&&(this.closeTimer.destroy(),this.closeTimer=void 0)}static getServiceIdentifier(){return"StoreKitOverlayAutoShowServiceInterface"}constructor(e,t=nE()){super(),this.storeKitOverlayService=e,this.timerService=t}},oW=()=>{let e=r.getInstance(),t=oH.getServiceIdentifier();if(e.has(t))return e.get(t)};(_4||(_4={})).RESET_AUTO_SHOW_OVERLAY_SERVICE="resetAutoShowOverlayService";var ox=(e=oW)=>({resetAutoShowOverlayService:()=>{let t=e();null==t||t.reset()}}),oF=()=>d({},nF(),ol(),o_(),nA(),ox(),nH(),nv(),nu(),oh(),ow(),oB()),oG=(e=y())=>({isPrivacyButtonVisible:!1,isPrivacyDrawerOpen:!1,isCloseButtonVisible:!1,shouldRenderIFrame:!0,shouldRenderPictureInPicture:!1,isFreeForm:e.has(L.AD_EXPERIENCE),allowDebug:e.has(L.IS_RUNNING_INSIDE_EMBED)||e.has(L.IS_STAFF_DEVICE_BID),isTheatreModeActive:!1}),oK=class{convertScene(e){let t=e.getTransitions(),n={[e.getId()]:{entry:[],exit:[],on:{}}};return e.getEntryActions().forEach((t=>{n[e.getId()].entry.push(t.name)})),e.getExitActions().forEach((t=>{n[e.getId()].exit.push(t.name)})),t.forEach((t=>{let i=t.actions.map((e=>e.name)),{cond:r}=t;t.scene?n[e.getId()].on[t.name]={actions:i,target:t.scene.getId(),cond:r}:n[e.getId()].on[t.name]={actions:i,cond:r}})),this.removeFalsyValues(n)}convertScenes(e){let t={};return e.forEach((e=>{Object.assign(t,this.convertScene(e))})),t}removeFalsyValues(e){return Object.keys(e).forEach((t=>{e[t]&&"object"==typeof e[t]?(this.removeFalsyValues(e[t]),0===Object.keys(e[t]).length&&delete e[t]):e[t]||delete e[t]})),e}},oY=()=>{let e=new oK,t=en(),n=e.convertScenes(t);return{id:"ad",initial:t[0].getId(),states:n,context:oG()}};(_6||(_6={})).DECODING_ERROR="decoding_error";var oj=_6,oX=(e=R(),t=j())=>{var n,i,r,a,o,s;return null!==(s=null!==(o=null===(i=e.getMraidExt())||void 0===i||null===(n=i.getConsentRequired)||void 0===n?void 0:n.call(i))&&void 0!==o?o:null===(a=e.getMraid())||void 0===a||null===(r=a.getConsentRequired)||void 0===r?void 0:r.call(a))&&void 0!==s&&s&&!t.isBanner()},oz=class{parseAdExperienceData(e){try{let t=V(e);return JSON.parse(t)}catch(e){return void this.freeFormReportingService.emit({type:"free-form",event:oj.DECODING_ERROR})}}getAdExperience(e=oX(this.mraidService,this.placementTypeService)){var t,n;if(!this.adExperienceCache){let n=null!==(t=this.tokenService.get(L.AD_EXPERIENCE))&&void 0!==t?t:"",i=this.parseAdExperienceData(n);this.adExperienceCache=this.addGDPRSceneIfConsentRequired(i,e)}return null!==(n=this.adExperienceCache)&&void 0!==n?n:{components:{},statemachine:{id:"ad",initial:"closed",states:{}}}}addGDPRSceneIfConsentRequired(e,t=oX(this.mraidService,this.placementTypeService)){if(e&&t){let t=e.statemachine.initial;e.statemachine.states.gdpr={on:{[_l.NEXT]:{target:t}}},e.statemachine.initial=et}return e}getAdMachineConfig(){let e=this.getAdExperience();return C(d({},null==e?void 0:e.statemachine),{id:"ad"})}getSceneData(){let e=this.getAdExperience();return(null==e?void 0:e.components)?Object.entries(e.components).map((([e,t])=>C(d({},t),{id:e}))):[]}constructor(e=y(),t=es(),n=R(),i=j(),r=as()){this.tokenService=e,this.freeFormReportingService=t,this.mraidService=n,this.placementTypeService=i,this.htmlDecoderService=r}},o$=(e=new oz,t=en())=>{let n=e.getAdMachineConfig();return n.states=n.states||{},t.forEach((e=>{let t=e.getId();n.states[t]=n.states[t]||{on:{},entry:[],exit:[]},e.getTransitions().forEach((e=>{if(n.states[t].on){var i,r,a;let o=e.name,s=null===(i=e.scene)||void 0===i?void 0:i.getId(),l=null===(r=n.states[t].on)||void 0===r?void 0:r[o],c={actions:Array.from(new Set([...Array.from(null!==(a=null==l?void 0:l.actions)&&void 0!==a?a:[]),...e.actions.map((e=>e.name))])),cond:(null==l?void 0:l.cond)?l.cond:e.cond};s&&(c.target=s),n.states[t].on[o]=d({},null!=l?l:{},c)}})),n.states[t].entry||(n.states[t].entry=[]),n.states[t].entry.push(...e.getEntryActions().map((e=>e.name))),n.states[t].exit||(n.states[t].exit=[]),n.states[t].exit.push(...e.getExitActions().map((e=>e.name)))})),C(d({},n),{context:d({},oG(),n.context)})},oZ=()=>es();(_8||(_8={})).SCENE_BUILDER_COMPLETE="SCENE_BUILDER_COMPLETE";var oq=_8,oQ=(e,t,n={})=>{let i=[],r=new Set,a=new Set,o=t.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return function t(s,l=!1){var d;let c,u;if(a.has(s))return;a.add(s);let E=o[s],v=E?E.getSceneType():eV.closed,_=!!E&&E.isAlternative();c=l?"start":v===eV.closed?"end":"intermediate";let h=[];_&&h.push("Alternate"),h.push((u=n[v]||v)?u.charAt(0).toUpperCase()+u.slice(1):u),i.some((e=>e.id===s))||i.push({id:s,label:h.join(" "),type:c,alternative:_,connections:[]});let T=(null===(d=e.states[s])||void 0===d?void 0:d.on)||{};Object.keys(T).forEach((e=>{var n,a,o;let l=null===(n=T[e])||void 0===n?void 0:n.target;if(l){let e=`${s}->${l}`;r.has(e)||(r.add(e),null===(o=i.find((e=>e.id===s)))||void 0===o||null===(a=o.connections)||void 0===a||a.push(l),t(l))}}))}(e.initial,!0),{nodes:i.map((e=>{var t;let n=null===(t=e.connections)||void 0===t?void 0:t.filter((t=>{var n;return t!==eV.closed||!(null===(n=e.connections)||void 0===n?void 0:n.some((e=>e!==eV.closed)))}));return C(d({},e),{connections:n})}))}},oJ=(e=y(),t=oZ())=>{let n;n=e.has(L.AD_EXPERIENCE)?o$():oY();let i={actions:d({},oF())};return e.has(L.IS_RUNNING_INSIDE_EMBED)&&t.emit({type:"scene-builder-event",event:oq.SCENE_BUILDER_COMPLETE,data:oQ(n,en(),{endcard:"Playable"})}),[n,i]};const o0=(e=no())=>{let t=e.machineMap.get("ad");if(t)return t.machine;let[n,i]=oJ();return e.createMachine(n,i)};var o1=(e=no())=>e.interpret(o0(e)),o2=function(e,t,n=no()){let i=tD((()=>n.createMachine(e,t)),[e]),r=t8(i.initialState),[a,o]=tD((()=>{let e=n.interpret(i),t=e.subscribe((e=>{r.value=e}));return[e,t]}),[i]);return tf((()=>(a.status!==eA.Running&&a.start(),()=>{o.unsubscribe(),a.stop()})),[a]),[r,a.send,a,e]};(vM=_7||(_7={})).CALL="CALL",vM.DONE="DONE",(vk=_9||(_9={})).IDLE="IDLE",vk.BUSY="BUSY";const o3=e=>({id:`throttle-${e}`,initial:_9.IDLE,context:{},states:{IDLE:{on:{[_7.CALL]:{target:_9.BUSY}}},BUSY:{on:{[_7.DONE]:{target:_9.IDLE}}}}});var o5=()=>document.querySelector("#dynamic");(he||(he={})).CLOSE="vungle.events.request.close";var o4=he,o6=()=>es(),o8=()=>{let e=r.getInstance(),t=aU.getServiceIdentifier();return e.get(t)},o7=(e,t=eZ(),n=en)=>{if(e.getSceneType()===eV.closed)return;let i={name:eP.SCENE_START,scene_id:e.getId(),scene_type:e.getSceneType(),scene_index:n().indexOf(e)};t.emit(i)},o9=(e=o5())=>{let t=o1(),n=t.send,i=t8(t.state),r=o2(o3("ad")),[a,o]=r,s=tD((()=>e=>{[_l.NEXT,_l.LAST_CHANCE_ENDCARD,_l.LAST_CHANCE_ENDCARD_CLOSE].includes(e.type)?a.value.matches(_9.IDLE)&&(o({type:_7.CALL}),n(e),window.setTimeout((()=>{o({type:_7.DONE})}),500)):n(e)}),[r]);return tf((()=>{let e=t.subscribe((e=>{let t=i.value;if(i.value=e,e.changed&&t.value!==e.value){let n=oP(t),i=o8();i.end(n);let r=oP(e);z.setValue({scene:r}),i.start(r),o7(r)}}));return()=>{e.unsubscribe()}}),[t]),tf((()=>{let t=o6(),r=()=>{var e;t.emit({type:"custom-mraid",event:o4.CLOSE,data:d({isVideoState:(null===(e=oP(i.value))||void 0===e?void 0:e.getSceneType())===eV.video,sendAdEvent:n},i.value.context)})};return null==e||e.addEventListener(o4.CLOSE,r),()=>{null==e||e.removeEventListener(o4.CLOSE,r)}}),[e]),[i,s]};const se="close-or-skip-button",st="privacy-drawer",sn="shield-icon";ht="wnLcbW_closeIcon",hn="wnLcbW_fallback";var si=()=>(tf((()=>{nE().getNewTimer(500,(()=>{nR()})).start()}),[]),aQ("div",{id:"app-store-transition-fallback",className:hn,children:aQ("button",{title:"Close","aria-label":"Close",id:se,type:"button",onClick:()=>{nR()},style:ht,children:aQ("div",{className:ht})})})),sr=class extends e7{componentDidCatch(e,t){es().emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:e.message,stack:`Stack trace:\n${e.stack}\n\nError info:\n${JSON.stringify(t)}\n`}}})}render(){let{children:e}=this.props;return e}},sa=class{getConsentTitleText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentTitleText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentTitleText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"Ad-Interaction Data Collection"}getConsentBodyText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentBodyText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentBodyText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"With permission, Liftoff collects your ad-interaction data to serve relevant ads to you. Note: you'll see ads independent of your selection, but they may not be as relevant. Do you consent to data tracking for more relevant ads?"}getConsentAcceptButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentAcceptButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentAcceptButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I consent"}getConsentDenyButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentDenyButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentDenyButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I do not consent"}consentAction(e){var t;null===(t=this.mraidService.getMraidBridgeExt())||void 0===t||t.consentAction(e)}constructor(e=R()){this.mraidService=e}};hi="C4yOdG_bodyText",hr="C4yOdG_buttons",ha="C4yOdG_content",ho="C4yOdG_gdpr",hs="C4yOdG_header",hl="C4yOdG_icon",hd="C4yOdG_primaryButton",hc="C4yOdG_secondaryButton",hu="C4yOdG_title";var so=({sendAdEvent:e=()=>{}})=>{let t=new sa,n=n=>{t.consentAction(n),e({type:_l.NEXT})};return aQ("div",{className:ho,id:"gdpr",children:[aQ("div",{className:ha,children:[aQ("header",{className:hs,children:[aQ("span",{className:hl}),aQ("h3",{id:"gdpr-title",className:hu,children:t.getConsentTitleText()})]}),aQ("p",{id:"gdpr-body-text",className:hi,children:t.getConsentBodyText()})]}),aQ("div",{className:hr,children:[aQ("button",{type:"button",id:"gdpr-accept",className:hd,onClick:()=>n("opted_in"),children:t.getConsentAcceptButtonText()}),aQ("button",{type:"button",id:"gdpr-deny",className:hc,onClick:()=>n("opted_out"),children:t.getConsentDenyButtonText()})]})]})},ss=(e,t)=>{tf((()=>{let n=window.setInterval((()=>{var i;(null===(i=e.current)||void 0===i?void 0:i.complete)&&(t({type:_l.PRIVACY_LOGO_SHOW}),window.clearInterval(n))}),100);return()=>{window.clearInterval(n)}}),[])},sl=(...e)=>e.filter(Boolean).join(" "),sd=class{clickHandler(e){this.reportingService.emit({type:"fsc",event:aK.FSC,data:{ctaUrl:e}})}constructor(e=aj()){this.reportingService=e}};hE="_7pzQ5q_hidden",hv="_7pzQ5q_overlayCta";const sc=tK(!1),su=(e,t)=>{sc.value=t.event===nU.MINIMIZED},sE=e=>e?`${e}-fullscreen-overlay`:"fullscreen-overlay";var sv=({config:e,ctaUrl:t,service:n=new sd,reportingService:i=a9(),children:r})=>(tf((()=>(i.addEventHandler("viewability",su),()=>{i.removeEventHandler("viewability",su)})),[]),aQ(e8,{children:[e.enabled&&aQ("button",{className:sl(hv,sc.value?hE:""),type:"button",id:sE(e.id),"aria-label":"fsc","aria-hidden":sc.value,onClick:()=>n.clickHandler(t)}),r]}));(vU=h_||(h_={})).SHOW="ASOD_SHOW",vU.CLOSE="ASOD_CLOSE",(vB=hh||(hh={})).INITIAL="ASOD_INITIAL",vB.SHOWN="ASOD_SHOWN",(vH=hT||(hT={})).SET_DELAY="ASOD_SET_DELAY",vH.OPEN_APP_STORE="ASOD_OPEN_APP_STORE";var s_=class extends a{fireStoreKitOverlayWithDelay(e){let t=nO();new N(e,(()=>{(null==t?void 0:t.canOpen())&&(null==t||t.open())})).start()}openStoreViewWithDelay(e){if(nP()&&nk())return void this.fireStoreKitOverlayWithDelay(e);let t=nE().getNewTimer(e,(()=>{let e=nL();null==e||e.open(!1)}));t.start(),this.timer=t}reset(){var e;null===(e=this.timer)||void 0===e||e.destroy()}static getServiceIdentifier(){return"AppStoreOnDelayServiceInterface"}},sh=()=>{let e=r.getInstance(),t=s_.getServiceIdentifier();return e.get(t)};const sT=e=>({id:`app-store-on-delay-${e}`,initial:hh.INITIAL,context:{delay:0},states:{[hh.INITIAL]:{on:{[h_.SHOW]:{target:hh.SHOWN,actions:[hT.SET_DELAY]}}},[hh.SHOWN]:{entry:[hT.OPEN_APP_STORE]}}}),sS={actions:{[hT.SET_DELAY]:p({delay:(e,t)=>t.delay}),[hT.OPEN_APP_STORE]:e=>{sh().openStoreViewWithDelay(e.delay)}}};var sp=(e,t,n=!0,i=!0)=>{let[,r]=o2(sT(e),sS);tf((()=>t.enabled&&n&&i?(r({type:h_.SHOW,delay:t.autoShowDelay}),()=>{sh().reset()}):()=>{}),[n,i])},sg=(e,t=!0,n=oW(),i=nO())=>{let r=t8(null==i?void 0:i.canOpen()),a=t8(!1);tf((()=>(e.enabled&&r.value&&t&&!a.value&&(null==n||n.startAutoShow(e),a.value=!0),()=>{})),[t,r.value,a.value]),tf((()=>{e.enabled&&(null==n||n.initializeForComponent((e=>{r.value=e}),10,500))}),[]),tf((()=>a.value?()=>null==n?void 0:n.reset():()=>{}),[])},sC=(e,t,n=nc())=>{let i=t8(e),r=tN(void 0),a=()=>{var e;null==r||null===(e=r.current)||void 0===e||e.destroy(),r.current=void 0};return tf((()=>{var e;void 0===r.current&&(r.current=n.getNewInterval(1e3,(()=>{let e=i.value-1;i.value=e<=0?0:e})),null===(e=r.current)||void 0===e||e.start());return()=>a()}),[]),nr((()=>{0===i.value&&a(),t&&t(i.value)})),i};hS="NQnIja_countdown";var sI=({delay:e,isVisible:t=!0,children:n,handleTimerUpdate:i,showNextButtonDuringCountDownInBackground:r})=>{let a=sC(e,i);if(a.value>0&&r)return aQ("div",{children:n});if(a.value>0&&!t)return aQ("div",{id:"countdown"});if(a.value>0&&t){let e=Math.round(a.value);return 0===e?null:aQ("div",{id:"countdown",className:hS,children:e})}return aQ("div",{children:n})},sO=(e,t,n=es())=>(tf((()=>(n.addEventHandler(e,t),()=>{n.removeEventHandler(e,t)})),[n,e,t]),()=>{n.removeEventHandler(e,t)});const sA=[ef.MREC,ef.BANNER,ef.IN_LINE];var sm=class{placementSupportsNextButton(){return!sA.includes(this.placementTypeService.getPlacementType())}constructor(e=j()){this.placementTypeService=e}},sf=(e=ii())=>e.getActivityEvents().some((e=>e.activity.name===n9.CLICK_URL||e.activity.name===n9.POSTROLL_CLICK)),sN=class{getButtonPadding(e=0,t=10){return sf()?t:Math.min(Math.max(parseInt(this.tokenService.get(L.CLOSE_BUTTON_PADDING),10)||e,e),t)}constructor(e=y()){this.tokenService=e}},sD=(e=o1())=>e.state.context.isTheatreModeActive,sR=(e,t=eo,n=i3(),i=j(),r=nE(),a=o1(),o=a9())=>{let s=tN(null),{scene:l}=z.getValue(),d={type:"theatre-mode-event",event:aN.DISABLE_THEATRE_MODE},c=!i.isFullscreen()||!ay(l)||!l.theatreModeEnabled||n.hasExistingEvent(d),u=()=>{c||n.emit({type:"theatre-mode-event",event:aN.HIDE_CONTROLS})};sO("viewability",(()=>{c||n.emit({type:"theatre-mode-event",event:aN.REVEAL_CONTROLS})}),o),sO("theatre-mode-event",((n,i)=>{c||(i.event===aN.REVEAL_CONTROLS&&(e({type:_l.STOP_THEATRE_MODE}),s.current=r.getNewTimer(t,u),s.current.start()),i.event===aN.HIDE_CONTROLS&&e({type:_l.START_THEATRE_MODE}))}),n),tf((()=>{if(c)return()=>{};let e=()=>{var e;sD(a)&&!l.getFullScreenClickConfig().enabled&&(s.current&&(null===(e=s.current)||void 0===e||e.destroy()),n.emit({type:"theatre-mode-event",event:aN.REVEAL_CONTROLS}))};return document.addEventListener("pointerdown",e),s.current=r.getNewTimer(t,u),s.current.start(),()=>{document.removeEventListener("pointerdown",e),s.current&&s.current.destroy()}}),[])};hp="mqB7Ka_closeIcon",hg="mqB7Ka_skipIcon";var sy=({sendEvent:e=()=>{},type:t=nW.CLOSE,service:n=new sN,showLastChanceEndcard:i=!1,beforeClick:r=()=>{}})=>{let a=t===nW.SKIP?hg:hp,o=t===nW.SKIP?"Skip button":"Close button",s=t8(n.getButtonPadding());tf((()=>{e&&e({type:_l.CLOSE_BUTTON_WILL_SHOW})}),[]),sO("tpat",(()=>{s.value=n.getButtonPadding()}));let l=eo;q(void 0)&&(l=2e3),q(void 0)&&(l=4e3),sR(e,l);let d=-s.value;return aQ("button",{title:o,"aria-label":o,id:se,type:"button",style:{padding:`${s.value}px`,margin:`${d}px`},onClick:t=>{t.stopPropagation(),e({type:_l.CLOSE_BUTTON_CLICK}),r(),e(i?{type:_l.LAST_CHANCE_ENDCARD}:{type:_l.NEXT})},children:aQ("div",{className:a})})};hC="LJWyoG_nextButton";const sL=tK(!0);var sP=({handleTimerUpdate:e,showNextButtonDuringCountDownInBackground:t,sendAdEvent:n,showLastChanceEndcard:i=!1,config:r,beforeClick:a=()=>{}})=>{let{delay:o=0,countdown:s=!0}=r,l=new sm,d=o>0;return sO("viewability",((e,t)=>{sL.value=t.event===nU.MAXIMIZED})),l.placementSupportsNextButton()?aQ("div",{id:i?"last-chance-endcard-next-button":"next-button",className:hC,role:"button",tabIndex:0,"data-countdown-running":sL.value,children:d?aQ(sI,{delay:o,isVisible:s,handleTimerUpdate:e,showNextButtonDuringCountDownInBackground:t,children:aQ(sy,{sendEvent:n,type:r.style,showLastChanceEndcard:i,beforeClick:a})}):aQ(sy,{sendEvent:n,type:r.style,showLastChanceEndcard:i,beforeClick:a})}):null},sw=()=>{let e=r.getInstance(),t=eq.getServiceIdentifier();return e.get(t)},sb=class extends sm{getCloseButtonConfig(){let e=this.scene.getCloseButtonConfig(),t=1===this.scene.index;return C(d({},e),{delay:!t&&this.globalTimerService.isEnabled()?this.globalTimerService.getEndcardPageCloseButtonDelaySeconds():e.delay})}constructor(e,t=sw()){super(),this.scene=e,this.globalTimerService=t}},sV=e=>{let[t]=o2(oV(e),oM);return t};(vW=hI||(hI={})).DOWNLOAD_BUTTON_CTA="DOWNLOAD_BUTTON_CTA",vW.ENDCARD_CTA="ENDCARD_CTA",vW.LAST_CHANCE_ENDCARD_CTA="LAST_CHANCE_ENDCARD_CTA",vW.PERSISTENT_CTA="PERSISTENT_CTA";var sM=hI,sk=class{emitClickEvents(){this.ctaReportingService.emit({type:"cta",event:sM.LAST_CHANCE_ENDCARD_CTA})}constructor(e=es()){this.ctaReportingService=e}};hO="poFP6W_animate",hA="poFP6W_backgroundNone",hm="poFP6W_button",hf="poFP6W_icon",hN="poFP6W_lastChanceEndCard",hD="poFP6W_name",hR="poFP6W_opaque",hy="poFP6W_overlay";const sU=tK(!1);var sB=({config:e,sendAdEvent:t=()=>{},backgroundNone:n=!1,onVisibilityChange:i})=>{var r,a,o,s,l,d,c,u;let E=new sk,v=tN(null),_=sV(e.id);ss(v,t);let h=()=>{sU.value=!0,E.emitClickEvents()};return tf((()=>{i(e.enabled&&!_.value.matches(_2.HIDDEN))}),[e.enabled,_.value]),!e.enabled||_.value.matches(_2.HIDDEN)?null:aQ("div",{className:sl(hy,null!=(null===(r=e.appMeta)||void 0===r?void 0:r.icon)?hR:""),id:"last-chance-endcard-overlay",children:aQ(sv,{config:{enabled:!!(null===(a=e.fsc)||void 0===a?void 0:a.enabled)},children:[aQ(sP,{sendAdEvent:t,config:null!==(u=e.close)&&void 0!==u?u:{},showLastChanceEndcard:!1}),aQ("div",{className:sl(hN,n?hA:""),id:"last-chance-endcard",children:[(null===(o=e.appMeta)||void 0===o?void 0:o.icon)&&aQ("img",{className:hf,ref:v,src:null===(s=e.appMeta)||void 0===s?void 0:s.icon,alt:null===(l=e.appMeta)||void 0===l?void 0:l.name,id:"last-chance-endcard-app-icon",onClick:h,"aria-hidden":"true"}),aQ("p",{className:hD,id:"last-chance-endcard-app-name",onClick:h,"aria-hidden":"true",children:null===(d=e.appMeta)||void 0===d?void 0:d.name}),aQ("button",{type:"button",className:sl(hm,sU.value?"":hO),"data-animate":!sU.value,onClick:h,id:"last-chance-endcard-cta",children:null===(c=e.cta)||void 0===c?void 0:c.text})]})]})})},sH=(e,t=!0)=>{tf((()=>t?(e&&e({type:_l.CLOSE_BUTTON_MOUNT}),()=>{e&&e({type:_l.CLOSE_BUTTON_UNMOUNT})}):()=>{}),[t])},sW=(e=y())=>{var t;return null!==(t=e.get(L.CTA_BUTTON_URL))&&void 0!==t?t:""},sx=class extends a{openCTAWithMraid(){var e;this.url&&(null===(e=this.mraidService.getMraid())||void 0===e||e.open(this.url))}openOverlayView(){var e;null===(e=this.storeKitOverlayService)||void 0===e||e.open()}openProductView(){var e;null===(e=this.productViewService)||void 0===e||e.open()}handleOverlayViewCTA(){var e;this.isStoreKitOverlaySupported?this.openOverlayView():(null===(e=this.productViewService)||void 0===e?void 0:e.canOpen())?this.openProductView():this.openCTAWithMraid()}notifyClickEventToEDsp(){let{isClickEventFromIframe:e,url:t}=this;e&&t&&om(t)}handleProductViewCTA(){var e,t;null!==(e=this.productViewService)&&void 0!==e&&e.isOpen()||(this.shouldReplaceShowStoreKitOverlay?this.openOverlayView():this.appStoreId&&(null===(t=this.productViewService)||void 0===t?void 0:t.canOpen())?(this.openProductView(),this.notifyClickEventToEDsp()):this.openCTAWithMraid())}invoke(e){let{target:t,url:n,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:r}=e;if((void 0===e.fireMMPEvents||e.fireMMPEvents)&&this.injectedFireMMPEvents(),this.url=n||this.ctaButtonUrl,this.shouldReplaceShowStoreKitOverlay=null!=i&&i,this.isClickEventFromIframe=null!=r&&r,this.environmentService.getOperatingSystem()===eR.iOS)switch(t){case eM.OFF:this.openCTAWithMraid();break;case eM.SKO:this.handleOverlayViewCTA();break;case eM.SKPV:default:this.handleProductViewCTA()}else this.openCTAWithMraid()}static getServiceIdentifier(){return"CallToActionServiceInterface"}constructor(e=R(),t=Y(),n=nL(),i=nO(),r=nk(),a=io(),o=sW(),s=ir){super(),this.mraidService=e,this.environmentService=t,this.productViewService=n,this.storeKitOverlayService=i,this.isStoreKitOverlaySupported=r,this.appStoreId=a,this.ctaButtonUrl=o,this.injectedFireMMPEvents=s,this.url="",this.shouldReplaceShowStoreKitOverlay=!1,this.isClickEventFromIframe=!1}},sF=()=>{let e=r.getInstance(),t=sx.getServiceIdentifier();return e.get(t)},sG=({trackingEventMapConfig:e,fullScreenClickConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=sF(),injectedEmitTrackingEvent:a=oL,sceneEventReportingService:o=iz()})=>sO("fsc",(()=>{(null==t?void 0:t.enabled)&&(r.invoke({target:t.target,url:t.ctaUrl,shouldReplaceShowStoreKitOverlay:i}),a(ek.CLICK_THROUGH,n,e),o.emit(iw.CLICK))})),sK=({callToActionConfig:e,trackingEventMapConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=sF(),injectedEmitTrackingEvent:a=oL,sceneEventReportingService:o=iz()})=>sO("cta",((s,l)=>{if(e){var d,c;let{target:s,url:u}=e,E=l.event===sM.ENDCARD_CTA;r.invoke({target:s,url:null!==(c=null===(d=l.data)||void 0===d?void 0:d.ctaUrl)&&void 0!==c?c:u,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:E}),a(ek.CLICK_THROUGH,n,t),o.emit(iw.CLICK)}}));(hL||(hL={})).APP_META_UPDATE="APP_META_UPDATE";var sY=hL,sj=()=>es(),sX=(e,t=!0,n=sj())=>{tf((()=>{var i;t&&e&&"function"==typeof e.getCallToActionConfig&&n.emit({type:"app-meta",event:sY.APP_META_UPDATE,data:null!==(i=e.getCallToActionConfig().appMeta)&&void 0!==i?i:{enabled:!1}})}),[t])},sz=()=>"ontouchstart"in document.documentElement==1?"touchstart":"click";const s$=e=>{let t=document.querySelector(`#${se}`);if(null===t)return!1;let{clientX:n,clientY:i}=e,{top:r,right:a,bottom:o,left:s}=t.getBoundingClientRect();return(n<s&&n>=s-30||n>a&&n<=a+30)&&i>=r-30&&i<=o+30||(i<r&&i>=r-30||i>o&&i<=o+30)&&n>=s-30&&n<=a+30},sZ=e=>{let t=window.innerWidth-75,n=75;return e.clientX>=t&&e.clientY<=n},sq=(e,t=iz())=>{if(void 0===e)return;let n={clientX:"touches"in e?e.touches[0].clientX:e.clientX,clientY:"touches"in e?e.touches[0].clientY:e.clientY};(document.querySelector(`#${se}`)?s$(n):sZ(n))&&t.emit(iw.NEAR_CLOSE_BUTTON_CLICK)},sQ=[er,se,sn,st],sJ=(e,t)=>{if(e instanceof Element){var n;let i=null!==(n=e.getAttribute("id"))&&void 0!==n?n:"";return!t.includes(i)&&("body"===e.tagName.toLowerCase()||sJ(e.parentElement,t))}return!0},s0=(e,t)=>{sJ(e.target,sQ)&&t.emit(iw.CLICK)},s1=(e,t=iz)=>{let n=t();s0(e,n),sq(e,n)};var s2=(e,t=!0,n=s1,i=iz)=>{tf((()=>{if(!t)return()=>{};let e=e=>{n(e,i)};return document.body.addEventListener(sz(),e,!0),()=>{document.body.removeEventListener(sz(),e,!0)}}),[e,t])};hP="J2DrKG_staticImageEndcard";const s3=tK(!1);var s5=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,customClassName:i,useBackgroundImage:r=!1})=>{let a=new sb(e),o=tN(null);return sp(e.getId(),e.getAppStoreOnDelayConfig()),sg(e.getStoreKitOverlayAutoShowConfig()),ss(o,t),sH(t),oy(),sX(e),sG({fullScreenClickConfig:s3.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sK({callToActionConfig:s3.value?e.getLastChanceEndcardConfig().cta:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),tf((()=>{t({type:_l.CREATIVE_VIEW})}),[]),s2(s3.value),aQ(e8,{children:[aQ(sB,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{s3.value=e}}),aQ("div",{className:null!=i?i:hP,style:r?{backgroundImage:`url(${e.url})`}:{},children:aQ(sv,{config:e.getFullScreenClickConfig(),ctaUrl:e.getFullScreenClickConfig().ctaUrl,children:[n&&!s3.value&&aQ(sP,{config:a.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aQ("img",{src:e.url,ref:o,alt:"image",id:e.getId()})]})})]})};(vx=hw||(hw={})).Native="native",vx.Custom="custom",vx.NotSupported="not-supported",(vF=hb||(hb={})).Manifest="manifest",vF.Video="video";var s4=(e=z)=>{let t=e.getValue().scene;return ay(t)?X({startSn:void 0},`FragmentLoadingContext_${null==t?void 0:t.getId()}`):null};class s6 extends window.Hls.DefaultConfig.loader{openAndSendXhr(e,t,n){let i=new aI;this.hasCachedManifest(t,i)?this.loadFromString(i.getCachedManifest(),e,t):this.hasCachedLevel(t,i)?this.loadFromString(i.getCachedFirstTrack(),e,t):super.openAndSendXhr(e,t,n)}load(e,t,n,i=z,r=s4,a=i1()){let{onSuccess:o}=n;super.load(e,t,C(d({},n),{onSuccess:(e,t,n,s)=>{var l,d;o(e,t,n,s);let c=null===(l=n.levelDetails)||void 0===l?void 0:l.startSN;"level"===n.type&&c&&(a.emit({type:"video",event:iq.HLS_LEVEL_PLAYLIST_LOADED,data:{startingSequenceNumber:c}}),null===(d=r(i))||void 0===d||d.setValue({startSn:c}))}}))}hasCachedLevel(e,t=new aI){return"level"===e.type&&0===e.id&&t.hasCachedFirstTrack()}hasCachedManifest(e,t=new aI){return"manifest"===e.type&&t.hasCachedManifest()}loadFromString(e,t,n){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i={url:n.url,data:e,code:200};Promise.resolve().then((()=>{var e;null===(e=this.callbacks)||void 0===e||e.onSuccess(i,this.stats,n,t)}))}}var s8=()=>r.getInstance().get(aG.getServiceIdentifier());class s7 extends window.Hls.DefaultConfig.loader{getLocalFileURL(e,t=s4,n=z){var i,r;let a=new aI,o=Number(e.sn),s=null!==(r=null===(i=t(n))||void 0===i?void 0:i.getValue().startSn)&&void 0!==r?r:1;return a.getCachedVideoSegmentUrls()[o-s]}shouldLoadFromFileURL(e){if("main"!==e.type||"initSegment"===e.sn)return!1;let t=this.getLocalFileURL(e);return(null==t?void 0:t.length)>0&&ag(t)}async load(e,t,n){if(this.shouldLoadFromFileURL(e.frag))e.url=this.getLocalFileURL(e.frag),super.load(e,t,n);else{let i=s8(),r=await i.get(e.url);r?(this.context=e,this.loader={readyState:4,status:200,response:r.data},this.config=t,this.callbacks=n,this.loadedFromCache=!0,this.readystatechange()):super.load(e,t,n)}}readystatechange(){let{context:e,loader:t,stats:n}=this;if(e&&t&&!n.aborted){if(4!==t.readyState)return void super.readystatechange();if(this.shouldLoadFromFileURL(this.context.frag)){if(this.callbacks){let{onProgress:i}=this.callbacks;i&&i(n,e,t.response,t);let r={url:t.responseURL,data:t.response,code:200};Promise.resolve().then((()=>{this.callbacks.onSuccess(r,n,e,t)}))}}else{var i;if((null===(i=t.response)||void 0===i?void 0:i.byteLength)>=0&&!this.loadedFromCache){let n=s8();null==n||n.addRecord({url:e.url,data:new Uint8Array(t.response)})}super.readystatechange()}}}}var s9=e=>"data:application/x-mpegurl;base64,"+btoa(e),le=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length;e+=1)if(n[e].startsWith("#EXT")&&n[e].includes("URI=")){let i=n[e].indexOf("URI="),r=i+4,a=n[e].charAt(r);for(let t=i+5;t<n[e].length&&r===i+4;t+=1)n[e].charAt(t)===a&&(r=t);let o=n[e].substring(i+5,r);if(!o.toLowerCase().startsWith("http")){let a=t.split("/");a.pop(),a.push(o),n[e]=n[e].substring(0,i+5)+a.join("/")+n[e].substring(r)}}return n.join("\n")},lt=(e,t,n)=>{let i=!1,r=e.split("\n"),a=n.split("/");a.pop();for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXT-X-STREAM-INF"))if(i){if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=a.concat(t).join("/")}}else i=!0,r[e+1]=t;return r.join("\n")},ln=(e,t)=>{let n=e.split("\n"),i=t.split("/");i.pop();for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")&&!n[e+1].toLowerCase().startsWith("http")){let t=n[e+1].split("/");n[e+1]=i.concat(t).join("/")}return n.join("\n")},li=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")){if(n[e+1].toLowerCase().startsWith("http"))return n[e+1];let i=t.split("/");return i.pop(),i.push(n[e+1]),i.join("/")}},lr=class{getStreamPlayer(e){if(null===e)return hw.NotSupported;if(window.Hls.isSupported()){let e=this.environmentService.getOperatingSystem(),t=this.environmentService.getSdkVersion();if(e!==eR.iOS||t.isGreaterThanOrEqualTo(new b("7")))return hw.Custom}return""!==e.canPlayType(this.hlsMediaType)?hw.Native:hw.NotSupported}async loadHls(e,t){let n=new window.Hls({maxLoadingDelay:4,maxStarvationDelay:4,pLoader:s6,fLoader:s7,debug:!1});this.onFragLoaded(n),n.loadSource(e),n.attachMedia(t)}async getHlsManifest(e){if(!this.streamPunkService.hasCachedStreamChunks()&&!this.streamPunkService.hasCachedFirstTrack())return this.streamPunkService.hasCachedManifest()?s9(ln(this.streamPunkService.getCachedManifest(),e)):e;try{let t;if(this.streamPunkService.hasCachedManifest())t=this.streamPunkService.getCachedManifest();else{let n=await this.getManifest(e);if(void 0===n)return e;t=await n.text()}let n=li(t,e);if(!n){let n=this.updateStream(t,e);return s9(n)}try{let i;if(this.streamPunkService.hasCachedFirstTrack())i=this.streamPunkService.getCachedFirstTrack();else{let t=await this.getVideo(n);if(void 0===t)return e;i=await t.text()}let r=this.updateStream(i,n),a=s9(r),o=lt(t,a,n),s=le(o,e);return s9(s)}catch(t){return this.handleStreamError(t,n,hb.Video),e}}catch(t){return this.handleStreamError(t,e,hb.Manifest),e}}insertCachedVideoSegments(e,t){let n=this.streamPunkService.getCachedVideoSegmentUrls().reverse(),i=t.split("/");i.pop();let r=e.split("\n");for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXTINF"))if(n.length>0)r[e+1]=n.pop();else if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=i.concat(t).join("/")}return r.join("\n")}updateStream(e,t){return le(this.insertCachedVideoSegments(e,t),t)}handleStreamError(e,t,n){var i;this.errorLoggingService.emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:e instanceof TypeError||e.message.includes("ailed to fetch")||(null===(i=e.message)||void 0===i?void 0:i.includes("ross-origin"))?`CORS issue prevented HLS ${n} cache optimization from ${t}`:`Failed to download HLS ${n} from ${t}: ${e.message}`}}})}async getStream(e,t){let n=await window.fetch(e);if(n.ok||0===n.status)return n;this.errorLoggingService.emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:`Network ${n.status} while loading HLS ${t}: ${e}`}}})}getManifest(e){return this.getStream(e,hb.Manifest)}getVideo(e){return this.getStream(e,hb.Video)}getBandwidthEstimate(e,t,n){if(!(!1===Number.isFinite(e)||e<=0||e>419430400||t<50||Number.isNaN(n)))return Math.round(n/8/1024)}onFragLoaded(e){e.on(window.Hls.Events.FRAG_LOADED,((t,n)=>{if("main"===n.frag.type){var i;let t=n.frag.stats.bwEstimate,r=n.frag.stats.loading.end-n.frag.stats.loading.start,a=e.bandwidthEstimate,o=null===(i=z.getValue().scene)||void 0===i?void 0:i.getId(),s=this.getBandwidthEstimate(t,r,a);o&&s&&this.videoReportingService.emit({type:"video",event:iq.BANDWIDTH_ESTIMATION,data:{scene_id:o,bwe:s}})}}))}constructor(e=Y(),t=iv(),n=i1(),i=new aI){this.environmentService=e,this.errorLoggingService=t,this.videoReportingService=n,this.streamPunkService=i,this.hlsMediaType="application/vnd.apple.mpegurl"}},la=class{monitorVideoHealth(e,t,n){var i;n&&(null!=(null===(i=this.videoMonitorTimer)||void 0===i?void 0:i.getId())&&this.videoMonitorTimer.destroy(),this.videoMonitorTimer=this.timerService.getNewTimer(3e4,(()=>{!e.value.matches(_Y.AUTO_PLAY_FAIL)&&(e.value.context.canPlay&&e.value.context.currentTime>=0||t(F))})),this.videoMonitorTimer.start())}startStreamingVideo(e,t,n,i=new lr(this.environmentService,this.errorLoggingService,this.videoReportingService)){switch(e.setAttribute("type","application/x-mpegURL"),i.getStreamPlayer(e)){case hw.Custom:i.loadHls(t,e);break;case hw.Native:e.setAttribute("src",t),e.load();break;default:this.observabilityReportingService.emit(eP.HLS_NOT_SUPPORTED),n({type:_l.NEXT})}}getMutedSignal(){return this.muteService.getMutedSignal()}constructor(e=nE(),t=Y(),n=iv(),i=eZ(),r=ou(),a=i1()){this.timerService=e,this.environmentService=t,this.errorLoggingService=n,this.observabilityReportingService=i,this.muteService=r,this.videoReportingService=a}},lo=class extends op{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0;let i=JSON.parse(window.atob(this.rawOmsdkData));if(!i.vendorURL||!i.vendorKey)return;super.init(this.videoElement,i),null===(e=this.adSession)||void 0===e||e.setCreativeType(og.VIDEO),null===(t=this.adSession)||void 0===t||t.setImpressionType(oC.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){es().emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:"Unable to init omsdk video"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&this.duration&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,this.isSkippable=!ei(this.duration),this.vastProperties=new this.sessionClient.VastProperties(this.isSkippable,0,!0,"preroll"),null===(t=this.adEvents)||void 0===t||t.loaded(this.vastProperties),this.eventDrain())}onSessionChange(e){if(e.type===oI.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();if(e.type===oI.SESSION_FINISH){let e=es();e.emit({type:"video",event:_q.REMOVE_HANDLER}),e.emit({type:"cta",event:_q.REMOVE_HANDLER})}}onVideoCheckpoint(){let{currentTime:e,duration:t,muted:n}=this.videoElement;this.pushOrCallFunction((()=>{var i;this.isBuffering&&(this.isBuffering=!1,null===(i=this.mediaEvents)||void 0===i||i.bufferFinish());let r=i0(e,t);if(e>0&&this.mediaEvents){for(let e=this.checkpointsReached.length;e<=r;e+=1)switch(this.checkpointsReached[e]=!0,e){case 0:this.volume=n?0:1,this.mediaEvents.start(t,this.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}}}))}onVideoTimeUpdate(){this.onSessionStarted()}onSoundChange(e){this.pushOrCallFunction((()=>{var t;this.volume="mute"===e?0:1,null===(t=this.mediaEvents)||void 0===t||t.volumeChange(this.volume)}))}onVideoBuffering(){this.isBuffering||(this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.bufferStart()})),this.isBuffering=!0)}onVideoStateChanged(e){this.pushOrCallFunction((()=>{var t,n;if(this.checkpointsReached[0]){if("pause"===e)return void(null===(n=this.mediaEvents)||void 0===n||n.pause());null===(t=this.mediaEvents)||void 0===t||t.resume()}}))}onVideoDisplayState(e){let{duration:t}=this.videoElement;!this.isVideoReady&&t>0&&(this.isVideoReady=!0,this.pushOrCallFunction((()=>{var t;null===(t=this.mediaEvents)||void 0===t||t.playerStateChange(e)})))}onVideoMetadataAvailable(e){this.duration=e,this.onSessionStarted()}onVideoPageClose(){this.pushOrCallFunction((()=>{var e;this.isSkippable&&(null===(e=this.mediaEvents)||void 0===e||e.skipped())}))}static getServiceIdentifier(){return"OmsdkVideoServiceInterface"}constructor(e,t){super(),this.videoElement=e,this.rawOmsdkData=t,this.checkpointsReached=[],this.volume=0,this.vastProperties=null,this.isBuffering=!1,this.isSkippable=!1,this.isVideoReady=!1,this.videoElement=e,this.init()}};const ls=()=>y().has(L.OM_SDK_DATA)&&oT();var ll=e=>{if(ls()){var t;let n=null!==(t=y().get(L.OM_SDK_DATA))&&void 0!==t?t:"";r.getInstance().bind(lo.getServiceIdentifier(),new lo(e,n))}};(vG=hV||(hV={})).SHOWING="SHOWING",vG.HIDDEN="HIDDEN",(vK=hM||(hM={})).SHOW="SHOW",vK.HIDE="HIDE",vK.CLOSE="CLOSE",(vY=hk||(hk={})).PAUSE_VIDEO="pauseVideo",vY.PLAY_VIDEO="playVideo",vY.FORFEIT_REWARD="forfeitReward";const ld="incentivized-dialog",lc=()=>({id:ld,initial:hV.HIDDEN,context:{},states:{[hV.HIDDEN]:{on:{[hM.SHOW]:{target:hV.SHOWING,actions:[hk.PAUSE_VIDEO,_d.PAUSE_INTERVALS,_c.STANDBY_TIMERS]}}},[hV.SHOWING]:{on:{[hM.HIDE]:{target:hV.HIDDEN,actions:[hk.PLAY_VIDEO,_d.START_INTERVALS,_c.WAKE_TIMERS]},[hM.CLOSE]:{target:hV.HIDDEN,actions:[hk.FORFEIT_REWARD,_d.START_INTERVALS,_c.WAKE_TIMERS]}}}}}),lu={actions:d({},nv(),{pauseVideo:()=>{let e=oc();null==e||e.send({type:_K.PAUSE})},playVideo:()=>{let e=oc();null==e||e.send({type:_K.PLAY})},forfeitReward:()=>{es().emit({type:"incentivized-event",event:nx.FORFEIT_REWARD,fireOnlyOnce:!0}),eZ().emit(eP.FORFEIT_REWARD)}},nu())};var lE=e=>(null!=e?e:no()).interpreterMap.get(ld),lv=(e,t,n=$(),i=oc(),r=o1(),a=lE())=>{if(!ay(n))return;let o=!1;r.state.context.isPrivacyDrawerOpen&&(o=!0),(null==a?void 0:a.state.value)===hV.SHOWING&&(o=!0),t.event!==nU.MAXIMIZED||o?t.event===nU.MINIMIZED&&(null==i||i.send({type:_K.MINIMIZE})):null==i||i.send({type:_K.MAXIMIZE,hasHlsVideo:n.videoType===_W.HLS})},l_=(e=j())=>!e.isBanner();hU="S2LOeW_icon",hB="S2LOeW_muted",hH="S2LOeW_unmuted";const lh={marginLeft:"0px",marginTop:"0px"},lT=tK(lh);var lS=({sendAdEvent:e,isMuted:t,isVisible:n,videoPlayerHeight:i})=>{let r=()=>{if(!n)return;let e=document.querySelector("video");if(!e)return;let t=d({},lh),{videoWidth:i,videoHeight:r}=e,{clientWidth:a,clientHeight:o}=null==e?void 0:e.parentElement,s=i/r;a/o>s?t.marginLeft=(a-o*s)/2+"px":t.marginTop=(o-a/s)/2+"px",lT.value=t};return tf((()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}))),tf((()=>{r()}),[n,i]),n?aQ("button",{type:"button",className:t?hB:hH,id:er,title:t?"Unmute":"Mute","aria-label":"Mute button",style:lT.value,onClick:()=>{e({type:t?_l.UNMUTE:_l.MUTE})},children:aQ("span",{className:hU})}):null};hW="OaF7uW_paused",hx="OaF7uW_videoProgress";var lp=({value:e,duration:t,progressBarConfig:{show:n,color:i},paused:r})=>n?aQ("div",{role:"progressbar",title:"Video progress",className:hx,"aria-label":"Video progress",children:aQ("span",{className:!r&&e>0?"":hW,style:{backgroundColor:i,animationDuration:`${t}s`},id:"video-progress-bar"})}):null,lg=e=>!!e.next&&e.next.getSceneType()!==eV.closed;const lC=tK(!0);var lI=function(e,t=i3()){return n=>{let i={opacity:lC.value?1:0,transition:"opacity 0.5s ease",pointerEvents:lC.value?"auto":"none"};return sO("theatre-mode-event",((e,n)=>{t.hasExistingEvent({type:"theatre-mode-event",event:aN.DISABLE_THEATRE_MODE})?lC.value=!0:n.event===aN.HIDE_CONTROLS?lC.value=!1:n.event===aN.REVEAL_CONTROLS&&(lC.value=!0)}),t),aQ("div",{style:i,children:aQ(e,d({},n))})}};hF="ok_seq_videoPlayer",hG="ok_seq_videoPlayerWrap";var lO=({sendVideoEvent:e,sendAdEvent:t,videoState:n,scene:i,onMetadataLoaded:r,theatreModeReportingService:a})=>{var o;let s=tD((()=>lI(lS,a)),[a]),l=tD((()=>lI(lp,a)),[a]),d=new la,c=new lr,u=tD((()=>a9()),[]),{url:E}=i,v=tN(null),_=tN(null),h=tN(null),T=t8(0),S=t8(E),p=d.getMutedSignal(),g=t8(""),C=t=>{e({type:t,eventTarget:v.current,url:S.value})},I=()=>{C(_K.CAN_PLAY),t({type:_l.PRIVACY_LOGO_SHOW})},O=e=>{t({type:_l.VIDEO_ERROR,error:Error(e),videoUrl:S.value}),t({type:_l.VIDEO_FAILURE})},A=()=>{setTimeout((()=>{v.current&&(v.current.muted=p.value)}),100)},f=()=>{let e=nE();_.current=e.getNewTimer(1e4,(()=>{n.value.value!==_Y.AUTO_PLAY_FAIL&&(!n.value.context.canPlay||n.value.context.currentTime<=0)&&O(x)})),_.current.start()};return tf((()=>{var r,o,s;switch(n.value.value){case _Y.PLAYING:null===(o=_.current)||void 0===o||null===(r=o.destroy)||void 0===r||r.call(o),(()=>{var t;let i=null===(t=v.current)||void 0===t?void 0:t.play();i?i.then(A).catch((t=>{let n=t.name.toLowerCase();"notallowederror"===n?e({type:_K.AUTO_PLAY_FAIL}):"aborterror"===n||O(G)})):window.setTimeout((()=>{var t;n.value.value===_Y.PLAYING&&0===(null===(t=document.getElementsByTagName("video")[0])||void 0===t?void 0:t.currentTime)&&e({type:_K.AUTO_PLAY_FAIL})}),2500)})();break;case _Y.LOAD_FAIL_RETRY:(()=>{e({type:_K.RETRY});let t=i.originalVideoUrl;t&&t!==S.value?S.value=t:O(W)})();break;case _Y.PAUSED:null===(s=v.current)||void 0===s||s.pause();break;case _Y.ENDED:if(i.loopVideo){if(e({type:_K.PLAY}),sD()){let e=nO();null==a||a.emit({type:"theatre-mode-event",event:aN.REVEAL_CONTROLS}),(null==e?void 0:e.canOpen())&&i.storeKitOverlayAutoShowConfig.enabled&&(null==e||e.open())}}else{let n=i.getLastChanceEndcardConfig().enabled;e({type:_K.CLOSE}),t(n?{type:_l.LAST_CHANCE_ENDCARD}:{type:_l.COMPLETE})}}}),[n.value.value]),nr((()=>{v.current&&S.value&&(ll(v.current),v.current.setAttribute("muted","true"),i.videoType===_W.PROGRESSIVE&&(e=>{v.current&&e&&(v.current.setAttribute("src",e),v.current.load(),lg(i)?f():d.monitorVideoHealth(n,O,v.current))})(S.value))})),nr((()=>{let e=c.getStreamPlayer(v.current);if(S.value&&i.videoType===_W.HLS&&e!==hw.NotSupported){let t=async()=>{e===hw.Native?g.value=await c.getHlsManifest(S.value):g.value=S.value};lg(i)?f():d.monitorVideoHealth(n,O,v.current),t()}})),nr((()=>{""!==g.value&&(null==v?void 0:v.current)&&d.startStreamingVideo(v.current,g.value,t)})),nr((()=>{var e,t;v.current&&(null===(e=(t=n.value).matches)||void 0===e?void 0:e.call(t,_Y.PLAYING))&&!v.current.paused&&!v.current.ended&&(v.current.muted=p.value)})),tf((()=>(u.addEventHandler("viewability",lv),()=>{u.removeEventHandler("viewability",lv)})),[e,u]),tf((()=>{let e=t=>{v.current&&(v.current.readyState>2?I():nE().getNewTimer(t,(()=>{e(t)})).start())};e(200)}),[]),aQ("div",{className:sl(hG,"videoPlayer"),ref:h,id:i.getId(),children:[aQ(s,{sendAdEvent:t,isMuted:p.value,isVisible:n.value.context.canPlay&&l_(),videoPlayerHeight:null===(o=h.current)||void 0===o?void 0:o.clientHeight}),aQ("video",{title:"Video player",id:"video-player",ref:v,muted:!0,playsInline:!0,className:hF,poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAd0SU1FB+YHDAoSGnw+PegAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTEyVDEwOjE4OjI2KzA4OjAww+Ou8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0xMlQxMDoxODoyNiswODowMLK+Fk8AAAAASUVORK5CYII=",onError:()=>{S.value===E?C(_K.LOAD_FAIL):O(B)},onDurationChange:()=>{C(_K.DURATION_CHANGE)},onWaiting:()=>{C(_K.WAITING)},onSuspend:()=>{C(_K.SUSPEND)},onCanPlay:I,onCanPlayThrough:()=>{i1().emit({type:"video",event:iq.CAN_PLAY_THROUGH})},onTimeUpdate:t=>{let{target:i}=t,r=n.value.value!==_Y.PLAYING;Number.isNaN(i.duration)||0===i.duration||i.seeking||r||(T.value=i.currentTime,e({eventTarget:i,type:_K.TIME_UPDATE}))},onEnded:()=>{T.value=0,e({type:_K.END})},onSeeking:e=>{let t=e.target,n=t.currentTime-T.value;!(t.readyState<3)&&Math.abs(n)>3&&(t.currentTime=T.value)},"data-loop-count":n.value.context.loopCount,"data-scene-id":i.getId(),disableRemotePlayback:!0,onLoadedMetadata:()=>{null==r||r()}}),aQ(l,{value:n.value.context.progress,duration:n.value.context.duration,paused:n.value.value===_Y.PAUSED,progressBarConfig:i.getProgressBarConfig()})]})},lA=(e,t=Y())=>{var n;let i=t.getOperatingSystem();if(i===eR.Android)return!!(null!==(n=null==e?void 0:e.filter)&&void 0!==n?n:null==e?void 0:e.webkitFilter);if(i===eR.iOS){let e=document.createElement("div");if("webkitFilter"in e.style||"filter"in e.style)return!0}return!1};hK="RypQCq_videoBlurWrap";var lm=({isInLine:e=!1})=>{var t,n,i,r;let a=tN(null),o=tN(null),s=tN(),l=tN(),d=t8(!1),c=t8(window.document.body.clientWidth),u=t8(window.document.body.clientHeight),E=t8(0),v=t8(0),_=t8(0),h=t8(0),T=null===(t=oc())||void 0===t?void 0:t.state.context.videoElement,S=null===(n=oc())||void 0===n?void 0:n.state.context.canPlay,p=null===(i=oc())||void 0===i?void 0:i.state.context.videoWidth,g=null===(r=oc())||void 0===r?void 0:r.state.context.videoHeight,C=()=>{var e,t;a.current&&(c.value=null===(e=a.current)||void 0===e?void 0:e.clientWidth,u.value=null===(t=a.current)||void 0===t?void 0:t.clientHeight)},I=()=>{if(!T)return;let t=T.videoHeight>T.videoWidth;d.value=(e||t)&&!!T&&(!!e||T.videoWidth/T.videoHeight<c.value/u.value)&&lA(s.current)},O=()=>{C(),(()=>{var e;null===(e=s.current)||void 0===e||e.clearRect(0,0,_.value,h.value)})(),I()};return tf((()=>{T&&(E.value=T.clientHeight,v.value=T.clientWidth),I()}),[null==T?void 0:T.clientHeight,null==T?void 0:T.clientWidth,s.current]),tf((()=>{if(S){window.addEventListener("resize",O),C(),(()=>{if(o.current&&c&&u&&p&&g&&u){var e;let t=p/c.value,n=g/u.value,i=p/g<c.value/u.value?t:n,r=Math.floor(Number(p/i)),a=Math.floor(Number(g/i));s.current=null===(e=o.current)||void 0===e?void 0:e.getContext("2d"),_.value=r,h.value=a}})();let e=nc();l.current=e.getNewInterval(60,(()=>{d.value&&s.current&&s.current.drawImage(T,0,0,_.value,h.value)})),l.current.start()}return()=>{var e;window.removeEventListener("resize",O),null===(e=l.current)||void 0===e||e.destroy()}}),[S]),aQ("div",{id:"video-blur",ref:a,className:hK,children:aQ("canvas",{id:"video-blur-canvas",ref:o,width:_,height:h})})};hY="dDtiqq_tapToPlayContainer",hj="dDtiqq_tapToPlayIcon",hX="dDtiqq_tapToPlayMask",hz="dDtiqq_tapToPlayText";var lf=({isVisible:e,sendVideoEvent:t})=>e?aQ("div",{role:"none",className:hX,onClick:()=>{var e;null===(e=document.getElementsByTagName("video")[0])||void 0===e||e.play(),t({type:_K.PLAY})},id:"tap-to-play",title:"tap-to-play",children:aQ("div",{className:hY,children:[aQ("div",{className:hj}),aQ("div",{className:hz,children:"Tap to play"})]})}):null;h$="Zz6y0G_download",hZ="Zz6y0G_downloadIcon";const lN=e=>{e.emit({type:"cta",event:sM.DOWNLOAD_BUTTON_CTA})};var lD=({callToActionReportingService:e})=>aQ("button",{className:h$,"aria-label":"cta",id:"download-button",type:"button",onClick:()=>{lN(e)},children:aQ("span",{className:hZ})}),lR=({id:e="star",index:t=0,size:n,offset:i=100})=>{let r=`${e}-gradient-${t}`;return aQ("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 100 100",children:[aQ("defs",{children:aQ("linearGradient",{id:r,x1:"0",x2:"100%",y1:"0",y2:"0",children:[aQ("stop",{offset:"0%","stop-color":"#ffd055"}),aQ("stop",{offset:`${i}%`,"stop-color":"#ffd055"}),aQ("stop",{offset:`${i}%`,"stop-color":"#ddd"})]})}),aQ("path",{d:"M50,0,64.69463130731182,29.774575140626315,97.55282581475768,34.54915028125263,73.77641290737884,57.72542485937368,79.38926261462366,90.45084971874736,50,75,20.61073738537635,90.45084971874738,26.223587092621162,57.72542485937369,2.447174185242318,34.549150281252636,35.30536869268816,29.774575140626318Z",fill:`url(#${r})`,"stroke-linejoin":"round","stroke-linecap":"round"})]})},ly=class{getOffsetPercent(e,t){let n=Math.floor(t);return e<n?100:e>n?0:Math.ceil(t%1*100/this.unitValue)*this.unitValue}constructor(){this.unitValue=10}};const lL=12,lP=5,lw=0;var lb=({id:e,size:t=12,count:n=5,value:i=0})=>{let r=[],a=new ly;for(let o=0;o<n;o+=1){let n=a.getOffsetPercent(o,i);r.push(aQ(lR,{id:e,index:o,size:t,offset:n},o))}return aQ("span",{id:e,children:r})},lV=class{getVideoComputedHeight(){let e=oc(),t=null==e?void 0:e.state.context.videoElement;if(!t)return 0;let n=t.videoWidth/t.videoHeight;return parseFloat(window.getComputedStyle(t).getPropertyValue("width"))/n}updateScreenshotsHeight(e){if(!e.current)return;let t=this.getVideoComputedHeight();if(0===t)return;let n=window.innerHeight-t-120;n>=100?e.current.style.height=`${n}px`:e.current.style.display="none"}handleClick(e,t,n){let i=e.target;if(n.some((e=>null!==i.closest(`#${e}`))))return this.ctaReportingService.emit({type:"cta",event:sM.PERSISTENT_CTA}),void this.sceneEventReportingService.emit(iw.CTA_BUTTON_CLICK);t.enabled&&this.fullCtaReportingService.emit({type:"fsc",event:aK.FSC})}constructor(e=y(),t=aY(),n=aj(),i=iz()){this.tokenService=e,this.ctaReportingService=t,this.fullCtaReportingService=n,this.sceneEventReportingService=i}};hq="UUyEIq_appDetail",hQ="UUyEIq_appIcon",hJ="UUyEIq_persistentSimpleCta",h0="UUyEIq_persistentSimpleCtaBtn",h1="UUyEIq_slideIn";const lM=tK(!1);var lk=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n,i,r,a;return tf((()=>{nE().getNewTimer(t.delay,(()=>{lM.value=!0,iz().emit(iw.CTA_BUTTON_SHOW)})).start()}),[]),aQ("div",{id:"persistent-simple-cta",className:sl(hJ,lM.value?h1:""),"aria-hidden":"true",onClick:t=>{(new lV).handleClick(t,e,["persistent-simple-cta-app-name","persistent-simple-cta-app-icon","persistent-simple-cta-app-company","persistent-simple-cta-app-rating","persistent-simple-cta-button"])},children:[(null===(n=t.appMeta)||void 0===n?void 0:n.icon)&&aQ("img",{className:hQ,id:"persistent-simple-cta-app-icon",alt:"app-icon",src:t.appMeta.icon}),((null===(i=t.appMeta)||void 0===i?void 0:i.name)||(null===(r=t.appMeta)||void 0===r?void 0:r.company))&&aQ("div",{className:hq,id:"persistent-simple-cta-app-detail",children:[t.appMeta.name&&aQ("h1",{id:"persistent-simple-cta-app-name",children:t.appMeta.name}),t.appMeta.company&&aQ("h2",{id:"persistent-simple-cta-app-company",children:t.appMeta.company}),t.appMeta.isRatingGreaterThanMinimum&&aQ(lb,{value:t.appMeta.rating,id:"persistent-simple-cta-app-rating"})]}),aQ("button",{className:h0,style:(null===(a=t.background)||void 0===a?void 0:a.color)?{backgroundColor:t.background.color}:{},type:"button",id:"persistent-simple-cta-button",children:t.text})]})};h2="DwKKSa_appIcon",h3="DwKKSa_appInfo",h5="DwKKSa_persistentRichCta",h4="DwKKSa_persistentRichCtaBtn";var lU=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n,i,r,a,o,s,l,d;tf((()=>{let e=document.createElement("style");return e.textContent="\n    .videoPlayer {\n      width: 100%;\n      height: auto;\n      margin-top: 120px;\n    }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),tf((()=>{iz().emit(iw.CTA_BUTTON_SHOW)}),[]);let c=null===(n=t.appMeta)||void 0===n?void 0:n.isRatingGreaterThanMinimum;return aQ("div",{id:"persistent-rich-cta",className:h5,onClick:t=>{(new lV).handleClick(t,e,["persistent-rich-cta-app-name","persistent-rich-cta-app-icon","persistent-rich-cta-company-name","persistent-rich-cta-app-rating","persistent-rich-cta-button"])},"aria-hidden":"true",children:[(null===(i=t.appMeta)||void 0===i?void 0:i.icon)&&aQ("img",{className:h2,alt:"app-icon",id:"persistent-rich-cta-app-icon",src:null===(r=t.appMeta)||void 0===r?void 0:r.icon}),aQ("div",{className:h3,children:[(null===(a=t.appMeta)||void 0===a?void 0:a.name)&&aQ("h1",{id:"persistent-rich-cta-app-name",children:null===(o=t.appMeta)||void 0===o?void 0:o.name}),c&&aQ(lb,{value:null===(s=t.appMeta)||void 0===s?void 0:s.rating,id:"persistent-rich-cta-app-rating"}),!c&&aQ("p",{id:"persistent-rich-cta-company-name",children:null===(l=t.appMeta)||void 0===l?void 0:l.company}),aQ("button",{className:h4,type:"button",style:(null===(d=t.background)||void 0===d?void 0:d.color)?{backgroundColor:t.background.color}:{},id:"persistent-rich-cta-button",children:t.text})]})]})};h6="dalDea_persistentRichCtaScreenshots",h8="dalDea_slide";const lB=e=>{e.enabled?aj().emit({type:"fsc",event:aK.FSC}):aY().emit({type:"cta",event:sM.PERSISTENT_CTA})};var lH=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n;let i=new lV,r=tN(null);tf((()=>{i.updateScreenshotsHeight(r)}),[window.innerHeight,window.innerWidth]);let a=null===(n=t.appMeta)||void 0===n?void 0:n.screenshots;return a&&0!==a.length?aQ("div",{id:"persistent-rich-cta-screenshots",ref:r,className:h6,onClick:()=>lB(e),"aria-hidden":"true",children:a.map((e=>e&&aQ("div",{className:h8,children:aQ("img",{alt:e,src:e})},e)))}):null},lW=({videoOrientation:e,viewportOrientation:t,scene:n,disableRichCta:i=!1})=>{var r,a;return e===_G.UNKNOWN?null:!i&&e===_G.LANDSCAPE&&t===ey.PORTRAIT&&(null!==(a=null===(r=n.getCallToActionConfig().appMeta)||void 0===r?void 0:r.screenshots)&&void 0!==a?a:[]).length>0?aQ(e8,{children:[aQ(lU,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()}),aQ(lH,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})]}):aQ(lk,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})};(vj=h7||(h7={})).PERCENTAGE="percentage",vj.ABSOLUTE="absolute";const lx=e=>{let t,n,i;return e.includes("_")?[t,n,i]=e.split("_"):e.includes(":")?[t,n,i]=e.split(":"):(t=e.substring(0,2),n=e.substring(2,2),i=e.substring(4,2)),3600*Number(t)+60*Number(n)+Number(i)},lF=e=>e.endsWith("p")?Number(e.replace("p","")):e.endsWith("%")?Number(e.replace("%","")):Number(e),lG=e=>e.endsWith("p")||e.endsWith("%")?"percentage":"absolute",lK=e=>{let t=r.getInstance(),n=t.has(e)?t.get(e):void 0;if(n)return n;let i=e.split(";").filter((e=>e&&""!==e));return i&&0!==i.length?(n=i.map((e=>{let t=e.split(".")[1],n=lG(t);return{type:n,tpat_event:e,value:"percentage"===n?lF(t):lx(t)}})),t.bind(e,n),n):[]};var lY=(e,t)=>{let n=y();t.event===iq.PROGRESS&&n.has(L.TPAT_PROGRESS_EVENTS)&&lK(n.get(L.TPAT_PROGRESS_EVENTS)).forEach((n=>{var i,r;if((null===(i=t.data)||void 0===i?void 0:i.currentTime)&&(null===(r=t.data)||void 0===r?void 0:r.duration)){let{currentTime:i,duration:r}=t.data,a=Math.floor(i/r*100),o=Math.floor(i);("percentage"===n.type&&a>=n.value||"absolute"===n.type&&n.value<=r&&o>=n.value)&&e.emit({type:"tpat",event:n.tpat_event,fireOnlyOnce:!0})}}))};const lj=tK(0);var lX=(e=sw())=>{let t=e.isEnabled();return nr((()=>{t&&e.setTotalDelaySecondsConsumed(lj.value)})),n=>{t&&(lj.value=e.getTotalCloseButtonDelaySeconds()-n)}};const lz=[n9.CHECKPOINT_0,n9.CHECKPOINT_25,n9.CHECKPOINT_50,n9.CHECKPOINT_75,n9.CHECKPOINT_100],l$=(e,t)=>lz[i0(e,t)],lZ=(e,t=es())=>{let n=[];return lz.slice(0,e).forEach((e=>{t.hasExistingEvent({type:"tpat",event:e})||n.push(e)})),n};var lq=(e,t,n,i=ii())=>{let r=l$(e,t);lZ(i0(e,t)).forEach((r=>{i.emit(r,!0,{progress:n,currentTime:e,duration:t})})),i.emit(r,!0,{progress:n,currentTime:e,duration:t})},lQ=(e,t,n,i=of())=>{if((null==n?void 0:n.getSceneType())!==eV.video)return;let r=[ek.START,ek.FIRST_QUARTILE,ek.MIDPOINT,ek.THIRD_QUARTILE,ek.COMPLETE][i0(e,t)];r&&oL(r,n.getId(),n.getTrackingEventMapConfig(),!0,i)};const lJ=e=>({id:e.getId(),initial:_Y.LOADING,context:{currentTime:0,duration:0,progress:0,videoHeight:0,videoWidth:0,videoElement:null,canPlay:!1,loopCount:0,orientation:_G.UNKNOWN},states:{[_Y.LOADING]:{entry:_j.EMIT_LOAD,on:{[_K.LOAD_FAIL]:{target:_Y.LOAD_FAIL_RETRY},[_K.CAN_PLAY]:{target:_Y.PLAYING,actions:[_j.SET_CAN_PLAY,_j.REPORT_VIDEO_START]},[_K.PAUSE]:_Y.PAUSED,[_K.DURATION_CHANGE]:{actions:_j.EMIT_DURATION_CHANGE},[_K.WAITING]:{actions:_j.EMIT_WAITING},[_K.SUSPEND]:{actions:_j.EMIT_SUSPEND}}},[_Y.LOAD_FAIL_RETRY]:{on:{[_K.RETRY]:_Y.LOADING}},[_Y.PLAYING]:{entry:_j.EMIT_PLAY,on:{[_K.MINIMIZE]:{target:_Y.PAUSED,actions:[_j.UPDATE_CURRENT_TIME]},[_K.PAUSE]:_Y.PAUSED,[_K.END]:_Y.ENDED,[_K.AUTO_PLAY_FAIL]:_Y.AUTO_PLAY_FAIL,[_K.TIME_UPDATE]:{actions:[_j.UPDATE_PROGRESS,_j.EMIT_PROGRESS,_j.EMIT_CHECKPOINT_TPAT_EVENT,_j.EMIT_SCENE_EVENT,_j.EMIT_TIME_UPDATE]},[_K.SUSPEND]:{actions:_j.EMIT_SUSPEND},[_K.WAITING]:{actions:_j.EMIT_WAITING},[_K.CLOSE]:{target:_Y.FINAL,actions:_j.EMIT_CLOSE}}},[_Y.PAUSED]:{entry:_j.EMIT_PAUSE,on:{[_K.MINIMIZE]:{actions:[_j.UPDATE_CURRENT_TIME]},[_K.CAN_PLAY]:{actions:_j.SET_CAN_PLAY},[_K.MAXIMIZE]:{target:_Y.PLAYING,actions:[_j.RESET_CURRENT_TIME]},[_K.PLAY]:_Y.PLAYING,[_K.TIME_UPDATE]:{actions:[_j.UPDATE_PROGRESS,_j.EMIT_PROGRESS,_j.EMIT_CHECKPOINT_TPAT_EVENT,_j.EMIT_SCENE_EVENT]},[_K.AUTO_PLAY_FAIL]:_Y.AUTO_PLAY_FAIL,[_K.CLOSE]:{target:_Y.FINAL,actions:_j.EMIT_CLOSE}}},[_Y.AUTO_PLAY_FAIL]:{entry:[_c.STANDBY_TIMERS,_d.PAUSE_INTERVALS],on:{[_K.PLAY]:{target:_Y.PLAYING,actions:[_c.WAKE_TIMERS,_d.START_INTERVALS]}}},[_Y.ENDED]:{on:{[_K.PLAY]:{target:_Y.PLAYING,actions:[_j.INCREMENT_LOOP_COUNT]},[_K.PAUSE]:_Y.PAUSED,[_K.CLOSE]:{target:_Y.FINAL,actions:_j.EMIT_CLOSE_FULLY_PLAYED}}},[_Y.FINAL]:{}}}),l0={actions:d({[_j.UPDATE_PROGRESS]:p({currentTime:(e,t)=>t.eventTarget.currentTime,duration:(e,t)=>t.eventTarget.duration,progress:(e,t)=>{let{currentTime:n,duration:i}=t.eventTarget;return Math.round(n/i*100)}}),[_j.EMIT_PROGRESS]:e=>{void 0!==e.duration&&i1().emit({type:"video",event:iq.PROGRESS,data:{progress:e.progress,currentTime:e.currentTime,duration:e.duration}})},[_j.EMIT_CHECKPOINT_TPAT_EVENT]:e=>{void 0!==e.duration&&lq(e.currentTime,e.duration,e.progress)},[_j.EMIT_SCENE_EVENT]:e=>{void 0!==e.duration&&lQ(e.currentTime,e.duration,$())},[_j.EMIT_PAUSE]:()=>{i1().emit({type:"video",event:iq.PAUSE})},[_j.EMIT_PLAY]:e=>{i1().emit({type:"video",event:iq.PLAY,data:{duration:e.duration}})},[_j.REPORT_VIDEO_START]:()=>{let e=ou();eZ().emit({name:eP.VIDEO_START,is_muted:e.isMuted()}),iz().emit(iw.LOAD_COMPLETE)},[_j.INCREMENT_LOOP_COUNT]:p({loopCount:e=>e.loopCount+1}),[_j.EMIT_CLOSE]:e=>{let t=e.loopCount>0,n=t?null==e?void 0:e.duration:null==e?void 0:e.currentTime;i1().emit({type:"video",event:iq.CLOSE,data:{isVideoFullyPlayed:t,maximumViewingTime:n}})},[_j.EMIT_CLOSE_FULLY_PLAYED]:e=>{i1().emit({type:"video",event:iq.CLOSE,data:{isVideoFullyPlayed:!0,maximumViewingTime:null==e?void 0:e.duration}})},[_j.SET_CAN_PLAY]:p({canPlay:()=>!0,duration:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.duration},videoWidth:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoWidth},videoHeight:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoHeight},videoElement:(e,t)=>t.eventTarget,orientation:(e,t)=>{var n;let{videoWidth:i,videoHeight:r}=null!==(n=t.eventTarget)&&void 0!==n?n:{};return i/r>1?_G.LANDSCAPE:_G.PORTRAIT}}),[_j.EMIT_DURATION_CHANGE]:(e,t)=>{var n;es().emit({type:"video",event:iq.DURATION_CHANGE,data:{duration:null===(n=t.eventTarget)||void 0===n?void 0:n.duration}})},[_j.EMIT_WAITING]:()=>{es().emit({type:"video",event:iq.WAITING})},[_j.EMIT_SUSPEND]:(e,t)=>{var n;es().emit({type:"video",event:iq.SUSPEND,data:{readyState:null===(n=t.eventTarget)||void 0===n?void 0:n.readyState}})},[_j.EMIT_TIME_UPDATE]:()=>{es().emit({type:"video",event:iq.TIME_UPDATE})},[_j.UPDATE_CURRENT_TIME]:p({currentTime:e=>e.videoElement?e.videoElement.currentTime:0}),[_j.RESET_CURRENT_TIME]:e=>{e.videoElement&&(e.videoElement.currentTime=e.currentTime)},[_j.EMIT_LOAD]:()=>{iz().emit(iw.LOAD_START)}},nu(),nv())};var l1=e=>o2(lJ(e),l0),l2=class{getCloseButtonDelaySeconds(e,t){return this.globalTimerService.isEnabled()?this.globalTimerService.getTotalCloseButtonDelaySeconds():void 0===e?6:ei(e,this.placementTypeService,t)?e:t}getCloseButtonCountDown(e,t){return!(void 0===e||Number.isNaN(e))&&!(e<=0)&&t}getCloseButtonStyle(e,t){return e?nW.CLOSE:this.globalTimerService.isEnabled()&&this.globalTimerService.getTotalCloseButtonDelaySeconds()>0?nW.SKIP:t}getCloseButtonConfig(e,t){let n=e.getCloseButtonConfig(),i=e.isLastPage();return{delay:this.getCloseButtonDelaySeconds(t,n.delay),style:this.getCloseButtonStyle(i,n.style),countdown:this.getCloseButtonCountDown(t,n.countdown)}}isShowNextButtonDuringCountDownInBackground(){return!!this.globalTimerService.isEnabled()&&this.globalTimerService.hasReachedVideoPageCloseButtonDelaySeconds()}shouldReplaceShowStoreKitOverlay(){var e;return this.isStoreKitOverlaySupported&&this.placementTypeService.isFullscreen()&&(null===(e=this.productViewService)||void 0===e?void 0:e.isDone())}constructor(e=sw(),t=nk(),n=nL(),i=j()){this.globalTimerService=e,this.isStoreKitOverlaySupported=t,this.productViewService=n,this.placementTypeService=i}},l3=(e,t=lE(),n=es())=>i=>{if([_l.NEXT,_l.LAST_CHANCE_ENDCARD].includes(i.type)){if(!n.hasExistingEvent({type:"incentivized-event",event:nx.GRANT_REWARD}))return void(null==t||t.send({type:hM.SHOW}));null==t||t.send({type:hM.HIDE})}e(i)},l5=()=>{let e=r.getInstance(),t=lo.getServiceIdentifier();if(e.has(t))return e.get(t)};const l4=(e,t)=>{var n,i;let r=l5();if(r)switch(t.event){case iq.DURATION_CHANGE:{let e=(null===(n=t.data)||void 0===n?void 0:n.duration)||0;r.onVideoMetadataAvailable(e),r.onVideoDisplayState("fullscreen");break}case iq.WAITING:case iq.SUSPEND:r.onVideoBuffering();break;case iq.TIME_UPDATE:r.onVideoTimeUpdate(),r.onVideoCheckpoint();break;case iq.MUTE:case iq.UNMUTE:r.onSoundChange(t.event);break;case iq.PLAY:case iq.PAUSE:r.onVideoStateChanged(t.event);break;case iq.CLOSE:(null===(i=t.data)||void 0===i?void 0:i.isVideoFullyPlayed)||r.onVideoPageClose();break;case sM.DOWNLOAD_BUTTON_CTA:case"FSC":r.onCtaClick();break;case _q.REMOVE_HANDLER:nf().removeEventHandler(t.type,l4)}};h9="W6zMza_dialog",Te="W6zMza_dialogActions",Tt="W6zMza_dialogBody",Tn="W6zMza_dialogBox",Ti="W6zMza_dialogContent",Tr="W6zMza_dialogText",Ta="W6zMza_dialogTitle";var l6=({titleText:e,bodyText:t,isVisible:n,identifier:i,children:r})=>aQ("div",{id:null!=i?i:"dialog",role:"dialog",className:Tn,style:{visibility:n?"visible":"hidden"},children:aQ("div",{className:h9,children:aQ("div",{className:Ti,children:[aQ("div",{className:Ta,children:e}),aQ("div",{className:Tt,children:[aQ("div",{className:Tr,children:t}),aQ("div",{className:Te,children:r})]})]})})}),l8=class{getTitleText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_TITLE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close this video?":"Close this ad?"}getBodyText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_BODY_TEXT))&&void 0!==e?e:`Are you sure you want to skip this ${this.hasFollowUpAdExperience?"video":"ad"}? Finish watching to claim your reward.`}getCloseText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_CLOSE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close Video":"Close Ad"}getContinueText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_CONTINUE_TEXT))&&void 0!==e?e:"Continue"}constructor(e,t=y(),n=$()){var i;this.tokenService=t,this.hasFollowUpAdExperience=(null==n||null===(i=n.next)||void 0===i?void 0:i.getSceneType())!==eV.closed||e}},l7=()=>{let[e,t]=o2(lc(),lu);return[e,t]};To="eDiOmG_continueIcon",Ts="eDiOmG_primaryButton",Tl="eDiOmG_secondaryButton";var l9=({sendAdEvent:e,showLastChanceEndcard:t=!1})=>{let[n,i]=l7(),r=new l8(t);return aQ(l6,{identifier:"incentivized-dialog",titleText:r.getTitleText(),bodyText:r.getBodyText(),isVisible:n.value.matches(hV.SHOWING),children:aQ(e8,{children:[aQ("div",{className:Ts,children:aQ("button",{className:"primary",type:"button",id:"incentivized-dialog-continue",onClick:()=>{i({type:hM.HIDE})},children:[r.getContinueText(),aQ("span",{className:To,id:"incentivized-dialog-continue-icon"})]})}),aQ("div",{className:Tl,children:aQ("button",{className:"secondary",type:"button",id:"incentivized-dialog-close",onClick:()=>{i({type:hM.CLOSE}),e({type:t?_l.LAST_CHANCE_ENDCARD:_l.NEXT})},children:r.getCloseText()})})]})})},de=class extends sd{clickHandler(e){sD(this.adMachineInterpreter)?this.theatreModeReportingService.emit({type:"theatre-mode-event",event:aN.REVEAL_CONTROLS}):super.clickHandler(e)}constructor(e=aj(),t=es(),n=nO(),i=o1()){super(e),this.fscReportingService=e,this.theatreModeReportingService=t,this.storeKitOverlayService=n,this.adMachineInterpreter=i}};const dt=tK(!1),dn=tK(!1);var di=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,isFreeForm:i,isComposite:r=!1,showVideoBlur:a=!1,theatreModeReportingService:o=i3()})=>{var s;let l=Y(),d=e.getStoreKitOverlayAutoShowConfig().enabled,c=tD((()=>lI(sP,o)),[o]),u=tD((()=>l.getOperatingSystem()===eR.iOS&&d?lI(lW,o):lW),[o]),E=tD((()=>lI(lD,o)),[o]),v=new l2,[_,h]=l1(e),T=Q()&&!i?l3(t):t;sp(e.getId(),e.getAppStoreOnDelayConfig(),_.value.context.canPlay),sg(e.getStoreKitOverlayAutoShowConfig(),dn.value),sO("video",lY),s2(dt.value),sH(t),oy(),sX(e);let S=lX();return sK({callToActionConfig:dt.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:v.shouldReplaceShowStoreKitOverlay()}),sG({fullScreenClickConfig:sD()?{enabled:!1}:dt.value?null!==(s=e.getLastChanceEndcardConfig().fsc)&&void 0!==s?s:{enabled:!1}:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:v.shouldReplaceShowStoreKitOverlay()}),sO("cta",((e,t)=>{dt.value||l4(e,t),o.emit({type:"theatre-mode-event",event:aN.REVEAL_CONTROLS})})),sO("fsc",((e,t)=>{dt.value||l4(e,t)})),tf((()=>{1===_.value.context.loopCount&&o.emit({type:"theatre-mode-event",event:aN.DISABLE_THEATRE_MODE})}),[_]),aQ(e8,{children:[aQ(l9,{sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aQ(sB,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{dt.value=e}}),aQ(sv,{config:e.getFullScreenClickConfig(),service:new de,children:[_.value.context.canPlay&&n&&!dt.value&&aQ(c,{config:v.getCloseButtonConfig(e,_.value.context.duration),handleTimerUpdate:S,showNextButtonDuringCountDownInBackground:v.isShowNextButtonDuringCountDownInBackground(),sendAdEvent:T,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aQ(lf,{isVisible:_.value.matches(_Y.AUTO_PLAY_FAIL),sendVideoEvent:h}),aQ(lm,{isInLine:j().isInLine()||a}),aQ(lO,{scene:e,videoState:_,sendVideoEvent:h,sendAdEvent:t,theatreModeReportingService:o,onMetadataLoaded:()=>{dn.value=!0}}),e.showDownloadButton&&aQ(sI,{delay:e.getCallToActionConfig().delay,isVisible:!1,children:aQ(E,{callToActionReportingService:es()})}),e.getCallToActionConfig().isPersistent&&!d&&_.value.context.canPlay&&aQ(u,{scene:e,videoOrientation:_.value.context.orientation,viewportOrientation:l.getOrientation(),disableRichCta:r})]})]})};const dr=e=>4===e.length?e:dr(`0${e}`),da=e=>e.split("").map((e=>dr(parseInt(e,16).toString(2)))).join("").split("");var ds=class{constructor(e=y()){this.tokenService=e,this.getBits=()=>{let e=this.tokenService.get(L.SESSION_ID);if(!e){let e=[];for(let t=0;t<96;t+=1)e.push("0");return e}return da(e)}}};Td="_0zGmtq_bit",Tc="_0zGmtq_leading",Tu="_0zGmtq_one",TE="_0zGmtq_watermark",Tv="_0zGmtq_zero";const dl=(e,t)=>`bit-${e}-${t}`;var dd=()=>{let e=new ds;return j().isFullscreen()?aQ("div",{className:TE,id:"watermark",children:[aQ("div",{className:`${Tu}  ${Tc} ${Td}`}),e.getBits().map(((e,t)=>aQ("div",{className:`${Td} ${"0"===e?Tv:Tu}`,id:dl(e,t)},dl(e,t))))]}):null};T_="m2_mMq_privacyButton";const dc={[P.ACCELERATE]:"#96633d",[P.EDSP]:"#853d96",[P.UNKNOWN]:"#333"};var du=({handleClick:e,adSource:t})=>aQ("button",{type:"button",id:sn,title:"Liftoff Privacy",className:T_,onClick:e,"aria-label":"Liftoff Privacy",children:aQ("svg",{id:"j",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302 340",children:[aQ("path",{d:"M274.04,32.82L160.56,7.74c-2.53-.42-5.1-.43-7.62,0L28.59,32.87c-12.39,2.04-21.55,13.63-21.55,27.27v165.78c0,7.75,2.99,15.14,8.25,20.36l55.61,55.27c44.48,44.21,116.29,44.21,160.77,0l55.61-55.27c5.26-5.22,8.25-12.62,8.25-20.36V60.08c0-13.62-9.13-25.19-21.49-27.26Z",fill:dc[null!=t?t:P.UNKNOWN],opacity:".6",strokeWidth:"0"}),aQ("path",{d:"M275.5,26.22L161.67,1.07c-3.25-.55-6.56-.54-10.08.03L27.37,26.22C11.67,28.88.29,43.11.29,60.13v143.34c0,23.78,9.29,46.64,25.47,62.73l51.82,46.31c41.98,37.52,105.43,37.52,147.41,0l51.82-46.32c16.19-16.09,25.47-38.95,25.47-62.73V60.08c0-17.03-11.41-31.3-26.79-33.86ZM288.78,203.48c0,20.2-7.83,39.57-21.48,53.14l-32.94,29.99c-8.73-9.02-16.42-17.46-16.42-17.46-10.8-11.49-24.61-2.92-24.61-2.92-1.95,1.13-4.12,2.13-6.42,3.02-3.77,1.29-8.66,2.76-14.21,4-9.02,1.83-17.27,2.47-20.08,2.65-.44.01-.87.04-1.3.05-.44,0-.87-.04-1.3-.05-2.82-.18-11.06-.82-20.08-2.65-5.55-1.24-10.44-2.71-14.21-4-2.3-.89-4.47-1.88-6.42-3.02,0,0-13.82-8.57-24.61,2.92,0,0-7.28,7.89-16.44,17.48l-32.96-30.01c-13.65-13.56-21.48-32.93-21.48-53.14V60.13c0-10.25,6.83-19.11,15.89-20.6l124.34-25.14c.96-.15,1.92-.22,2.82-.22.8,0,1.57.05,2.25.16l113.83,25.15c9.04,1.51,15.85,10.36,15.85,20.59v143.4Z",fill:"#f3f4f5",strokeWidth:"0"}),aQ("path",{d:"M188.96,142.21c-6.2,0-9.55,5-10.07,15.01l-.06,3.69c0,11.44,3.34,17.16,10.01,17.16,4.45,0,7.62-1.87,9.53-5.6v-24.54c-1.83-3.81-4.96-5.72-9.41-5.72Z",fill:"#f3f4f5",strokeWidth:"0"}),aQ("polygon",{points:"107.78 160.02 126.43 160.02 117.07 129.93 107.78 160.02",fill:"#f3f4f5",strokeWidth:"0"}),aQ("path",{d:"M151,57c-51.36,0-93,41.64-93,93s41.64,93,93,93,93-41.64,93-93-41.64-93-93-93ZM136.49,192.36l-5.06-16.2h-28.65l-5,16.2h-22.34l31.81-86.73h19.66l32.05,86.73h-22.46ZM200.46,192.36l-1.01-6.91c-4.13,5.4-9.37,8.1-15.73,8.1-7.67,0-13.74-2.94-18.23-8.82-4.49-5.88-6.73-14.24-6.73-25.08,0-10.21,2.2-18.25,6.61-24.13,4.41-5.88,10.56-8.82,18.47-8.82,5.76,0,10.6,2.26,14.54,6.79v-32.64h20.13v91.5h-18.05Z",fill:"#f3f4f5",strokeWidth:"0"})]})});(vX=Th||(Th={}))[vX.LEFT=0]="LEFT",vX[vX.RIGHT=1]="RIGHT",vX[vX.UP=2]="UP",vX[vX.DOWN=3]="DOWN",(vz=TT||(TT={}))[vz.HORIZONTAL=0]="HORIZONTAL",vz[vz.VERTICAL=1]="VERTICAL";const dE=tK(0),dv=tK(0),d_=tK(!1),dh=tK(0);var dT=({children:e,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:i,onSwipeDown:r})=>{let a=tN(null),o=(e,t)=>Math.abs(e)>Math.abs(t),s=(e,t)=>o(e,t)?e>0?1:0:t>0?3:2,l=(e,t)=>o(e,t)?Math.abs(e):Math.abs(t),d=(e,t)=>{let n=e-dE.value,i=t-dv.value;return{Direction:s(n,i),Orientation:o(n,i)?0:1,Distance:l(n,i),DeltaX:n,DeltaY:i}};return aQ("div",{ref:a,title:"swipe",onTouchStart:e=>{d_.value=!0;let t=0,n=0;e instanceof TouchEvent?(t=e.touches[0].clientX,n=e.touches[0].clientY):e instanceof MouseEvent?(t=e.clientX,n=e.clientY):(t=e.detail.clientX,n=e.detail.clientY),dE.value=t,dv.value=n,dh.value=Date.now()},onTouchEnd:e=>{var o;let s=null==a||null===(o=a.current)||void 0===o?void 0:o.childNodes;if(!d_||!s)return;let{endX:l,endY:c}=(e=>{var t,n,i,r;return e instanceof TouchEvent?{endX:e.changedTouches[0].clientX,endY:e.changedTouches[0].clientY}:e instanceof MouseEvent?{endX:e.clientX,endY:e.clientY}:{endX:null!==(i=null===(t=e.detail)||void 0===t?void 0:t.clientX)&&void 0!==i?i:0,endY:null!==(r=null===(n=e.detail)||void 0===n?void 0:n.clientY)&&void 0!==r?r:0}})(e),u=d(l,c),E=s[0];if(((e,t)=>e.Distance>=.05*t)(u,0===u.Orientation?E.clientWidth:E.clientHeight)){switch(u.Direction){case 0:t&&t();break;case 1:n&&n();break;case 3:r&&r();break;default:i&&i()}d_.value=!1}},children:e})};TS="FbTWOG_closeIcon",Tp="FbTWOG_debug",Tg="FbTWOG_displayNone",TC="FbTWOG_hasEventMetadata",TI="FbTWOG_hide",TO="FbTWOG_id",TA="FbTWOG_idContent",Tm="FbTWOG_idName",Tf="FbTWOG_ids",TN="FbTWOG_mask",TD="FbTWOG_popupBody",TR="FbTWOG_popupContainer",Ty="FbTWOG_popupContainerDisplay",TL="FbTWOG_popupHeader",TP="FbTWOG_popupTitle",Tw="FbTWOG_privacyPopup",Tb="FbTWOG_readMore",TV="FbTWOG_show";var dS=({isOpen:e,handleReadMoreClick:t,closeHandler:n,creativeID:i,eventID:r,allowDebug:a=!1})=>{let o=t8([]);return sO("debug",((e,t)=>{var n;a&&(null===(n=t.data)||void 0===n?void 0:n.message)&&(o.value=[...o.value,t.data.message])})),aQ("div",{className:sl(TR,e?Ty:""),id:st,children:[aQ("div",{className:e?TN:Tg,id:"privacy-popup-mask",onClick:n,role:"none"}),aQ(dT,{onSwipeDown:n,children:aQ("div",{id:"privacy-popup",role:"dialog","aria-label":"Privacy popup","aria-hidden":e?"false":"true",className:sl(Tw,e?TV:TI),children:[aQ("div",{className:TL,children:[aQ("div",{className:TP,title:"privacy-popup-title",children:"Privacy Policy"}),aQ("button",{type:"button","aria-label":"Close privacy popup","aria-hidden":e?"false":"true",onClick:n,id:"privacy-close-button",children:aQ("span",{className:TS})})]}),aQ("div",{className:TD,children:"Liftoff, Inc. understands the importance of privacy. Liftoff operates a mobile ad network (the 'Ad Network' or the 'Services') through which Liftoff displays targeted, contextual ads."}),aQ("button",{type:"button",className:Tb,"aria-hidden":e?"false":"true",onClick:t,id:"privacy-read-more-button",children:"Privacy Policy & Ad Information"}),aQ("div",{className:sl(Tf,i||r?TC:""),children:[i&&aQ("div",{className:TO,id:"privacy-drawer-creative-id",children:[aQ("div",{className:Tm,children:"Creative ID"}),aQ("div",{className:TA,children:i})]}),r&&aQ("div",{className:TO,id:"privacy-drawer-event-id",children:[aQ("div",{className:Tm,children:"Event ID"}),aQ("div",{className:TA,children:r})]})]}),o.value.length>0&&aQ("div",{className:Tp,children:[aQ("h3",{children:"Debug Messages"}),aQ("div",{className:"debug-container",children:o.value.map((e=>aQ("div",{className:"debug-message",children:e},e)))})]})]})})]})},dp=class{getAdSource(){return this.placementTypeService.getAdSource()}getCreativeId(){var e;return null!==(e=this.tokenService.get(L.CREATIVE_ID))&&void 0!==e?e:""}getEventId(){var e;return null!==(e=this.tokenService.get(L.SESSION_ID))&&void 0!==e?e:""}handleDrawerClose(e){e({type:_l.PRIVACY_BOTTOM_DRAWER_CLOSE})}handleIconClick(e){e({type:_l.PRIVACY_BOTTOM_DRAWER_OPEN})}handleReadMoreClick(e){e({type:_l.PRIVACY_BOTTOM_DRAWER_CLOSE}),window.setTimeout((()=>{e({type:_l.OPEN_PRIVACY_PAGE})}),50)}privacyDrawerEnabled(){return this.placementTypeService.isFullscreen()}constructor(e=y(),t=j()){this.tokenService=e,this.placementTypeService=t}};const dg=tK(!1);var dC=({sendAdEvent:e,privacyService:t=new dp,customMraidEventReportingService:n=o6(),allowDebug:i=!1})=>{let r=()=>{dg.value=!1,t.handleDrawerClose(e)};return sO("custom-mraid",((e,t)=>{t.event===o4.CLOSE&&dg&&r()}),n),aQ(e8,{children:[aQ(du,{handleClick:()=>{t.handleIconClick(e),dg.value=!0},adSource:t.getAdSource()}),t.privacyDrawerEnabled()&&aQ(dS,{isOpen:dg.value,closeHandler:r,handleReadMoreClick:()=>{dg.value=!1,t.handleReadMoreClick(e)},creativeID:t.getCreativeId(),eventID:t.getEventId(),allowDebug:i})]})},dI=function(e,t){let n=tN(0),i=tN(0);return tf((()=>{let r=r=>{let a=Date.now();a-i.current>800&&(n.current=0),n.current+=1,i.current=a;let{clientX:o,clientY:s}=r;n.current>=3&&(e(o,s,t),n.current=0)};return window.addEventListener("pointerdown",r),()=>window.removeEventListener("pointerdown",r)}),[e,t]),null};const dO=(e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=e=>{var n;if(!e)return null;if(e.nodeType===Node.TEXT_NODE)return(null===(n=e.nodeValue)||void 0===n?void 0:n.trim())?e.nodeValue:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;let r=e.tagName.toLowerCase(),a={};return Array.from(e.attributes).forEach((e=>{a[e.name]=e.value})),"vm-component"===r?aQ(t,{sceneId:a["scene-id"]||""}):e4(r,a,...Array.from(e.childNodes).map(i).filter((e=>!!e)))};return i(n.body.firstChild)};var dA=({htmlString:e,VmComponent:t})=>{let[n,i]=(t_=1,tm(tb,null));return tf((()=>{i(dO(e,t))}),[e]),n},dm=e=>{if(/Android/i.test(e.navigator.userAgent)){let t,n=e.addEventListener;e.addEventListener=(t,i,r)=>{n.call(e,"load"===t?"DOMContentLoaded":t,i,r)},Object.defineProperty(e,"onload",{set:n=>{t=n,e.addEventListener("DOMContentLoaded",t)},get:()=>t})}},df=(e=j(),t=y())=>t.has(L.ADM_HTML)&&(e.isBanner()||e.isMrec()||e.isInLine()),dN=e=>{e.addEventListener("error",(t=>{var n,i,r;e.parent.postMessage({title:"playable-error",content:{message:null!==(r=null==t?void 0:t.message)&&void 0!==r?r:null==t||null===(n=t.error)||void 0===n?void 0:n.message,stack:null==t||null===(i=t.error)||void 0===i?void 0:i.stack}},"*")})),e.addEventListener("unhandledrejection",(t=>{e.parent.postMessage({title:"playable-error",content:{message:null==t?void 0:t.reason}},"*")}))};(v$=TM||(TM={})).ADD_EVENT_LISTENER="addEventListener",v$.CACHE_FILE="cacheFile",v$.CLOSE="close",v$.CLOSE_STOREKIT_OVERLAY_VIEW="closeStoreKitOverlayView",v$.EXIT_ALTERNATIVE="exitAlternative",v$.FETCH_FILE="fetchFile",v$.GET_CURRENT_POSITION="getCurrentPosition",v$.GET_DEFAULT_POSITION="getDefaultPosition",v$.GET_EXPAND_PROPERTIES="getExpandProperties",v$.GET_MAX_SIZE="getMaxSize",v$.GET_PLACEMENT_TYPE="getPlacementType",v$.GET_SCREEN_SIZE="getScreenSize",v$.GET_STATE="getState",v$.GET_VIEWABLE="getViewable",v$.GRANT_REWARD="grantReward",v$.IS_VIEWABLE="isViewable",v$.NEXT="next",v$.OPEN="open",v$.OPEN_STOREKIT_OVERLAY_VIEW="openStoreKitOverlayView",v$.OPEN_STOREKIT_PRODUCT_VIEW="openStoreKitProductView",v$.REMOVE_EVENT_LISTENER="removeEventListener",v$.SET_ORIENTATION_PROPERTIES="setOrientationProperties",v$.SHOW_ALTERNATIVE="showAlternative",(vZ=Tk||(Tk={})).CREATE_CALENDAR_EVENT="createCalendarEvent",vZ.EXPAND="expand",vZ.GET_CONSENT_ACCEPT_BUTTON_TEXT="getConsentAcceptButtonText",vZ.GET_CONSENT_BODY_TEXT="getConsentBodyText",vZ.GET_CONSENT_DENY_BUTTON_TEXT="getConsentDenyButtonText",vZ.GET_CONSENT_REQUIRED="getConsentRequired",vZ.GET_CONSENT_TITLE_TEXT="getConsentTitleText",vZ.GET_ORIENTATION_PROPERTIES="getOrientationProperties",vZ.GET_RESIZE_PROPERTIES="getResizeProperties",vZ.GET_VERSION="getVersion",vZ.PLAY_VIDEO="playVideo",vZ.RESIZE="resize",vZ.SET_EXPAND_PROPERTIES="setExpandProperties",vZ.SET_RESIZE_PROPERTIES="setResizeProperties",vZ.STORE_PICTURE="storePicture",vZ.USE_CUSTOM_CLOSE="useCustomClose";var dD=()=>({[Tk.CREATE_CALENDAR_EVENT]:()=>{},[Tk.EXPAND]:()=>{},[Tk.GET_CONSENT_ACCEPT_BUTTON_TEXT]:()=>{},[Tk.GET_CONSENT_BODY_TEXT]:()=>{},[Tk.GET_CONSENT_DENY_BUTTON_TEXT]:()=>{},[Tk.GET_CONSENT_REQUIRED]:()=>{},[Tk.GET_CONSENT_TITLE_TEXT]:()=>{},[Tk.GET_ORIENTATION_PROPERTIES]:()=>{},[Tk.GET_RESIZE_PROPERTIES]:()=>{},[Tk.GET_VERSION]:()=>()=>"1.0",[Tk.PLAY_VIDEO]:()=>{},[Tk.RESIZE]:()=>{},[Tk.SET_EXPAND_PROPERTIES]:()=>{},[Tk.SET_RESIZE_PROPERTIES]:()=>{},[Tk.STORE_PICTURE]:()=>{},[Tk.USE_CUSTOM_CLOSE]:()=>()=>!1}),dR=()=>({width:window.innerWidth,height:window.innerHeight}),dy=()=>C(d({},dR()),{useCustomClose:!1,isModal:!1}),dL=()=>d({x:0,y:0},dR());const dP=new b("5.0.0");var dw=(e=Y())=>e.getMraidVersion().isGreaterThanOrEqualTo(dP);const db=(e=eZ())=>e.getEventCount(eP.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND)>=2;var dV=async(e,t=nL(),n=db(),i=dw(),r=eZ())=>{if(n)return!1;if(r.emit(eP.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND),null==t||t.open(),i)try{await ak((()=>null==t?void 0:t.isOpen()),e)}catch(e){return!1}return!0},dM=e=>!!e&&!![eV.video,eV.image,eV.endcard].includes(e.getSceneType())&&e.getLastChanceEndcardConfig().enabled,dk=()=>({[TM.CACHE_FILE]:(e,t,n=s8)=>(e,t)=>{var i;return!!(e&&t&&"string"==typeof e&&e.toLowerCase().startsWith("http")&&ArrayBuffer.isView(t))&&(null===(i=n())||void 0===i||i.addRecord({url:e,data:t}),!0)},[TM.EXIT_ALTERNATIVE]:(e,t,n=o1,i=dM)=>()=>{if(oU.getValue().isLastChanceEndcardOverlayShowing)return;let e=$(),t={type:_l.NEXT};e&&i(e)&&(t={type:_l.LAST_CHANCE_ENDCARD}),n().send(t)},[TM.FETCH_FILE]:(e,t,n=s8)=>async e=>{var t;if(!e||"string"!=typeof e||!e.toLowerCase().startsWith("http"))return;let i=await(null===(t=n())||void 0===t?void 0:t.get(e));return null==i?void 0:i.data},[TM.GRANT_REWARD]:(e,t,n=R,i=eZ(),r=ii())=>{let a=n().getMraidBridgeExt();return i.emit(eP.GRANT_REWARD),null==a||a.notifySuccessfulViewAd(),r.emit(n9.REWARD_GRANTED,!0),()=>null},[TM.NEXT]:(e,t,n=o1)=>e=>{oU.getValue().isLastChanceEndcardOverlayShowing||n().send(e)},[TM.OPEN_STOREKIT_OVERLAY_VIEW]:(e,t,n=nk,i=nO)=>async()=>{if(!n())return!1;let e=i();if(!e.isIdle())return!1;if(e.isOpen())return!0;e.open({fallback:_h.OFF});try{return await ak((()=>e.isOpen()),3e3),!0}catch(e){return!1}},[TM.OPEN_STOREKIT_PRODUCT_VIEW]:(e,t,n=ng,i=nL,r=dV)=>async()=>{if(!n())return!1;let e=i();return null!=e&&!!e.isOpen()||(null==e||e.open(),await r(3e3))},[TM.SHOW_ALTERNATIVE]:(e,t,n=o1)=>e=>{oU.getValue().isLastChanceEndcardOverlayShowing||n().send(e)},[TM.CLOSE_STOREKIT_OVERLAY_VIEW]:(e,t,n=nk,i=nO)=>async()=>{if(!n())return!1;let e=i();if(!e.isOpen())return!0;e.close();try{return await ak((()=>!e.isOpen()),3e3),!0}catch(e){return!1}}}),dU=()=>{if(df())return!1;let e=Y();if(e.getOperatingSystem()===eR.Android||e.getOperatingSystem()===eR.Unknown)return!1;let t=new b("6.12.0");return!e.getSdkVersion().isLessThanOrEqualTo(t)},dB=(vq=e=>{aY().emit({type:"cta",event:sM.ENDCARD_CTA,data:{ctaUrl:e}})},t=!1,function(...n){!t&&(e||(vq.apply(this,n),t=!0,e=window.setTimeout((()=>{t=!1,e=void 0}),300)))}),dH=()=>d({[TM.CLOSE]:(e,t,n=o1)=>()=>n().send(_l.CLOSE),[TM.ADD_EVENT_LISTENER]:(e,t)=>(e,n,i=oi)=>{i().addEventListener(t,e,n)},[TM.IS_VIEWABLE]:(e,t,n=a7,i=ot)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[TM.GET_VIEWABLE]:(e,t,n=a7,i=ot)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[TM.GET_CURRENT_POSITION]:()=>dL,[TM.GET_DEFAULT_POSITION]:()=>dL,[TM.GET_EXPAND_PROPERTIES]:()=>dy,[TM.GET_MAX_SIZE]:()=>dR,[TM.GET_PLACEMENT_TYPE]:e=>e.getPlacementType.bind(e),[TM.GET_SCREEN_SIZE]:()=>dR,[TM.GET_STATE]:e=>e.getState.bind(e),[TM.OPEN]:(e,t,n=df,i=iz,r=dB)=>n()?e=>0===i().getEventCount(iw.CLICK)?null:r(e):e=>{r(e,"CTA")},[TM.REMOVE_EVENT_LISTENER]:(e,t)=>(e,n,i=oi)=>{i().removeEventListener(t,e,n)},[TM.SET_ORIENTATION_PROPERTIES]:(e,t,n=dU)=>n()?e.setOrientationProperties.bind(e):()=>null},dk()),dW=()=>C(d({},dH(),dD()),{supports:()=>e=>Object.values(TM).includes(e)}),dx=class{getProxyMraid(){return new Proxy(this.originalMraid,this.getProxyHandler())}constructor(e,t=R().getMraid(),n=dW(),i=eZ()){this.sceneId=e,this.originalMraid=t,this.commandHandlers=n,this.observabilityEventReportingService=i,this.getProxyHandler=()=>{let{commandHandlers:e,observabilityEventReportingService:t,sceneId:n}=this;return{get:(i,r)=>e[r]?e[r](i,n):i[r]?i[r]:(t.emit({name:eP.UNKNOWN_MRAID_COMMAND,value:r}),()=>!1)}}}},dF=(e,t=iz())=>{e.addEventListener("load",(()=>{t.emit(iw.LOAD_COMPLETE)}))},dG=(e,t,n,i=s1,r=oL)=>{e&&e.document.addEventListener(sz(),(e=>{(null==e?void 0:e.isTrusted)&&r(ek.CLICK_THROUGH,n,t),i(e)}),!0)};(vQ=TU||(TU={}))[vQ.MUTE=0]="MUTE",vQ[vQ.UNMUTE=1]="UNMUTE";var dK=class{interceptAudioContext(){let e=this;function t(){let t=new e.originAudioContext,n=t.createGain();n.gain.setValueAtTime(e.shouldMute?0:1,t.currentTime),n.connect(t.destination);try{Object.defineProperty(t,"destination",{get:()=>n,configurable:!0})}catch(e){}return e.instances.set(t,n),t}t.prototype=this.originAudioContext.prototype,Object.defineProperty(this.targetWindow,"AudioContext",{value:t,configurable:!0})}muteAll(){this.shouldMute=!0,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(0,t.currentTime)}))}unmuteAll(){this.shouldMute=!1,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(1,t.currentTime)}))}constructor(e,t){this.instances=new Map,this.targetWindow=e,this.originAudioContext=e.AudioContext||e.webkitAudioContext,this.shouldMute=t,this.interceptAudioContext()}};(vJ=TB||(TB={})).AUDIO="audio",vJ.VIDEO="video",vJ.IFRAME="iframe",vJ.DEFAULT="default";var dY=e=>{let t=e.nodeName.toLowerCase();switch(t){case"audio":case"video":case"iframe":return t;default:return"default"}},dj=class{isNodeAllowed(e){return[TB.AUDIO,TB.VIDEO].includes(dY(e))}preventSoundResume(e){Object.defineProperty(e,"muted",{set:()=>{},get:()=>!0,configurable:!0})}mute(e,t=!0){(!t||this.isNodeAllowed(e))&&(e.muted=!0,this.preventSoundResume(e),this.storeElement(e))}unmute(e,t=!0){if(t&&!this.isNodeAllowed(e))return;let n=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");n&&Object.defineProperty(e,"muted",n),e.muted=!1,this.storeElement(e)}muteAll(){this.instances.forEach((e=>{this.mute(e,!1)})),Array.from(this.targetWindow.document.querySelectorAll("audio, video")).forEach((e=>{this.mute(e,!1)}))}unmuteAll(){this.instances.forEach((e=>{this.unmute(e,!1)}))}storeElement(e){this.instances.has(e)||this.instances.add(e)}constructor(e){this.targetWindow=e,this.instances=new Set}};class dX{interceptStaticIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleIframeNode(e)}))}doMuteAllIfMute(){this.mute&&this.muteAllMedias()}unmuteAllMedias(){this.mute=!1,this.silencers.forEach((e=>e.unmuteAll()))}muteAllMedias(){this.mute=!0,this.silencers.forEach((e=>e.muteAll()))}handleIframeNode(e){var t;dX.isWindowAccessible(e.contentWindow)&&dX.interceptAllMediaElements(e.contentWindow,this.mute);let n=!dX.hasIframeCrossOriginUrl(e);this.iframeEventReportingService.emit({type:"iframe",event:rl.NESTED_IFRAME_TYPE,data:{nested_iframe_type:n?_k.NESTED_IFRAME_WITHOUT_CORS:_k.NESTED_IFRAME_WITH_CORS,scene_id:null===(t=this.injectedGetCurrentScene())||void 0===t?void 0:t.getId()}})}handleNewNode(e){dY(e)===TB.IFRAME&&this.handleIframeNode(e),this.mute?this.silencers.forEach((t=>{var n;return null===(n=t.mute)||void 0===n?void 0:n.call(t,e)})):this.silencers.forEach((t=>{var n;return null===(n=t.unmute)||void 0===n?void 0:n.call(t,e)}))}interceptCreateElement(){let e=this.targetWindow.document.createElement;Object.defineProperty(this.targetWindow.document,"createElement",{value:(t,...n)=>{let i=e.call(this.targetWindow.document,t,...n);return this.handleNewNode(i),i},configurable:!0})}observeDomMutation(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;for(let e=0;e<t.length;e+=1)this.handleNewNode(t[e])}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t,n=!1,i=rs(),r=$){this.targetWindow=e,this.silencers=t,this.mute=n,this.iframeEventReportingService=i,this.injectedGetCurrentScene=r,this.interceptCreateElement(),"complete"===this.targetWindow.document.readyState?(this.doMuteAllIfMute(),this.observeDomMutation()):this.targetWindow.document.addEventListener("DOMContentLoaded",(()=>{this.doMuteAllIfMute(),this.observeDomMutation()})),this.interceptStaticIframes(),this.doMuteAllIfMute()}}dX.instances=new Map,dX.hasIframeCrossOriginUrl=e=>{var t;return null===(t=e.src)||void 0===t?void 0:t.toLowerCase().startsWith("http")},dX.isWindowAccessible=e=>{try{return!!(null==e?void 0:e.document)}catch(e){return!1}},dX.interceptAllMediaElements=(e,t,n=rs(),i=$)=>{let r=new dX(e,[new dj(e),new dK(e,t)],t,n,i);dX.instances.set(e,r)},dX.muteAllMedias=()=>{dX.instances.forEach((e=>{dX.isWindowAccessible(e.targetWindow)&&e.muteAllMedias()}))},dX.unmuteAllMedias=()=>{dX.instances.forEach((e=>{dX.isWindowAccessible(e.targetWindow)&&e.unmuteAllMedias()}))};var dz=(e,t)=>{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:e[t],writable:!1})},d$=e=>{let t=e.addEventListener;e.addEventListener=(n,i,r)=>{"beforeunload"!==n&&t.call(e,n,i,r)}},dZ=(e,t)=>{e.document.addEventListener("click",(e=>{let n=e.target.closest("a");if(n){if(!e.isTrusted)return void e.preventDefault();n.href&&(e.preventDefault(),t(n.href))}}),{capture:!0})},dq=e=>null!==e.contentDocument;class dQ{intercept(){this.interceptors.forEach((e=>e(this.targetWindow))),this.checkExistingIframes(),this.observeNestedIframes()}static init(e,t){dq(e)&&new dQ(e.contentWindow,t).intercept()}checkExistingIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleNewIframe(e)}))}handleNewIframe(e){dY(e)===TB.IFRAME&&dQ.init(e,this.interceptors)}observeNestedIframes(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;t.forEach((e=>{this.handleNewIframe(e)}))}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t){this.targetWindow=e,this.interceptors=t}}var dJ=class extends sm{getIframeContentData(){return this.scene.getIframeContentData()}getCloseButtonConfig(){let e=this.scene.getCloseButtonConfig(),t=1===this.scene.index;return C(d({},e),{delay:!t&&this.globalTimerService.isEnabled()?this.globalTimerService.getEndcardPageCloseButtonDelaySeconds():e.delay})}initMraidInIframeForFullscreen(e){if(!e)return;let t=this.proxyMraidService.getProxyMraid();e.mraid=t,dz(e,"mraid"),e.open=e=>t.open(e)}initMraidInIframeForNonFullscreen(e){let t=e.contentWindow;t.mraid=this.proxyMraidService.getProxyMraid(),dz(t,"mraid"),t.open=()=>null;let n=e=>{if(e.isTrusted){var i,r,a;t.document.removeEventListener("click",n,!0),t.open=e=>dB(e);let o=e.target.closest("a");(null==o||null===(i=o.href)||void 0===i?void 0:i.startsWith("http"))?e.preventDefault():null===(r=(a=e.target).click)||void 0===r||r.call(a)}},i=()=>{var e;"loading"!==(null===(e=t.document)||void 0===e?void 0:e.readyState)?t.document.addEventListener("click",n,{capture:!0}):requestAnimationFrame(i)};requestAnimationFrame(i)}injectMethodToIframe(e){this.injectedIsHtmlNonFullscreen?this.initMraidInIframeForNonFullscreen(e):this.initMraidInIframeForFullscreen(e.contentWindow)}getLastChanceEndcardConfig(e,t){let n=this.scene.getLastChanceEndcardConfig();return n.enabled&&e?C(d({},n),{enabled:t}):n}getInsertIframeTags(e){return`<base target="_parent" ${e?`href=${e}`:""}><style>body {margin: 0;padding: 0;overflow: hidden;}</style>`}loadNestedIframe(e,t){if(!(null==t?void 0:t.content))return;let n=()=>{this.loadNestedIframe(e,t)},i=e.querySelector("iframe");if(!i)return void e.addEventListener("DOMContentLoaded",n);e.removeEventListener("DOMContentLoaded",n),i.width="100%",i.height="100%";let{content:r,baseUrl:a}=t,o=this.getInsertIframeTags(a);this.loadIframe(i,r,o)}async loadIframe(e,t,n){try{let i=e.contentWindow,r=null==i?void 0:i.document;dm(i),d$(i),this.injectMethodToIframe(e),r.open(),this.injectedAddErrorListenerToIframe(i),this.injectedAddLoadListenerToIframe(i),r.write(n+t),r.close(),dQ.init(e,[this.addEndcardClickListener,this.blockFullScreenNativeVideoPlayer]),dZ(i,dB),this.injectedInterceptAllMediaElements(i,this.muteService.isMuted())}catch(e){this.errorLoggingService.emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:"Failed to write endcard to iframe"}}})}}async updateIframeContent(e,t){if(null==e?void 0:e.current){let{content:n,nestedFrameContent:i}=t,r=this.getInsertIframeTags();await this.loadIframe(e.current,n,r);let a=e.current.contentWindow;this.loadNestedIframe(a.document,i)}}constructor(e,t=iv(),n=j(),i=new dx(e.getId()),r=sw(),a=ou(),o=df(),s=dN,l=dF,d=dX.interceptAllMediaElements){super(n),this.scene=e,this.errorLoggingService=t,this.placementTypeService=n,this.proxyMraidService=i,this.globalTimerService=r,this.muteService=a,this.injectedIsHtmlNonFullscreen=o,this.injectedAddErrorListenerToIframe=s,this.injectedAddLoadListenerToIframe=l,this.injectedInterceptAllMediaElements=d,this.blockFullScreenNativeVideoPlayer=e=>{let t=Array.from(e.document.querySelectorAll("video"));0!==t.length?t.forEach((e=>e.setAttribute("playsinline",""))):"complete"!==e.document.readyState&&e.document.addEventListener("DOMContentLoaded",(()=>{this.blockFullScreenNativeVideoPlayer(e)}))},this.addEndcardClickListener=e=>{let t=this.scene;dG(e,t.getTrackingEventMapConfig(),t.getId())}}},d0=(e=ou())=>{tf((()=>{e.isMuted()?dX.muteAllMedias():dX.unmuteAllMedias()}),[e.getMutedSignal().value])};TH="oAV7cW_endcard",TW="oAV7cW_endcardIframe";var d1=({sendAdEvent:e,htmlService:t,scene:n})=>{let i=tN(null),[r,a]=(t_=1,tm(tb,!1));return tf((()=>{r&&requestAnimationFrame((async()=>{t.getIframeContentData(n).then((e=>{t.updateIframeContent(i,e)}))}))}),[r]),d0(),aQ("iframe",{id:"endcardIframe",title:"endcard",onLoad:()=>{e({type:_l.PRIVACY_LOGO_SHOW}),a(!0)},ref:i,className:TW,allow:"autoplay",scrolling:"no",frameBorder:"0"})},d2=()=>{let e=r.getInstance(),t=oO.getServiceIdentifier();if(e.has(t))return e.get(t)};const d3=(e,t)=>{let n=d2();if(n)switch(t.event){case sM.ENDCARD_CTA:n.onCtaClick();break;case _q.REMOVE_HANDLER:nf().removeEventHandler(t.type,d3)}};(Tx||(Tx={})).PRELOAD="preload";var d5=Tx;const d4=e=>Object.values(d5).includes(e);class d6 extends el{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&d4(e)?{type:"debug",event:e}:"object"==typeof e?e:void 0}}var d8=e=>new d6(null!=e?e:es());const d7=(e,t)=>({id:t,context:{id:t,preloadSuccess:!1},initial:e?_a.INITIAL:_a.SHOWING,states:{[_a.INITIAL]:{on:{[_r.SHOW]:{target:_a.SHOWING},[_r.PRELOAD]:{target:_a.PRELOADING,actions:[_o.INITIALIZE_PRELOAD]}}},[_a.PRELOADING]:{on:{[_r.SHOW]:{target:_a.SHOWING,actions:[_o.MARK_PRELOAD_SUCCESS,_o.EMIT_SHOW,_o.TRIGGER_VIEWABLE_CHANGE]},[_r.CANCEL_PRELOAD]:{target:_a.INITIAL,actions:[_o.CANCEL_PRELOAD,_o.FLUSH_MRAID_EVENTS]}}},[_a.SHOWING]:{}}}),d9=(e=oi(),t=a7(),n=iz())=>({actions:{[_o.INITIALIZE_PRELOAD]:()=>{n.emit(iw.PRELOAD_START)},[_o.FLUSH_MRAID_EVENTS]:()=>{let t=oP(o1().state);e.flushAllEventCallbacks(t.getId())},[_o.EMIT_SHOW]:e=>{n.emit(iw.PRELOAD_COMPLETE),d8().emit(d5.PRELOAD,!1,{message:`preloading finished succesfully for ${e.id}`})},[_o.CANCEL_PRELOAD]:e=>{n.emit(iw.PRELOAD_CANCELLED),d8().emit(d5.PRELOAD,!1,{message:`preloading got cancelled for ${e.id}`})},[_o.TRIGGER_VIEWABLE_CHANGE]:()=>{let n=oP(o1().state);e.triggerEvent(n.getId(),_$.VIEWABLE_CHANGE,t.isViewable())},[_o.MARK_PRELOAD_SUCCESS]:p({preloadSuccess:!0})}});var ce=(e,t)=>o2(d7(e,t),d9());(v0=TF||(TF={}))[v0.Eligible=1]="Eligible",v0[v0.Not_Eligible=2]="Not_Eligible",v0[v0.Started=3]="Started",v0[v0.Canceled=4]="Canceled";var ct=(e,t=ot())=>{let n=t8(e?1:2);return[e=>{1===n.value&&(n.value=3,t.startPreloading(e))},e=>{3===n.value&&(n.value=4,t.cancelPreloading(e))}]},cn=(e=iz())=>{let t=t8(e.getEventCount({type:"scene-event",event:iw.CLICK,data:{scene_id:"",scene_type:eV.endcard}})>0);return sO("scene-event",((e,n)=>{n.event===iw.CLICK&&(t.value=!0)}),e),[t.value]},ci=()=>{tf((()=>{let e=e=>{e.preventDefault=()=>{},e.stopImmediatePropagation=()=>{},e.stopPropagation=()=>{}};return window.addEventListener("touchstart",e),window.addEventListener("touchend",e),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("touchend",e)}}),[])};const cr=tK(!1),ca=(e,t)=>{if(t)return cr.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig()};var co=({scene:e,sendAdEvent:t,shouldRenderIFrame:n=!0,isCloseButtonVisible:i=!0,eligibleToPreload:r=!1,startPreloading:a=!1,customClassName:o,sceneEventReportingService:s})=>{let l=new dJ(e),[d]=ce(r,e.getId()),c=d.value.matches(_a.SHOWING);sp(e.getId(),e.getAppStoreOnDelayConfig(),!0,c),sg(e.getStoreKitOverlayAutoShowConfig(),c),sK({callToActionConfig:ca(e,c),trackingEventMapConfig:e.isAlternative()?void 0:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sG({fullScreenClickConfig:c&&cr.value?e.getLastChanceEndcardConfig().fsc:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sO("cta",((e,t)=>{c&&!cr.value&&d3(e,t)}));let[u,E]=ct(r);sO("video",((t,n)=>{if(r)switch(n.event){case iq.SUSPEND:var i,a;(null===(i=n.data)||void 0===i?void 0:i.readyState)&&(null===(a=n.data)||void 0===a?void 0:a.readyState)<HTMLMediaElement.HAVE_FUTURE_DATA&&E(e.getId());break;case iq.WAITING:E(e.getId());break;case iq.CAN_PLAY_THROUGH:u(e.getId())}})),sH(t,c),oy(c),sX(e,c),s2(cr.value,c),tf((()=>{c&&t({type:_l.CREATIVE_VIEW})}),[c]),tf((()=>{a&&u(e.getId())}),[e,a]);let[v]=cn(s),_=l.getLastChanceEndcardConfig(aE.isEndcardOnly(),v);return ci(),d.value.matches(_a.INITIAL)?null:aQ(e8,{children:[c&&aQ(sB,{config:_,sendAdEvent:t,onVisibilityChange:e=>{cr.value=e}}),aQ("div",{className:null!=o?o:TH,id:e.getId(),style:{visibility:d.value.matches(_a.PRELOADING)?"hidden":""},children:[i&&!cr.value&&aQ(sP,{sendAdEvent:t,config:l.getCloseButtonConfig(),showLastChanceEndcard:_.enabled}),n&&aQ(d1,{sendAdEvent:t,htmlService:l,scene:e})]})]})},cs=class extends n3{getTransitions(){let e=super.getTransitions();return e.push(n5,n4,n6,n$,nZ,nq,nQ),e}getId(){return this.id}getHtml(){return this.html}getDecodedHtml(){return V(this.html)}getSceneType(){return this.sceneType}addScenes(e){this.scenes.push(...e)}getScenes(){return this.scenes}getSceneById(e){return this.scenes.find((t=>t.getId()===e))}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nW.CLOSE:this.closeButtonConfig.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}static getInstances(){return[]}constructor({id:e,html:t,children:n,closeButtonConfig:i,lastChanceEndcardConfig:r,placementTypeService:a=j()}){super({isFullscreen:null==a?void 0:a.isFullscreen()}),this.scenes=[],this.id=e,this.html=t,this.children=n,this.closeButtonConfig=i,this.lastChanceEndcardConfig=r,this.placementTypeService=a,this.sceneType=eV.composite}},cl=(e,t=$)=>tD((()=>{let n=t();return n instanceof cs&&n.getSceneType()===eV.composite&&n.getScenes().find((t=>t.getId()===e))||null}),[e]),cd=(e=o1)=>tD((()=>e().send),[]);TG="_37VDnG_component",TK="_37VDnG_composite",TY="_37VDnG_compositeHtml",Tj="_37VDnG_compositeImage";var cc=({sceneId:e,injectedGetCurrentScene:t,injectedGetAdMachineInterpreter:n})=>{let i=cl(e,t),r=cd(n);return aQ("div",{className:TG,children:[aL(i)&&aQ(co,{scene:i,sendAdEvent:r,shouldRenderIFrame:!0,isCloseButtonVisible:!1,eligibleToPreload:!1,customClassName:TY,startPreloading:!1},i.getId()),i instanceof aE&&i.getSceneType()===eV.image&&aQ(s5,{scene:i,sendAdEvent:r,isCloseButtonVisible:!1,customClassName:Tj,useBackgroundImage:!0},i.getId()),ay(i)&&aQ(di,{scene:i,sendAdEvent:r,isCloseButtonVisible:!1,isFreeForm:!0,isComposite:!0,showVideoBlur:!0},i.getId())]})};const cu=tK(!1);var cE=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{sH(t),oy(),sX(e);let i=tD((()=>e.getDecodedHtml()),[e]);return aQ("div",{className:TK,children:[aQ(sB,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{cu.value=e}}),n&&!cu.value&&aQ(sP,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),e&&e.getSceneType()===eV.composite&&aQ("div",{className:TK,children:aQ(dA,{htmlString:i,VmComponent:cc})})]})},cv=(e=oE())=>{let t=e.getVideoInterpreter(),n=t8(null==t?void 0:t.state);return tf((()=>{if(!t)return()=>{};let{state:e,status:i}=t;i!==eA.Running&&t.start({context:e.context,value:e.value});let r=t.subscribe((e=>{n.value=e}));return()=>{r.unsubscribe()}}),[t]),[n]},c_=()=>es();TX="i0Mp0G_animatingVideo",Tz="i0Mp0G_animationEnded",T$="i0Mp0G_pictureInPictureContainer",TZ="i0Mp0G_slideLeft",Tq="i0Mp0G_slideUp";var ch=({isPrivacyDrawerOpen:e,service:t=oE(),pictureInPictureReportingService:n=c_()})=>{var i;let r=tN(null),[a]=cv(t),o=tD((()=>a9()),[]),s=t8(!1),l=t8(!1),d=t8(!1),c=e=>{e===Th.LEFT&&(d.value=!0),e===Th.UP&&(l.value=!0)},u=()=>{n.emit({type:"picture-in-picture",event:nD.CLOSE,fireOnlyOnce:!0})};tf((()=>{let e=t.getVideoElement(),n=r.current;e&&n&&(n.appendChild(e),s.value=!0,e.onended=()=>{u()})}),[]);let E=(n,i)=>{t.videoAdViewableChange(n,i,e)};return tf((()=>(o.addEventHandler("viewability",E),()=>{o.removeEventHandler("viewability",E)})),[o]),tf((()=>{var e;let n=t.getVideoElement();if(n)switch(null===(e=a.value)||void 0===e?void 0:e.value){case _Y.PLAYING:n.play();break;case _Y.PAUSED:n.pause()}}),[null===(i=a.value)||void 0===i?void 0:i.value]),tf((()=>{r.current&&(t.isPortrait()?r.current.style.height="auto":r.current.style.width="auto")}),[t.isPortrait()]),sG(t.getFullScreenCallToActionEventHandlerProps()),aQ(dT,{onSwipeUp:()=>c(Th.UP),onSwipeLeft:()=>c(Th.LEFT),children:aQ("button",{type:"button","aria-label":"Picture in Picture",ref:r,onClick:()=>t.clickHandler(),onAnimationEnd:()=>{s.value=!1},onTransitionEnd:u,className:sl(T$,`${s.value?TX:Tz}`,`${d.value?TZ:""}`,`${l.value?Tq:""}`)})})},cT=({isCloseButtonVisible:e,scene:t,sendEvent:n,shouldRenderIFrame:i,preloadService:r=ot()})=>{let a=r.getHTMLScenesToPreload(t);return(null==a?void 0:a.length)?aQ("div",{children:a.map((e=>aQ(co,{scene:e.scene,sendAdEvent:n,shouldRenderIFrame:e.shouldRenderIFrame,isCloseButtonVisible:e.isCloseButtonVisible,eligibleToPreload:!0,startPreloading:e.startPreloading},e.scene.getId())))}):aL(t)&&aQ(co,{scene:t,sendAdEvent:n,shouldRenderIFrame:i,isCloseButtonVisible:e,eligibleToPreload:!1,startPreloading:!1},t.getId())},cS=(e,t,n,i=eZ())=>{i.emit({name:eP.FRUSTRATION_CLICKS,scene_id:null==n?void 0:n.getId(),scene_type:null==n?void 0:n.getSceneType(),coordinates:[e,t].join(",")})};TQ="gRz7DW_ad";var cp=({theatreModeReportingService:e=i3()})=>{let t=tD((()=>lI(dC,e)),[e]),[n,i]=o9(),r=oP(n.value),a=r.getSceneType();dI(cS,r);let{isCloseButtonVisible:o,isPrivacyButtonVisible:s,isPrivacyDrawerOpen:l,shouldRenderIFrame:d,shouldRenderPictureInPicture:c,isFreeForm:u,allowDebug:E}=n.value.context,v=s&&a!==eV.closed;return aQ("div",{id:TQ,children:aQ(sr,{children:[aQ(dd,{}),c&&aQ(ch,{isPrivacyDrawerOpen:l}),v&&aQ(t,{sendAdEvent:i,allowDebug:E}),a===eV.gdpr&&aQ(so,{sendAdEvent:i}),a===eV.image&&aQ(s5,{scene:r,sendAdEvent:i,isCloseButtonVisible:o},r.getId()),a===eV.video&&aQ(di,{scene:r,sendAdEvent:i,isCloseButtonVisible:o,isFreeForm:u,theatreModeReportingService:e},r.getId()),aQ(cT,{isCloseButtonVisible:o,scene:r,sendEvent:i,shouldRenderIFrame:d}),a===eV.composite&&aQ(cE,{scene:r,sendAdEvent:i,isCloseButtonVisible:o},r.getId()),a===eV.closed&&aQ(si,{})]})})},cg=(e=o1(),t=o8(),n=o7,i=oP)=>{let r=i(e.state);z.setValue({scene:r}),t.start(r),n(r),e.start()},cC=()=>{let e=r.getInstance();if(e.has(aZ.getServiceIdentifier()))return e.get(aZ.getServiceIdentifier())},cI=async(e,t,n)=>{var i;let r=0,a=0,o=0,s=n.getPlacementType(),l=t.get(L.AD_SOURCE),d=t.get(L.CREATIVE_ID),c=null!==(i=t.get(L.ORIGINAL_VIDEO_URL))&&void 0!==i?i:t.get(L.MAIN_STREAM);try{(await e.getAllRecords()).forEach((({placementType:e,creativeId:t,adSource:n,videoUrl:i})=>{e===s&&(r+=1),t===d&&n===l&&(a+=1),i===c&&(o+=1)}))}catch(e){return Promise.reject(Error("Failed to get user activities"))}return{ad_count:r,same_creative:a,same_video:o}};const cO=async(e=cC(),t=y(),n=j(),i=eZ(),a=cI)=>{let o={name:eP.AD_START,elapsed:Date.now()-r.getInstance().startTimestamp};if(or(t)&&(o=d({},o,oa(t))),e)try{await e.addRecord(),o=d({},o,await a(e,t,n))}catch(e){}i.emit(o)};var cA=()=>{let e=r.getInstance(),t=new s_;e.bind(s_.getServiceIdentifier(),t)},cm=()=>{let e=r.getInstance(),t=new sx;e.bind(sx.getServiceIdentifier(),t)},cf=(e=Y(),t=R())=>{let n=r.getInstance(),i=on.getServiceIdentifier(),a=Object.values(_$);e.getMraidVersion().isLessThan(aJ.V5_2_1)&&(a=a.filter((e=>e!==_$.SILENT_CHANGE)));let o=new on(a,t);n.bind(i,o),o.init()};const cN=(e,t,n,i)=>{let r=t.getOperatingSystem()===eR.iOS,a=a5(i),o=t.getSdkVersion(),s=n.isInLine();return!(!r||a||!(o.isEqualTo(new b("7.4.0"))&&s||o.isGreaterThanOrEqualTo(new b("7.4.1"))))||e};var cD=(e=a2(),t=a1(),n=ou(),i=Y(),r=j(),a=nf())=>{let o=!!i.getMraidVersion().isGreaterThanOrEqualTo(aJ.V5_2_1)&&cN(t,i,r,a);e||o?n.mute():n.unmute()},cR=()=>{let e=r.getInstance(),t=Z.getServiceIdentifier();return e.get(t)},cy=X({adType:void 0},"AdTypeContext"),cL=(e,t,n,i)=>{var a,o,s,l,c,u,E,v,_,h,T,S,p,g,C,I;let O=d({ad_source:null!==(o=e.get(L.AD_SOURCE))&&void 0!==o?o:"",ad_type:null!==(s=cy.getValue().adType)&&void 0!==s?s:"",advertiser_domain:null!==(l=e.get(L.ADVERTISER_DOMAIN))&&void 0!==l?l:"",app_name:"View Master Loki",app_environment:"production",browser_name:t.getBrowserName(),browser_version:t.getBrowserVersion(),creative_format:null!==(c=e.get(L.CREATIVE_FORMAT))&&void 0!==c?c:"",creative_format_version:null!==(u=e.get(L.CREATIVE_FORMAT_VERSION))&&void 0!==u?u:"",creative_id:null!==(E=e.get(L.CREATIVE_ID))&&void 0!==E?E:"",device_country_code:t.getDeviceCountryCode(),device_model:t.getDeviceModel(),device_type:t.getDeviceType(),dsp:n.getAdSource()===P.ACCELERATE?"accelerate":"others",elapsed:Date.now()-r.getInstance().startTimestamp,event_id:null!==(v=e.get(L.SESSION_ID))&&void 0!==v?v:"",is_header_bidding:q(e.get(L.HEADER_BIDDING)),is_incentivized:Q(e),mediation_name:null!==(_=e.get(L.MEDIATION_NAME))&&void 0!==_?_:"",nautilus_version:null!==(h=e.get(L.NAUTILUS_VERSION))&&void 0!==h?h:"0.0.0",observed_experiments:null!==(T=e.get(L.OBSERVED_EXPERIMENTS))&&void 0!==T?T:"",os_version:t.getOsVersion().toString(),placement_type:n.getPlacementType(),platform:t.getOperatingSystem(),session_id:null!==(S=e.get(L.SESSION_ID))&&void 0!==S?S:"",sdk_version:t.getSdkVersion().toString(),template_version:null!==(p=window.appVersion)&&void 0!==p?p:"0.0.0",placement_id:null!==(g=e.get(L.PLACEMENT_ID))&&void 0!==g?g:"",pub_id:null!==(C=e.get(L.PUB_ID))&&void 0!==C?C:""},null===(a=i())||void 0===a?void 0:a.getObservabilityData()),A=null!==(I=e.get(L.ACC_TESTS))&&void 0!==I?I:"";return n.getAdSource()===P.ACCELERATE&&A&&(O.acc_tests=V(A)),O};class cP{getUrl(){return`${this.endpoint}/api/v1/push`}static getTimestampString(e){return""+1e6*(null!=e?e:new Date).getTime()}static formatAttributes(e,t){return`${Object.keys(e).map((t=>[t,e[t]])).map((([e,t])=>`${e}="${t}"`)).join(" ")} timestamp="${t.toJSON()}"`}getBody(e,t,n){var i,r,a,o;let s=cP.getTimestampString(n),l=cP.formatAttributes(t,n);return JSON.stringify({streams:[{stream:{app:t.app_name,kind:e,adSource:null!==(i=this.tokenService.get(L.AD_SOURCE))&&void 0!==i?i:"",isIncentivized:Q(this.tokenService),placementType:this.placementTypeService.getPlacementType(),platform:this.environmentService.getOperatingSystem(),sdkVersion:this.environmentService.getSdkVersion().toString(),templateVersion:null!==(r=window.appVersion)&&void 0!==r?r:"0.0.0",nautilusVersion:null!==(a=this.tokenService.get(L.NAUTILUS_VERSION))&&void 0!==a?a:"0.0.0",mediationName:null!==(o=this.tokenService.get(L.MEDIATION_NAME))&&void 0!==o?o:"",isHeaderBidding:q(this.tokenService.get(L.HEADER_BIDDING))},values:[[s,l]]}]})}pushEvent(e,t,n){var i;this.isObserved()&&(console.log("pushEvent",e,t),null===(i=this.worker)||void 0===i||i.postMessage(this.getBody(eL.EVENT,d({name:e},cL(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene),t),null!=n?n:new Date)))}pushError(e,t,n){var i,r,a;if(!this.isObserved())return;let o="",s="";"string"==typeof e?o=e:(s=null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:"",o=null!==(a=null==e?void 0:e.message)&&void 0!==a?a:""),null===(i=this.worker)||void 0===i||i.postMessage(this.getBody(eL.ERROR,d({message:o,stack:s},cL(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene),t),null!=n?n:new Date))}isObserved(){return q(this.tokenService.get(L.OBSERVABILITY))}startWorker(){let e=new Blob([`\n      let queue = [];\n\n      self.addEventListener('message', function(event) {\n        const message = event.data;\n        queue.push(message);\n      });\n\n      function sendMessages() {\n        if (queue.length > 0) {\n          const message = queue.shift();\n          fetch('${this.getUrl()}', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'X-Scope-OrgID': 'viewmaster',\n            },\n            body: message // message is already stringified\n          })\n          .then(function (response) {\n            if (!response.ok) {\n              throw new Error('Failed to send message');\n            }\n          })\n          .catch(function (error) {\n            console.error('Error sending message:', error);\n          })\n          .finally(function () {\n            sendMessages(); // Continue sending messages\n          });\n        } else {\n          setTimeout(sendMessages, 100); // Check for new messages every 100 milliseconds\n        }\n      }\n      sendMessages();\n    `],{type:"application/javascript"}),t=URL.createObjectURL(e);this.worker=new Worker(t)}constructor(e,t,n,i,r){this.endpoint=e,this.tokenService=t,this.environmentService=n,this.placementTypeService=i,this.getCurrentScene=r,this.startWorker()}}var cw=class{getUrl(){return`${this.endpoint}/vm/logs`}pushEvent(e,t,n){this.sendLog(d(C(d({},cL(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene)),{kind:eL.EVENT,timestamp:null!=n?n:new Date,name:e}),t))}pushError(e,t,n){let i="",r="";var a,o;"string"==typeof e?i=e:(r=null!==(a=null==e?void 0:e.stack)&&void 0!==a?a:"",i=null!==(o=null==e?void 0:e.message)&&void 0!==o?o:"");this.sendLog(d(C(d({},cL(this.tokenService,this.environmentService,this.placementTypeService,this.getCurrentScene)),{kind:eL.ERROR,timestamp:null!=n?n:new Date,message:i,stack:r}),t))}isObserved(){return q(this.tokenService.get(L.OBSERVABILITY))}sendLog(e){this.isObserved()&&navigator.sendBeacon(this.getUrl(),JSON.stringify(e))}constructor(e,t,n,i,r){this.endpoint=e,this.tokenService=t,this.environmentService=n,this.placementTypeService=i,this.getCurrentScene=r}},cb=class{pushEvent(e,t,n){this.lokiProxyDto.pushEvent(e,t,n),this.vmLogsDto.pushEvent(e,t,n)}pushError(e,t,n){this.lokiProxyDto.pushError(e,t,n),this.vmLogsDto.pushError(e,t,n)}isObserved(){return q(this.tokenService.get(L.OBSERVABILITY))}constructor(e,t,n,i,r,a){this.tokenService=n,this.lokiProxyDto=new cP(e,n,i,r,a),this.vmLogsDto=new cw(t,n,i,r,a)}},cV=(e,t,n,i)=>new cb("https://logging-gateway.vungle.io:32443/log/loki","https://logs.ads.vungle.com",e,t,n,i),cM=(e=cR())=>{e.init(cV)},ck="product-view";(v1=TJ||(TJ={})).ADD_VIEWABILITY_HANDLER="addViewabilityHandler",v1.CLOSE_STORE_VIEW="closeStoreView",v1.OPEN_STORE_VIEW="openStoreView",v1.REMOVE_VIEWABILITY_HANDLER="removeViewabilityHandler",v1.SHOW_FALLBACK="showFallback",v1.UPDATE_OPEN_COUNT="updateOpenCount";var cU=TJ,cB=(e,t)=>e.interpreterMap.get(t),cH=(e=no(),t=ck)=>cB(e,t);const cW=e=>"store-kit-orchestration"===e.type&&null!=e.event;var cx=class extends el{emit(e){cW(e)?this.wrappedService.emit(e):this.wrappedService.emit({type:"store-kit-orchestration",event:e})}},cF=e=>new cx(null!=e?e:es());(v2=T0||(T0={})).SKPV_FALLBACK_TO_SKO="SKPV_FALLBACK_TO_SKO",v2.SKO_FALLBACK_TO_SKPV="SKO_FALLBACK_TO_SKPV",v2.STORE_KIT_FALLBACK_TO_MRAID="STORE_KIT_FALLBACK_TO_MRAID";var cG=T0,cK=()=>es();(v3=T1||(T1={})).APP_STORE_OPEN="APP_STORE_OPEN",v3.APP_STORE_CLOSE="APP_STORE_CLOSE";var cY=T1;const cj=()=>({id:ck,initial:_I.HIDDEN,context:{delay:0,openCount:0},states:{[_I.SHOWING]:{on:{[_C.CLOSE]:{target:_I.HIDDEN,actions:[cU.CLOSE_STORE_VIEW,cU.REMOVE_VIEWABILITY_HANDLER]},[_C.SET_FALLBACK]:{target:_I.FALLBACK,actions:[cU.REMOVE_VIEWABILITY_HANDLER]}}},[_I.HIDDEN]:{on:{[_C.OPEN]:{target:_I.SHOWING,actions:[cU.ADD_VIEWABILITY_HANDLER,cU.UPDATE_OPEN_COUNT,cU.OPEN_STORE_VIEW]}}},[_I.FALLBACK]:{on:{[_C.OPEN]:{actions:[cU.SHOW_FALLBACK]}}},[_I.INITIAL]:{},[_I.PREPARING]:{},[_I.DONE]:{}}}),cX=(e,t)=>{var n;t.event===nU.MAXIMIZED&&(null===(n=cH())||void 0===n||n.send({type:_C.CLOSE}))},cz=(e=R(),t=a9(),n=cK(),i=cF())=>({actions:{[cU.OPEN_STORE_VIEW]:()=>{var t,i;n.emit({type:"store-kit-product-view",event:cY.APP_STORE_OPEN}),null===(i=e.getMraidExt())||void 0===i||null===(t=i.openAppStore)||void 0===t||t.call(i,0)},[cU.CLOSE_STORE_VIEW]:()=>{n.emit({type:"store-kit-product-view",event:cY.APP_STORE_CLOSE})},[cU.ADD_VIEWABILITY_HANDLER]:()=>{t.addEventHandler("viewability",cX)},[cU.REMOVE_VIEWABILITY_HANDLER]:()=>{t.removeEventHandler("viewability",cX)},[cU.UPDATE_OPEN_COUNT]:p({openCount:e=>e.openCount?e.openCount+1:1}),[cU.SHOW_FALLBACK]:()=>{i.emit(cG.SKPV_FALLBACK_TO_SKO)}}});(v5=T2||(T2={})).PREPARE_STORE_VIEW="prepareStoreView",v5.SET_APP_STORE_ID="setAppStoreId";const c$=d({},cU,T2),cZ=()=>({id:ck,initial:_I.INITIAL,context:{delay:0,openCount:0,appStoreId:void 0},states:{[_I.INITIAL]:{on:{[_C.READY]:{target:_I.PREPARING,actions:[c$.SET_APP_STORE_ID,c$.PREPARE_STORE_VIEW]}}},[_I.PREPARING]:{on:{[_C.PREPARE_SUCCESS]:{target:_I.HIDDEN}}},[_I.SHOWING]:{on:{[_C.CLOSE]:{target:_I.INITIAL,actions:[cU.CLOSE_STORE_VIEW,cU.REMOVE_VIEWABILITY_HANDLER]}}},[_I.HIDDEN]:{on:{[_C.OPEN]:{target:_I.SHOWING,actions:[cU.ADD_VIEWABILITY_HANDLER,cU.UPDATE_OPEN_COUNT,cU.OPEN_STORE_VIEW]}}},[_I.FALLBACK]:{},[_I.DONE]:{}}}),cq=(e=R(),t=a9(),n=cK(),i=cF())=>({actions:C(d({},cz(e,t,n,i).actions),{[c$.SET_APP_STORE_ID]:p({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[c$.PREPARE_STORE_VIEW]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreView)||void 0===n||n.call(i,t.appStoreId)},[c$.OPEN_STORE_VIEW]:t=>{var i,r;t.appStoreId&&(n.emit({type:"store-kit-product-view",event:cY.APP_STORE_OPEN}),null===(r=e.getMraidExt())||void 0===r||null===(i=r.presentStoreView)||void 0===i||i.call(r,t.appStoreId))}})});var cQ=class extends ny{init(e){var t;null===(t=this.interpreter)||void 0===t||t.send(d({type:_C.READY},e))}close(){var e,t;null===(e=this.interpreter)||void 0===e||e.send({type:_C.CLOSE}),null===(t=this.interpreter)||void 0===t||t.send({type:_C.READY})}constructor(e=cZ,t=cq,n=no()){super(e(),t(),n)}};const cJ=()=>{let e=cj(),t=e.states[_I.SHOWING];return t.on=C(d({},t.on),{[_C.CLOSE]:{target:_I.DONE,actions:[cU.CLOSE_STORE_VIEW,cU.REMOVE_VIEWABILITY_HANDLER]}}),e},c0=()=>cJ();var c1=class extends ny{fallback(){var e;!1!==this.hasFallback&&(null===(e=this.interpreter)||void 0===e||e.send({type:_C.SET_FALLBACK}),this.open())}constructor(e=cj,t=cz,n=no()){super(e(),t(),n)}},c2=class extends c1{constructor(e=c0,t=cz,n=no()){super(e,t,n)}};const c3=()=>{let e=cZ(),t=e.states[_I.SHOWING];return t.on=C(d({},t.on),{[_C.CLOSE]:{target:_I.DONE,actions:[cU.CLOSE_STORE_VIEW,cU.REMOVE_VIEWABILITY_HANDLER]}}),e},c5=()=>c3();var c4=class extends cQ{constructor(e=c5,t=cq,n=no()){super(e,t,n)}},c6=class extends c1{constructor(e=cJ,t=cz,n=no()){super(e,t,n)}},c8=class extends cQ{constructor(e=c3,t=cq,n=no()){super(e,t,n)}},c7=class{withAppStoreId(e){let t=io(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){let e=new b("17.2"),t=new b("7.0"),n=new b("7.1"),i=new b("7.2.1");if(this.environmentService.getOsVersion().isGreaterThanOrEqualTo(e)){let e=this.environmentService.getSdkVersion();if(dw()&&e.isLessThan(i))return new c2;if(e.isGreaterThanOrEqualTo(t)&&e.isLessThan(n))return this.withAppStoreId(new c4)}return M.isAffectedByStoreKitProductViewMaskIssue(this.environmentService)?dw()?new c6:this.withAppStoreId(new c8):dw()?new c1:this.withAppStoreId(new cQ)}constructor(e=Y(),t=y()){this.environmentService=e,this.tokenService=t}},c9=class{resolve(){if(this.environmentService.getOperatingSystem()===eR.iOS)return new c7(this.environmentService).resolve()}constructor(e=Y()){this.environmentService=e}};(v4=T3||(T3={})).RESET_VIEWABLE="resetViewable",v4.SET_VIEWABLE_TO_FALSE="setViewableToFalse";var ue=e=>({resetViewable:()=>{(e||a7()).resetViewable()},setViewableToFalse:()=>{(e||a7()).setViewable(!1)}});const ut=()=>({id:ck,initial:_I.HIDDEN,context:{delay:0},states:{[_I.SHOWING]:{on:{[_C.CLOSE]:{target:_I.HIDDEN,actions:[T3.RESET_VIEWABLE,_d.START_INTERVALS]}}},[_I.HIDDEN]:{on:{[_C.OPEN]:{target:_I.SHOWING,actions:[T3.SET_VIEWABLE_TO_FALSE,_d.PAUSE_INTERVALS]}}},[_I.INITIAL]:{},[_I.PREPARING]:{},[_I.FALLBACK]:{},[_I.DONE]:{}}}),un=(e=a7(),t=nc())=>({actions:d({},ue(e),nu(t))});var ui=class extends ny{constructor(e=ut,t=un,n=no(),i=a7(),r=nc()){super(e(),t(i,r),n)}},ur=(e=Y())=>{let t=r.getInstance(),n=new c9(e).resolve();return n&&t.bind(ui.getServiceIdentifier(),n),n};class ua extends nd{static getInstances(e=oX()){return e?[new ua(et)]:[]}getId(){return this.id}getSceneType(){return this.sceneType}constructor(e){super(),this.id=e,this.sceneType=eV.gdpr}}var uo=class extends n7{getFullScreenClickConfig(){var e;return{enabled:void 0!==this.ecImageTokenValue||super.getFullScreenClickConfig().enabled,ctaUrl:null!==(e=this.ecCtaUrlTokenValue)&&void 0!==e?e:"",id:this.id,target:super.getFullScreenClickConfig().target}}constructor({id:e,ecImageTokenValue:t,ecCtaUrlTokenValue:n,skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,placementType:s}){super({skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,id:e,placementType:s}),this.ecImageTokenValue=t,this.ecCtaUrlTokenValue=n}},us=(e,t=!1,n=nf(),i=nE())=>{let r=iR(n,iE.RESOURCE,_L.IMAGE).pipe(iy()).pipe(iL(iP(n,iw.SCENE_END))),a=C(d({},i$(n,t)),{error_count:r});return e.enabled&&(a.grant_reward=ra(eV.image,e,n,i)),a};class ul extends aE{getSceneType(){return this.sceneType}getFullScreenClickConfig(){return this.fullScreenClickConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nW.CLOSE:this.closeButtonConfig.style})}getCallToActionConfig(){return this.callToActionConfig}getEventStreams(){return this.eventStreams?this.eventStreams:us(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}static getInstances(e=y(),t=j(),n=Y(),i=iv(),r=as(),a=ad()){let o=[],s=[L.EC_IMAGE,L.EC_IMAGE_2],l=e.has(L.EC_HTML);return s.filter((t=>e.has(t))).forEach(((r,s)=>{var d;let c=`image_${s}`,u=l?s+1:s,E=new iS(iT(c,e,t),i);o.push(new ul({id:c,url:null!==(d=e.get(r))&&void 0!==d?d:"",index:u,fullScreenClickConfig:new uo({id:c,ecImageTokenValue:e.get(L.EC_IMAGE),ecCtaUrlTokenValue:e.get(L.EC_CTA_URL),skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new id(u,this.isEndcardOnly(e),io(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.EC_SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new ic(u,io(e),e.get(L.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),trackingEventMapConfig:new ig(!1).getTrackingEventMapConfig(),closeButtonConfig:new ip({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===u}).getCloseButtonConfig(),callToActionConfig:new iC({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:rE(e,i)}).getCallToActionConfig(),placementTypeService:t,shouldSplitVideoEndcardClick:q(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new rv({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:a}))})),o}constructor({id:e,url:t,index:n,fullScreenClickConfig:i,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,closeButtonConfig:s,trackingEventMapConfig:l,callToActionConfig:d,placementTypeService:c=j(),shouldSplitVideoEndcardClick:u=!1,eventStreams:E,incentivizedConfig:v,iframeService:_=ad()}){super({id:e,endcardContent:t,index:n,isAlternative:!1,compressionType:_B.NONE,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,omsdkEnabled:!1,trackingEventMapConfig:l,callToActionConfig:d,closeButtonConfig:s,placementTypeService:c,eligibleToPreload:!1,shouldSplitVideoEndcardClick:u,eventStreams:E,incentivizedConfig:v,iframeService:_}),this.sceneType=eV.image,this.id=e,this.url=t,this.index=n,this.fullScreenClickConfig=i,this.storeKitOverlayAutoShowConfig=r,this.appStoreOnDelayConfig=a,this.lastChanceEndcardConfig=o,this.trackingEventMapConfig=l,this.callToActionConfig=d,this.closeButtonConfig=s,this.placementTypeService=c,this.eventStreams=E}}var ud=class{static getInstances(e=y(),t=j(),n=iv()){let i="ALT_MAIN_STREAM_",r="ALT_MAIN_VIDEO_",a=[];return[...e.getSeriesTokens(i),...e.getSeriesTokens(r)].forEach(((o,s)=>{var l;let d=o.startsWith(i),c=o.split(d?i:r),u=c[c.length-1],E=new iS(iT(u,e,t),n);a.push(new aR({id:u,url:null!==(l=e.get(o))&&void 0!==l?l:"",index:s,isAlternative:!0,theatreModeEnabled:!1,videoType:d?_W.HLS:_W.PROGRESSIVE,fullScreenClickConfig:new n7({skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:new aT(ah(e,t,n)).getCallToActionConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),progressBarConfig:new a_({videoProgressBarTokenValue:e.get(L.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(L.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(L.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),closeButtonConfig:new av({closeButtonDelaySecondsTokenValue:e.get(L.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(L.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(L.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(L.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),trackingEventMapConfig:new ig(!1).getTrackingEventMapConfig(),loopVideo:!1,isFullscreen:t.isFullscreen(),showDownloadButton:q(L.VIDEO_SHOW_CTA),incentivizedConfig:new rv({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}},uc=class{static getInstances(e=y(),t=j(),n=iv(),i=as(),r=ad()){let a="ALT_EC_",o=[],s=e.getSeriesTokens(a),l=e=>{let t=e.split(a);return t[t.length-1]};return s.forEach(((a,s)=>{var d;let c=l(a),u=new iS(iT(c,e,t),n);o.push(new aE({id:c,endcardContent:i.decode(null!==(d=e.get(a))&&void 0!==d?d:"",!1),index:s,isAlternative:!0,compressionType:_B.BASE64_ENCODED,storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:u.getLastChanceEndcardConfig(),omsdkEnabled:!1,closeButtonConfig:new ip({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:!1}).getCloseButtonConfig(),trackingEventMapConfig:{enabled:!1},callToActionConfig:new iC({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:rE(e,n)}).getCallToActionConfig(),placementTypeService:t,eligibleToPreload:!1,incentivizedConfig:new rv({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:r}))})),o}},uu=class{addTransformer(e){return this.transformers.push(e),this}build(){return this.mainScenes=this.buildMainScenes(),this.alternativeScenes=this.buildAlternativeScenes(),this.transformers.forEach((e=>{e.transform(this.mainScenes)})),this.mainScenes}buildMainScenes(){return[...ua.getInstances(),...aR.getInstances(),...aE.getInstances(),...ul.getInstances(),...iO.getInstances()]}buildAlternativeScenes(){let e,t=[...ud.getInstances(),...uc.getInstances()],n=this.mainScenes.findIndex((e=>e.getSceneType()===eV.endcard)),i=this.mainScenes[n+1];return i&&(e=i),t.forEach((t=>{let n=t.getTransitions().find((e=>e.name===_l.NEXT));n?n.scene=e:t.addTransition({name:_l.NEXT,scene:e,actions:[]}),t.next=e})),t}constructor(){this.transformers=[],this.mainScenes=[],this.alternativeScenes=[],this.tokenService=y()}},uE=class{transform(e){return e.forEach(((t,n)=>{var i,r;if(n===e.length-1)return;let a=t.getTransitions().find((e=>e.name===_l.NEXT));a?a.scene=null!==(i=e[n+1])&&void 0!==i?i:void 0:t.addTransition({name:_l.NEXT,scene:null!==(r=e[n+1])&&void 0!==r?r:void 0,actions:[]})})),e}},uv=()=>!!ng()&&q(y().get(L.APP_STORE_ON_FIRST_TRANSITION)),u_=class{transform(e){return e.length&&this.insertionHelper(e[0],this.index),e}insertionHelper(e,t){var n;if(0===t)return;let i=null===(n=e.getTransitions())||void 0===n?void 0:n.find((e=>e.name===_l.NEXT&&e.scene)),r=null==i?void 0:i.scene;if(i&&r){if(this.ineligibleSceneTypes.includes(e.getSceneType()))return void this.insertionHelper(r,t);if(1===t)return void(i.actions.some((e=>e.name===_A.SHOW_PRODUCT_VIEW))||i.actions.push({name:_A.SHOW_PRODUCT_VIEW}));this.insertionHelper(r,t-1)}}constructor(e){this.index=e,this.ineligibleSceneTypes=[eV.gdpr]}},uh=()=>!!ng()&&q(y().get(L.APP_STORE_ON_SECOND_TRANSITION)),uT=class{transform(e){return this.addCloseAdAction(e,0),e}addCloseAdAction(e,t){var n,i;if(void 0===e[t+1])return;let r=null===(n=e[t].getTransitions())||void 0===n?void 0:n.find((e=>e.name===_l.NEXT&&e.scene));if(r&&r.actions.find((e=>e.name===_A.SHOW_PRODUCT_VIEW))&&(null==r||null===(i=r.scene)||void 0===i?void 0:i.getSceneType())===eV.closed){r.actions.push({name:_A.END_AD_ON_PRODUCT_VIEW_CLOSE});let e=r.scene.getEntryActions().findIndex((e=>e.name===_D.CLOSE_AD));-1!==e&&r.scene.getEntryActions().splice(e,1)}this.addCloseAdAction(e,t+1)}},uS=class{transform(e){if(0===e.length)return[];if(1===e.length)return e[0].prev=void 0,e[0].next=void 0,e;for(let t=0;t<e.length;t+=1)e[t].prev=0===t?void 0:e[t-1],e[t].next=t===e.length-1?void 0:e[t+1];return e}},up=class{transform(e){return e.forEach((e=>{this.sceneTypesToAddPostrollView.includes(e.getSceneType())&&e.addEntryAction({name:nl.POSTROLL_VIEW})})),e}constructor(){this.sceneTypesToAddPostrollView=[eV.video,eV.image,eV.endcard]}},ug=class{transform(e){let t=e.filter((e=>e.getSceneType()===eV.endcard&&!e.isAlternative())),n=e.filter((e=>e.isAlternative()));return t.forEach((e=>{n.forEach((t=>{e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),n.forEach((e=>{n.forEach((t=>{e.getId()!==t.getId()&&e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),e}},uC=class{transform(e){return e.forEach((e=>{this.sceneTypesToInitCheckPoint.includes(e.getSceneType())&&e.addEntryAction({name:iI.INIT_CHECKPOINTS})})),e}constructor(){this.sceneTypesToInitCheckPoint=[eV.image,eV.endcard]}},uI=class{transform(e){return e.forEach((e=>{this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY.includes(e.getSceneType())&&e.addExitAction({name:_D.CLOSE_STOREKIT_OVERLAY})})),e}constructor(){this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY=[eV.video,eV.endcard]}},uO=class{transform(e){return e.forEach((e=>{var t;if(!ay(e))return;let n=e.getTransitions().find((e=>e.name===_l.NEXT)),i=null==n?void 0:n.actions.filter((e=>e.name!==_A.SHOW_PRODUCT_VIEW)),r={name:_l.VIDEO_FAILURE,scene:null==n?void 0:n.scene,actions:null!=i?i:[]};(null===(t=e.next)||void 0===t?void 0:t.getSceneType())!==eV.closed?r.actions.push({name:nl.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE}):r.actions.push({name:nl.SEND_FATAL_VIDEO_ERROR}),e.addTransition(r)})),e}},uA=class{transform(e){return e.filter((e=>{var t;return(null===(t=e.next)||void 0===t?void 0:t.getSceneType())===eV.closed})).forEach((e=>{if(n2(e)){var t;e.setLastChanceEndcardConfig(C(d({},e.getLastChanceEndcardConfig()),{enabled:!0}));let n=[{name:_T.CLOSE_OVERLAY_VIEW},{name:_4.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:_5.SHOW_LAST_CHANCE_ENDCARD},{name:_f.SET_CLOSE_BUTTON_HIDDEN},{name:nl.CLOSE_VIDEO_CURRENT_SCENE}];e.addTransition({name:_l.LAST_CHANCE_ENDCARD,actions:n}),e.addExitAction({name:_5.CLOSE_LAST_CHANCE_ENDCARD});let i=e.getTransitions().find((e=>e.name===_l.NEXT));if(!i)return;e.addOrUpdateTransition({name:_l.NEXT,actions:[{name:_f.SET_CLOSE_BUTTON_VISIBLE},...null!==(t=null==i?void 0:i.actions)&&void 0!==t?t:[]],scene:null==i?void 0:i.scene});let r=null==i?void 0:i.actions.find((e=>e.name===_A.SHOW_PRODUCT_VIEW));if(r&&(e.addOrUpdateTransition({name:_l.LAST_CHANCE_ENDCARD,actions:[r]}),i.actions=i.actions.filter((e=>e.name!==_A.SHOW_PRODUCT_VIEW))),i.actions.some((e=>e.name===nl.SHOW_PICTURE_IN_PICTURE))){let t=e.getTransitions().find((e=>e.name===_l.LAST_CHANCE_ENDCARD));t&&(e.addOrUpdateTransition({name:_l.LAST_CHANCE_ENDCARD,actions:[{name:nl.SHOW_PICTURE_IN_PICTURE},{name:nl.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}]}),t.actions=null==t?void 0:t.actions.filter((e=>e.name!==nl.CLOSE_VIDEO_CURRENT_SCENE)),i.actions=i.actions.filter((e=>e.name!==nl.SHOW_PICTURE_IN_PICTURE&&e.name!==nl.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))}}})),e}},um=(e=y())=>q(e.get(L.VX_ENDCARD)),uf=class{transform(e){return e.forEach((e=>{var t;if(!ay(e)||e.getTransitions().some((e=>e.name===_l.COMPLETE&&void 0!==e.scene)))return;let n=e.getTransitions().find((e=>e.name===_l.NEXT));n&&e.addOrUpdateTransition({name:_l.COMPLETE,scene:null==n?void 0:n.scene,actions:[...null!==(t=n.actions.filter((e=>e.name!==nl.SHOW_PICTURE_IN_PICTURE&&e.name!==nl.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))&&void 0!==t?t:[]]})})),e}},uN=class{transform(e){let t=e[0];if(!t||t.getSceneType()!==eV.video)return e;let n=t.getTransitions().find((e=>e.name===_l.NEXT));return n&&(n.actions=n.actions.filter((e=>e.name!==nl.CLOSE_VIDEO)),n.actions.push({name:nl.SHOW_PICTURE_IN_PICTURE},{name:nl.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}},uD=(e=y())=>q(e.get(L.PICTURE_IN_PICTURE)),uR=()=>{let e=new uu;e.addTransformer(new uE),e.addTransformer(new uS),uv()&&e.addTransformer(new u_(1)),uh()&&e.addTransformer(new u_(2)),uD()&&e.addTransformer(new uN),e.addTransformer(new up),e.addTransformer(new uT),e.addTransformer(new uC),e.addTransformer(new uI),e.addTransformer(new uO),e.addTransformer(new uf);let t=[...e.build(),...e.alternativeScenes];return t=(new ug).transform(t),um()&&(t=(new uA).transform(t)),r.getInstance().bind(ee,t),t},uy=e=>{let t={enabled:!1,isAutoClose:!1};if(!e)return t;let{overlay:n}=e,i=(null==n?void 0:n.autoShowDelay)?1e3*n.autoShowDelay:0,r=!!((null==n?void 0:n.autoCloseDelay)&&n.autoCloseDelay>0),a=(null==n?void 0:n.autoCloseDelay)?1e3*n.autoCloseDelay:0;return d(C(d({},t),{autoShowDelay:i,isAutoClose:r}),r&&{autoCloseDelay:a})},uL=e=>{var t,n,i;return{delay:null!==(t=null==e?void 0:e.delay)&&void 0!==t?t:0,countdown:null===(n=null==e?void 0:e.countdown)||void 0===n||n,style:null!==(i=null==e?void 0:e.style)&&void 0!==i?i:nW.CLOSE}},uP=(e,t=y())=>void 0===e?"":"string"==typeof e?e:t.get(e.token);const uw=e=>(Object.keys(e).forEach((t=>{let n=e[t];(void 0===n||""===n||Array.isArray(n)&&0===n.length)&&delete e[t]})),e);var ub=(e,t=y())=>{var n;let i=uP(null==e?void 0:e.icon,t),r=null==e||null===(n=e.screenshots)||void 0===n?void 0:n.map((e=>uP(e,t))).filter((e=>void 0!==e));return uw({enabled:!(!(null==e?void 0:e.name)||!i),downloads:null==e?void 0:e.downloads,icon:i,name:null==e?void 0:e.name,price:null==e?void 0:e.price,ratingCount:null==e?void 0:e.rating,screenshots:r})},uV=(e,t,n,i=y())=>{var r,a,o,s,l,c,u,E,v,_,h,T,S;let p=!1,g={id:e,enabled:!1};if(!t||0===Object.keys(t).length)return g;let I=null!==(E=null==t?void 0:t.fsc)&&void 0!==E&&E,O=null!==(v=null==t||null===(r=t.cta)||void 0===r?void 0:r.text)&&void 0!==v?v:"Open";Object.keys(null!==(_=null==n?void 0:n.on)&&void 0!==_?_:{}).includes(_l.LAST_CHANCE_ENDCARD)&&(p=!0);let A=ub(t.appMeta,i),f=C(d({},A),{enabled:!(!A.name||!A.icon)}),m=4e3;return(null==t||null===(a=t.cta)||void 0===a?void 0:a.delay)&&(m=1e3*t.cta.delay),C(d({},g),{enabled:p,fsc:{enabled:I,ctaUrl:null!==(h=null==t||null===(o=t.cta)||void 0===o?void 0:o.url)&&void 0!==h?h:"",target:null==t||null===(s=t.storeKit)||void 0===s?void 0:s.fscTarget},appMeta:f,close:uL(null==t?void 0:t.close),cta:{text:O,url:null!==(T=null==t||null===(l=t.cta)||void 0===l?void 0:l.url)&&void 0!==T?T:"",isPersistent:null!==(S=null==t||null===(c=t.cta)||void 0===c?void 0:c.isPersistent)&&void 0!==S&&S,delay:m,appMeta:f,target:null==t||null===(u=t.storeKit)||void 0===u?void 0:u.ctaTarget}})},uM=(e,t,n=y())=>{var i;return{url:null==e?void 0:e.url,text:null==e?void 0:e.text,isPersistent:null==e?void 0:e.isPersistent,delay:(null==e?void 0:e.delay)?1e3*e.delay:0,background:null==e?void 0:e.background,appMeta:(null==e?void 0:e.appMeta)?ub(e.appMeta,n):void 0,target:null!==(i=null==t?void 0:t.ctaTarget)&&void 0!==i?i:eM.SKPV}},uk=e=>{let t=null==e?void 0:e.events;return t?{enabled:!0,events:t}:{enabled:!1}},uU=e=>{if("string"==typeof e)return;let{originalUrl:t}=e;return t&&""!==t.trim()?t:void 0},uB=(e=y())=>({enabled:q(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:q(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))});const uH={composite:(e,t,n,i=j(),r=y())=>new cs({id:e.id,html:e.html,children:e.children,closeButtonConfig:uL(e.close),lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),placementTypeService:i}),endcard:(e,t,n,i=j(),r=y(),a=as(),o=ad())=>{var s;let l=e.compressed?_B.GZIP:_B.BASE64_ENCODED;return new aE({id:e.id,endcardContent:a.decode(e.html,e.compressed),index:t,isAlternative:!1,compressionType:l,storeKitOverlayAutoShowConfig:uy(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),omsdkEnabled:!1,trackingEventMapConfig:uk(e),callToActionConfig:uM(e.cta,e.storeKit,r),placementTypeService:i,closeButtonConfig:uL(e.close),eligibleToPreload:null!==(s=e.preload)&&void 0!==s&&s,incentivizedConfig:uB(r),iframeService:o})},image:(e,t,n,i=j(),r=y(),a=ad())=>{var o,s;return new ul({id:e.id,url:uP(e.url,r),index:t,fullScreenClickConfig:{enabled:e.fsc,ctaUrl:null===(o=e.cta)||void 0===o?void 0:o.url,target:null===(s=e.storeKit)||void 0===s?void 0:s.fscTarget},storeKitOverlayAutoShowConfig:uy(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),trackingEventMapConfig:uk(e),placementTypeService:i,closeButtonConfig:uL(e.close),callToActionConfig:uM(e.cta,e.storeKit,r),incentivizedConfig:uB(r),iframeService:a})},video:(e,t,n,i=j(),r=y())=>{var a,o,s,l,d,c;let u=uP(e.url,r).endsWith(".m3u8")?_W.HLS:_W.PROGRESSIVE,E={enabled:e.fsc,target:null===(a=e.storeKit)||void 0===a?void 0:a.fscTarget,ctaUrl:null===(o=e.cta)||void 0===o?void 0:o.url},v={manifest:null===(s=e.streamManifest)||void 0===s?void 0:s.manifest,track_0:null===(l=e.streamManifest)||void 0===l?void 0:l.track_0,chunks:null===(c=e.streamManifest)||void 0===c||null===(d=c.chunks)||void 0===d?void 0:d.map((e=>uP(e,r))).filter((e=>""!==e))};return new aR({id:e.id,url:uP(e.url,r),isAlternative:!1,showDownloadButton:!1,theatreModeEnabled:!1,index:t,videoType:u,streamManifest:v,progressBarConfig:(()=>{var t,n,i;let r=null!==(i=null==e||null===(t=e.progressBar)||void 0===t?void 0:t.show)&&void 0!==i&&i;return{show:r,color:r&&(null===(n=e.progressBar)||void 0===n?void 0:n.color)?e.progressBar.color:ea}})(),fullScreenClickConfig:E,storeKitOverlayAutoShowConfig:uy(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:uM(e.cta,e.storeKit,r),lastChanceEndcardConfig:uV(e.id,e.lastChanceEndcard,n,r),closeButtonConfig:uL(e.close),originalVideoUrl:uU(e.url),loopVideo:e.looping,muted:e.muted,trackingEventMapConfig:uk(e),isFullscreen:i.isFullscreen(),incentivizedConfig:uB(r)})}};var uW=class{addTransformer(e){return this.transformers.push(e),this}build(){let e=ua.getInstances();return this.scenes.unshift(...e),this.transformers.forEach((e=>{this.scenes=e.transform(this.scenes)})),this.scenes}constructor(e=new oz,t=uH,n=j()){this.converters=t,this.placementTypeService=n,this.transformers=[],this.scenes=[],this.scenesMap=new Map;let i=e.getSceneData(),r=e.getAdMachineConfig(),a=new Map;i.forEach((e=>{a.has(e.type)||a.set(e.type,[]),a.get(e.type).push(e)})),a.forEach(((e,t)=>{let n=this.converters[t];n&&e.forEach(((e,t)=>{let i=n(e,t,r.states[e.id],this.placementTypeService);this.scenes.push(i),this.scenesMap.set(e.id,i)}))}));let o=new iO;this.scenesMap.set(o.getId(),o),this.scenes.push(o),this.scenes.forEach((e=>{let t=r.states[e.getId()];(null==t?void 0:t.on)&&Object.keys(t.on).forEach((n=>{let i=t.on[n],r={name:n,actions:i.actions?i.actions.map((e=>({name:e}))):[],scene:i.target?this.scenesMap.get(i.target):void 0};e.addOrUpdateTransition(r)}))}))}},ux=class{transform(e){return e.filter((e=>!!n2(e)&&e.getLastChanceEndcardConfig().enabled)).forEach((e=>{var t;e.addOrUpdateTransition({name:_l.NEXT,actions:[{name:_5.CLOSE_LAST_CHANCE_ENDCARD},{name:_f.SET_CLOSE_BUTTON_VISIBLE}]});let n=[{name:_T.CLOSE_OVERLAY_VIEW},{name:_4.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:_f.SET_CLOSE_BUTTON_HIDDEN},{name:iI.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}],i=null===(t=e.getTransitions().find((e=>e.name===_l.LAST_CHANCE_ENDCARD)))||void 0===t?void 0:t.actions.some((e=>e.name===nl.SHOW_PICTURE_IN_PICTURE));e.getSceneType()===eV.video&&(i?n.push({name:nl.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}):n.push({name:nl.CLOSE_VIDEO_CURRENT_SCENE})),e.addOrUpdateTransition({name:_l.LAST_CHANCE_ENDCARD,actions:n})})),e}},uF=class{transform(e,t=new oz){let n=t.getAdMachineConfig(),i=t=>e.find((e=>e.getId()===t));return e.forEach((e=>{var t,r,a;let o=e.getId(),s=i(null===(t=null===(a=n.states[o])||void 0===a||null===(r=a.on)||void 0===r?void 0:r.NEXT)||void 0===t?void 0:t.target);s&&(e.next=s,s.prev=e)})),e}},uG=class{transform(e,t=new oz){let n=t.getSceneData(),i=[];return e.forEach((t=>{if(t.getSceneType()===eV.composite){let r=n.find((e=>e.id===t.getId()));if(!r)return;let a=r.children,o=[];a.forEach((t=>{let n=e.find((e=>e.getId()===t));n&&o.push(n)})),t.addScenes(o),i.push(t)}})),e.forEach((e=>{e.getSceneType()===eV.composite||i.some((t=>t.getSceneType()===eV.composite&&t.getScenes().includes(e)))||i.push(e)})),i}},uK=class{transform(e){var t;let n=(null===(t=e[0])||void 0===t?void 0:t.getSceneType())===eV.video?e[0]:null,i=null==n?void 0:n.getTransitions().find((e=>e.name===_l.NEXT));return(null==i?void 0:i.actions.some((e=>e.name===nl.SHOW_PICTURE_IN_PICTURE)))&&(i.actions=i.actions.filter((e=>e.name!==nl.CLOSE_VIDEO)).concat({name:nl.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}};const uY=[new uF,new up,new uC,new uI,new ux,new uK,new uO,new uf,new uG];var uj=(e=new oz,t=uY)=>{let n=new uW(e);t.forEach((e=>{n.addTransformer(e)}));let i=n.build();return r.getInstance().bind(ee,i),i},uX=(e=y(),t=[])=>{if(e.has(L.AD_EXPERIENCE))return"free-form";let n=t.filter((e=>e.getSceneType()!==eV.closed)).map((e=>e.getSceneType().toString()));switch(um(e)&&n.push("lcec"),n.length){case 0:return"unknown";case 1:return`${n[0]}-only`;default:return n.join("-plus-")}},uz=(e=y(),t=uj,n=uR,i=cy)=>{let r;r=e.has(L.AD_EXPERIENCE)?t():n(),i.setValue({adType:uX(e,r)})},u$=()=>{if(!nk())return;let e=r.getInstance(),t=nO();if(!t)return;let n=new oH(t);return e.bind(oH.getServiceIdentifier(),n),n};(v6=T5||(T5={})).BOTTOM="bottom",v6.BOTTOM_RAISED="bottom-raised";const uZ=(e=y())=>{let t=e.get(L.SKOVERLAY_POSITION);switch(t){case"bottom":case"bottom-raised":return t;default:return}},uq=(e=y())=>{var t,n;switch(null===(n=e.get(L.SKOVERLAY_DISMISSIBLE))||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}},uQ=()=>({position:"bottom",dismissible:!0});var uJ=(e=y())=>{let t=uQ(),n=uZ(e);void 0!==n&&(t.position=n);let i=uq(e);return void 0!==i&&(t.dismissible=i),t};(v8=T4||(T4={})).EMIT_PREPARE_ERROR="EMIT_PREPARE_ERROR",v8.PREPARE_OVERLAY="PREPARE_OVERLAY",v8.SET_APP_STORE_ID="SET_APP_STORE_ID";const u0=d({},cU,T4);(v7=T6||(T6={})).CLOSE="CLOSE",v7.FINISH="FINISH",v7.INTERRUPT="INTERRUPT",v7.PREPARE_SUCCESS="PREPARE_SUCCESS",v7.READY="READY",v7.RESUME="RESUME",v7.START_DELAY_SHOW="START_DELAY_SHOW",v7.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",(v9=T8||(T8={})).CLOSED="CLOSED",v9.DELAY_SHOW="DELAY_SHOW",v9.DELAYED_SKO_INTERRUPTED="DELAYED_SKO_INTERRUPTED",v9.IDLE="IDLE",v9.INITIAL="INITIAL",v9.IMMEDIATE_SHOW="IMMEDIATE_SHOW",v9.IMMEDIATE_SHOW_INTERRUPTED="IMMEDIATE_SHOW_INTERRUPTED",v9.PREPARING="PREPARING";var u1="store-kit-overlay";const u2=(e=uQ(),t=_h.APP_STORE)=>({id:u1,initial:_v.IDLE,context:{displayOptions:e,fallback:t},states:{[_v.IDLE]:{on:{[_E.START_DELAY_SHOW]:{target:_v.DELAY_SHOW,actions:[__.ASSIGN_FALLBACK]},[_E.START_IMMEDIATE_SHOW]:{target:_v.IMMEDIATE_SHOW,actions:[__.ASSIGN_FALLBACK,__.SHOW_SKO]},[_E.SET_DISPLAY_OPTIONS]:{actions:__.ASSIGN_DISPLAY_OPTIONS}}},[_v.DELAY_SHOW]:{on:{[_E.CLOSE]:{target:_v.IDLE},[_E.INTERRUPT]:{target:_v.DELAY_SHOW_INTERRUPTED},[_E.SHOW]:{target:_v.DELAY_SHOW_IMMEDIATE,actions:__.SHOW_SKO},[_E.START_IMMEDIATE_SHOW]:{target:_v.IMMEDIATE_SHOW,actions:[__.ASSIGN_FALLBACK,__.CANCEL_DELAY_SHOW,__.SHOW_SKO]}}},[_v.DELAY_SHOW_IMMEDIATE]:{on:{[_E.SET_VISIBLE]:{target:_v.DELAY_SHOW_VISIBLE,actions:__.EMIT_OBSERVABILITY_EVENT},[_E.CLOSE]:{target:_v.IDLE}}},[_v.DELAY_SHOW_VISIBLE]:{on:{[_E.CLOSE]:{target:_v.CLOSING,actions:__.CLOSE_SKO},[_E.FINISH]:{target:_v.IDLE},[_E.INTERRUPT]:{target:_v.DELAY_SHOW_INTERRUPTED,actions:__.CLOSE_SKO}}},[_v.DELAY_SHOW_INTERRUPTED]:{on:{[_E.RESUME]:{target:_v.DELAY_SHOW_IMMEDIATE,actions:__.SHOW_SKO},[_E.CLOSE]:{target:_v.IDLE}}},[_v.IMMEDIATE_SHOW]:{on:{[_E.SET_VISIBLE]:{target:_v.IMMEDIATE_SHOW_VISIBLE,actions:__.EMIT_OBSERVABILITY_EVENT},[_E.INTERRUPT]:{target:_v.CLOSING,actions:__.CLOSE_SKO},[_E.SET_FALLBACK]:{target:_v.FALLBACK}}},[_v.IMMEDIATE_SHOW_VISIBLE]:{on:{[_E.CLOSE]:{target:_v.CLOSING,actions:__.CLOSE_SKO},[_E.FINISH]:{target:_v.IDLE},[_E.INTERRUPT]:{target:_v.CLOSING,actions:__.CLOSE_SKO}}},[_v.FALLBACK]:{on:{[_E.START_IMMEDIATE_SHOW]:{actions:__.SHOW_FALLBACK}}},[_v.CLOSING]:{on:{[_E.FINISH]:{target:_v.IDLE}}},[_v.ERROR]:{},[_v.INITIAL]:{},[_v.PREPARING]:{}}}),u3=(e,t,n,i)=>({actions:{[__.EMIT_OBSERVABILITY_EVENT]:()=>{t.emit(eP.STORE_KIT_OVERLAY)},[__.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.openAppStore)||void 0===n||n.call(i,1,t.displayOptions)},[__.CLOSE_SKO]:()=>{var t,n;null===(n=e.getMraidExt())||void 0===n||null===(t=n.dismissStoreOverlayView)||void 0===t||t.call(n)},[__.ASSIGN_FALLBACK]:p(((e,t)=>{var n;return C(d({},e),{fallback:null!==(n=t.fallback)&&void 0!==n?n:e.fallback})})),[__.ASSIGN_DISPLAY_OPTIONS]:p(((e,t)=>{var n;return C(d({},e),{displayOptions:null!==(n=t.displayOptions)&&void 0!==n?n:e.displayOptions})})),[__.SHOW_FALLBACK]:e=>{switch(e.fallback){case _h.SKPV:n.emit(cG.SKO_FALLBACK_TO_SKPV);break;case _h.APP_STORE:n.emit(cG.STORE_KIT_FALLBACK_TO_MRAID)}},[__.CANCEL_DELAY_SHOW]:()=>{null==i||i.reset()}}}),u5=(e=uQ(),t=_h.APP_STORE)=>{let n=u2(e,t);return C(d({},n),{initial:_v.INITIAL,context:{appStoreId:void 0,displayOptions:e,fallback:t},states:C(d({},n.states),{[_v.INITIAL]:{on:{[_E.READY]:{target:_v.PREPARING,actions:[u0.SET_APP_STORE_ID,u0.PREPARE_OVERLAY]}}},[_v.PREPARING]:{on:{[_E.SET_PREPARED]:{target:_v.IDLE},[_E.SET_ERROR]:{target:_v.ERROR,actions:u0.EMIT_PREPARE_ERROR}}},[_v.DELAY_SHOW_VISIBLE]:{on:{[_E.CLOSE]:{target:_v.CLOSING,actions:__.CLOSE_SKO},[_E.FINISH]:{target:_v.INITIAL},[_E.INTERRUPT]:{target:_v.DELAY_SHOW_INTERRUPTED,actions:__.CLOSE_SKO}}},[_v.IMMEDIATE_SHOW_VISIBLE]:{on:{[_E.CLOSE]:{target:_v.CLOSING,actions:__.CLOSE_SKO},[_E.FINISH]:{target:_v.INITIAL},[_E.INTERRUPT]:{target:_v.CLOSING,actions:__.CLOSE_SKO}}},[_v.CLOSING]:{on:{[_E.FINISH]:{target:_v.INITIAL}}}})})},u4=(e=R(),t=eZ(),n=oW(),i=cF())=>({actions:C(d({},u3(e,t,i,n).actions),{[u0.PREPARE_OVERLAY]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[u0.SET_APP_STORE_ID]:p({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[u0.EMIT_PREPARE_ERROR]:()=>{t.emit(eP.STORE_KIT_OVERLAY_PREPARE_ERROR)},[__.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.presentStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[__.CLOSE_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.dismissStoreOverlayView)||void 0===n||n.call(i,t.appStoreId)}})});var u6=class extends nI{init(e){this.interpreter.send(d({type:_E.READY},e))}close(){super.close(),this.interpreter.send({type:_E.READY})}finish(){super.finish(),this.interpreter.send({type:_E.READY})}constructor(e=u5,t=u4,n=no(),i=y(),r=Y(),a=R()){super(e(uJ(i),nC(r)),t(a),n),this.stateMachineService=n,this.tokenService=i,this.environmentService=r,this.mraidService=a}},u8=class extends nI{constructor(e=u2,t=u3,n=no(),i=y(),r=Y(),a=R(),o=eZ(),s=cF(),l=oW()){super(e(uJ(i),nC(r)),t(a,o,s,l),n)}},u7=class{withAppStoreId(e){let t=io(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){if(this.environmentService.getOperatingSystem()===eR.iOS&&this.environmentService.getOsVersion()>=nw)return dw(this.environmentService)?new u8:this.withAppStoreId(new u6)}constructor(e=Y(),t=y()){this.environmentService=e,this.tokenService=t}},u9=(e=Y(),t=y())=>{let n=r.getInstance(),i=new u7(e,t).resolve();return i&&n.bind(nI.getServiceIdentifier(),i),i},Ee=(e=ov())=>{e.init()};const Et={options:void 0,lastActivity:void 0,volume:void 0,sessionContent:void 0,state:void 0,nativeView:void 0},En=()=>{if(window.omidBridge){var e,t,n,i,r,a,o,s,l,d,c,u;let{options:E,lastActivity:v,volume:_,sessionContent:h,state:T,nativeView:S}=Et;E&&(null===(e=(t=window.omidBridge).init)||void 0===e||e.call(t,...E)),v&&(null===(n=(i=window.omidBridge).setLastActivity)||void 0===n||n.call(i,...v)),_&&(null===(r=(a=window.omidBridge).setDeviceVolume)||void 0===r||r.call(a,..._)),h&&(null===(o=(s=window.omidBridge).startSession)||void 0===o||o.call(s,...h)),T&&(null===(l=(d=window.omidBridge).setState)||void 0===l||l.call(d,...T)),S&&(null===(c=(u=window.omidBridge).setNativeViewHierarchy)||void 0===c||c.call(u,...S))}};var Ei=e=>new Promise(((t,n)=>{let i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=t,i.onerror=()=>n(Error(`Failed to load script url ${e}`))}));const Er=new b("6.9.1"),Ea=async(e=y(),t=Y(),n=Ei,i=es(),r=En)=>{if(q(e.get(L.OM_ENABLED))&&!t.getSdkVersion().isLessThan(Er))try{await n("omsdk.js"),await n("omsdk-session.js"),r()}catch(e){i.emit({type:"error-logging",event:iE.EXCEPTION,data:{error:{message:"Load OMSDK files failed"}}})}},Eo=e=>{var t,n;null!=(null==e||null===(t=e.data)||void 0===t?void 0:t.currentTime)&&null!=(null==e||null===(n=e.data)||void 0===n?void 0:n.duration)&&i6(e.data.currentTime,e.data.duration,Math.round(e.data.currentTime))},Es=e=>{let t=$();ay(t)&&oL(e,t.getId(),t.getTrackingEventMapConfig())},El=e=>{var t,n;let i=cR();(null==e||null===(t=e.data)||void 0===t?void 0:t.error)&&i.pushError(e.data.error,{url:null===(n=e.data)||void 0===n?void 0:n.videoUrl,error_source:ew.RESOURCE})};var Ed=(e,t)=>{let n=ii(e);switch(t.event){case iq.PROGRESS:Eo(t);break;case iq.MUTE:case iq.UNMUTE:n.emit(t.event===iq.MUTE?n9.VIDEO_MUTE:n9.VIDEO_UNMUTE),Es(t.event===iq.MUTE?ek.MUTE:ek.UNMUTE);break;case iq.CLOSE:n.emit(n9.VIDEO_CLOSE),Es(ek.SKIP);break;case iq.PAUSE:case iq.PLAY:Es(t.event===iq.PAUSE?ek.PAUSE:ek.RESUME);break;case iq.ERROR:El(t)}};const Ec=(e,t)=>{if(t===eR.iOS)return"0.0.0";switch(e){case n9.REWARD_GRANTED:return"6.12.0";case n9.VIDEO_LENGTH:return"6.9.0";default:return"0.0.0"}};var Eu=(e,t,n=R().getMraidBridgeExt(),i=Y())=>{let r=i.getSdkVersion(),a=Ec(t.event,i.getOperatingSystem());r.isGreaterThanOrEqualTo(new b(a))&&(null==n||n.notifyTPAT(t.event))},EE=(e,t,n=nE(),i=nc(),r=oc)=>{if(t.event===nU.MINIMIZED)n.standby(),i.pauseAll();else if(t.event===nU.MAXIMIZED){let e=r();if(null==e?void 0:e.state.matches(_Y.AUTO_PLAY_FAIL))return;n.wake(),i.startAll()}};let Ev=null;var E_=(e,t,n=R())=>{if(t.event===nm.START){if(Ev)return;let t=n.getMraidBridgeExt();t&&(Ev=window.setInterval((()=>{t.creativeHeartbeat(),e.getLogger("heartbeat").info("Heartbeat")}),4e3))}else t.event===nm.STOP&&Ev&&(window.clearInterval(Ev),Ev=null)};(_e=T7||(T7={})).OVERLAY_PREPARED="vungle.events.storeoverlay.success",_e.OVERLAY_VISIBLE="vungle.events.storeoverlay.visible",_e.OVERLAY_FINISHED="vungle.events.storeoverlay.finished",_e.OVERLAY_FAILED="vungle.events.storeoverlay.failed",(_t=T9||(T9={})).STORE_VIEW_PREPARED="vungle.events.preparestore.success",_t.STORE_VIEW_CLOSED="vungle.events.preparestore.finished",(_n=Se||(Se={})).VISIBLE="vungle.events.storekit.visible",_n.FAILED="vungle.events.storekit.failed",_n.FINISHED="vungle.events.storekit.finished";var Eh=(e=no(),t=u1)=>cB(e,t);(_i=St||(St={}))[_i.PRODUCT_VIEW_MODE=0]="PRODUCT_VIEW_MODE",_i[_i.OVERLAY_MODE=1]="OVERLAY_MODE";const ET=e=>{var t;if(0===e){let e=nO();(null==e?void 0:e.isOpen())&&(null==e||e.close())}else 1===e&&(null===(t=Eh())||void 0===t||t.send({type:_E.SET_VISIBLE}))},ES=e=>{var t,n;0===e?null===(t=nL())||void 0===t||t.close():1===e&&(null===(n=nO())||void 0===n||n.finish())},Ep=e=>{var t,n;0===e?null===(t=nL())||void 0===t||t.fallback():1===e&&(null===(n=nO())||void 0===n||n.fallback())};var Eg=(e,t)=>{var n;if(!Object.values(Se).includes(t.event))return;let i=null===(n=t.data)||void 0===n?void 0:n.mode;switch(t.event){case Se.VISIBLE:ET(i);break;case Se.FINISHED:ES(i);break;case Se.FAILED:Ep(i)}},EC=(e,t,n=Y(),i=ov())=>{t.data.isFatal&&(n.getSdkVersion().isGreaterThanOrEqualTo(M.sdkSeven)?i.notifyFatalError(t):nR())},EI=(e,t)=>{ng()&&Object.values(T9).includes(t.event)&&{[T9.STORE_VIEW_PREPARED]:()=>{var e;null===(e=cH())||void 0===e||e.send({type:_C.PREPARE_SUCCESS})},[T9.STORE_VIEW_CLOSED]:()=>{var e;null===(e=cH())||void 0===e||e.send({type:_C.CLOSE})}}[t.event]()},EO=(e,t)=>{var n;if(!nk())return;let i=nO();null===(n={[T7.OVERLAY_PREPARED]:()=>{var e;null===(e=Eh())||void 0===e||e.send({type:_E.SET_PREPARED})},[T7.OVERLAY_FINISHED]:()=>{var e;null===(e=Eh())||void 0===e||e.send({type:_E.FINISH})},[T7.OVERLAY_FAILED]:()=>{let e=Eh();(null==e?void 0:e.state.matches(_v.PREPARING))?e.send({type:_E.SET_ERROR}):null==i||i.fallback()},[T7.OVERLAY_VISIBLE]:()=>{var e;null===(e=Eh())||void 0===e||e.send({type:_E.SET_VISIBLE})}}[t.event])||void 0===n||n.call(void 0)},EA=(e,t)=>{if(t.event===o4.CLOSE){let{sendAdEvent:n,isVideoState:i,isCloseButtonVisible:r}=t.data;if(!r)return;e.getLogger("custom-mraid").info(o4.CLOSE);let a=lE();if((null==a?void 0:a.state.value)===hV.SHOWING)return void a.send({type:hM.HIDE});if(!o1().state.context.isPrivacyButtonVisible){if(Q()&&i)return void l3(n)({type:_l.NEXT});n({type:_l.NEXT})}}};const Em=(e,t)=>e.getActivityEvents().filter((e=>"error-logging"===e.activity.eventType&&e.activity.data.error.message===t.message&&e.activity.data.error.error_source===t.error_source)).length>1;var Ef=(e,t)=>{var n;let i=cR();if("error-logging"===t.type&&(null===(n=t.data)||void 0===n?void 0:n.error)&&!Em(e,t.data.error))i.pushError(t.data.error);else if("cta"===t.type||"fsc"===t.type){let e=z.getValue().scene,n={type:t.type,value:t.event,scene_type:null==e?void 0:e.getSceneType()},r=d({name:eP.CTA},n);i.pushEvent(r)}},EN=(e,t)=>{let n=cR();t.event===eL.EVENT&&t.data.name?n.pushEvent(d({name:t.data.name},t.data)):t.event===eL.ERROR&&t.data.error&&n.pushError(t.data.error)},ED=(e,t,n=ou())=>{t.event===a0.SILENT?n.mute():t.event===a0.UN_SILENT&&n.unmute()},ER=(e,t,n=R())=>{var i;t.event===oj.DECODING_ERROR&&(null===(i=n.getMraid())||void 0===i||i.close())},Ey=(e,t=nf())=>{let n=t.getActivityEventPairs("viewability",nU.MINIMIZED,nU.MAXIMIZED),i=0;n.forEach((e=>{i+=e[1].timestamp-e[0].timestamp}));let r=t.getActivityEventPairs("store-kit-product-view",cY.APP_STORE_OPEN,cY.APP_STORE_CLOSE),a=0;return r.forEach((e=>{a+=e[1].timestamp-e[0].timestamp})),Date.now()-e-i+a},EL=(e,t,n=r.getInstance().startTimestamp,i=R(),a=eZ(),o=cC(),s=o8(),l=Ey)=>ak((()=>s.haveAllCompleted()),aU.MAX_WAIT_TIME+100,Error("error waiting for all event streams to finish")).catch((()=>{})).finally((()=>{a.emit({name:eP.AD_CLOSE,ad_duration:l(n,e)}),null==o||o.addRecord(),i.getMraid().close()}));const EP=(e,t=en())=>t.find((t=>t.getId()===e))||t.filter((e=>e.getSceneType()===eV.composite)).map((t=>EP(e,t.getScenes()))).find(Boolean);var Ew=EP,Eb=(e,t,n=Ew,i=en,r=o8(),a=eZ())=>{let o=n(t.data.scene_id);if(o&&t.event===iw.SCENE_END){let e=i().indexOf(o);r.subscribeAll(o).then((n=>{Object.keys(n).length>0&&a.emit({type:"observability",event:eL.EVENT,data:d({name:eP.SCENE_END,scene_id:t.data.scene_id,scene_type:t.data.scene_type,scene_index:e},n)})}))}},EV=(e,t,n=R(),i=ii(),r=eZ())=>{t.event===nx.GRANT_REWARD&&(n.getMraidBridgeExt().notifySuccessfulViewAd(),i.emit(n9.REWARD_GRANTED),r.emit(eP.GRANT_REWARD))},EM=(e,t,n=sF(),i=nO(),r=nL(),a=Y(),o=j())=>{if(t.event===cG.SKPV_FALLBACK_TO_SKO){var s;let t=null!==(s=null==i?void 0:i.getState().matches(_v.FALLBACK))&&void 0!==s&&s;if(nk(a,o)&&!t)return void(null==i||i.open({fallback:_h.APP_STORE}));e.emit({type:"store-kit-orchestration",event:cG.STORE_KIT_FALLBACK_TO_MRAID})}t.event===cG.SKO_FALLBACK_TO_SKPV&&(null==r||r.open()),t.event===cG.STORE_KIT_FALLBACK_TO_MRAID&&n.invoke({url:void 0,target:eM.OFF,fireMMPEvents:!1})},Ek=(e,t,n=eZ())=>{if(t.event===cY.APP_STORE_CLOSE){let t=e.getActivityEventPairs("store-kit-product-view",cY.APP_STORE_OPEN,cY.APP_STORE_CLOSE);if(n.getEventCount(eP.APP_STORE_DURATION)<t.length){let e={name:eP.APP_STORE_DURATION,duration:Date.now()-t[t.length-1][0].timestamp};n.emit(e)}}},EU=(e,t,n=oE(),i=o1)=>{i().state.context.shouldRenderPictureInPicture&&(n.closeVideo(),i().send({type:_l.CLOSE_PICTURE_IN_PICTURE}))},EB=(e,t,n=eZ())=>{t.event===n9.CHECKPOINT_0&&n.emit(eP.IMPRESSION)};(Sn||(Sn={})).INACTIVITY="INACTIVITY";var EH=Sn,EW=(e=$())=>({scene_id:e.getId(),scene_type:e.getSceneType()}),Ex=(e=EW,t=ok)=>{let n=t(e().scene_id);return null==n?void 0:n.state.matches(_2.SHOWING)},EF=(e,t,n=eZ(),i=Ex,r=$,a=en)=>{if(t.event===EH.INACTIVITY){let e=r(),t=a().findIndex((t=>t.getId()===(null==e?void 0:e.getId())));n.emit({name:eP.INACTIVITY_OBSERVED,scene_id:null==e?void 0:e.getId(),scene_type:null==e?void 0:e.getSceneType(),scene_index:t,last_chance_endcard_visible:i()})}},EG=()=>{let e=nf();e.addEventHandler("*",Ef),e.addEventHandler("close",EL),e.addEventHandler("observability",EN),e.addEventHandler("heartbeat",E_),e.addEventHandler("storekit-mraid",Eg),e.addEventHandler("storekit-mraid",EI),e.addEventHandler("storekit-mraid",EO),e.addEventHandler("tpat",Eu),e.addEventHandler("tpat",EB),e.addEventHandler("video",Ed),e.addEventHandler("video",l4),e.addEventHandler("viewability",EE),e.addEventHandler("error-logging",EC),e.addEventHandler("custom-mraid",EA),e.addEventHandler("videoViewed",i8),e.addEventHandler("silent",ED),e.addEventHandler("free-form",ER),e.addEventHandler("scene-event",Eb),e.addEventHandler("incentivized-event",EV),e.addEventHandler("store-kit-product-view",Ek),e.addEventHandler("store-kit-orchestration",EM),e.addEventHandler("picture-in-picture",EU),e.addEventHandler("inactivity",EF)},EK=(e=R(),t=y())=>{let n=e.getMraidBridgeExt();n&&(t.replacementTokens=n.getReplacementTokens())},EY=()=>es(),Ej=(e=Y(),t=j(),n=EY(),i=o5())=>{nk(e,t)&&!dw(e)&&Object.values(T7).forEach((e=>{null==i||i.addEventListener(e,(()=>{n.emit({type:"storekit-mraid",event:e})}))}))},EX=(e=Y(),t=EY(),n=o5())=>{ng(e)&&!dw(e)&&Object.values(T9).forEach((e=>{null==n||n.addEventListener(e,(()=>{t.emit({type:"storekit-mraid",event:e})}))}))},Ez=(e=Y(),t=EY(),n=o5())=>{e.getOperatingSystem()===eR.iOS&&Object.values(Se).forEach((e=>{null==n||n.addEventListener(e,(n=>{t.emit({type:"storekit-mraid",event:e,data:n.detail})}))}))},E$=()=>es();const EZ=new b("7");var Eq,EQ,EJ,E0,E1,E2,E3,E5,E4,E6,E8,E7,E9,ve,vt,vn,vi,vr,va,vo,vs,vl,vd,vc,vu,vE,vv,v_,vh,vT,vS,vp,vg,vC,vI,vO,vA,vm,vf,vN,vD,vR,vy,vL,vP,vw,vb,vV,vM,vk,vU,vB,vH,vW,vx,vF,vG,vK,vY,vj,vX,vz,v$,vZ,vq,vQ,vJ,v0,v1,v2,v3,v5,v4,v6,v8,v7,v9,_e,_t,_n,_i,_r,_a,_o,_s,_l,_d,_c,_u,_E,_v,__,_h,_T,_S,_p,_g,_C,_I,_O,_A,_m,_f,_N,_D,_R,_y,_L,_P,_w,_b,_V,_M,_k,_U,_B,_H,_W,_x,_F,_G,_K,_Y,_j,_X,_z,_$,_Z,_q,_Q,_J,_0,_1,_2,_3,_5,_4,_6,_8,_7,_9,he,ht,hn,hi,hr,ha,ho,hs,hl,hd,hc,hu,hE,hv,h_,hh,hT,hS,hp,hg,hC,hI,hO,hA,hm,hf,hN,hD,hR,hy,hL,hP,hw,hb,hV,hM,hk,hU,hB,hH,hW,hx,hF,hG,hK,hY,hj,hX,hz,h$,hZ,hq,hQ,hJ,h0,h1,h2,h3,h5,h4,h6,h8,h7,h9,Te,Tt,Tn,Ti,Tr,Ta,To,Ts,Tl,Td,Tc,Tu,TE,Tv,T_,Th,TT,TS,Tp,Tg,TC,TI,TO,TA,Tm,Tf,TN,TD,TR,Ty,TL,TP,Tw,Tb,TV,TM,Tk,TU,TB,TH,TW,Tx,TF,TG,TK,TY,Tj,TX,Tz,T$,TZ,Tq,TQ,TJ,T0,T1,T2,T3,T5,T4,T6,T8,T7,T9,Se,St,Sn,Si,Sr,Sa,So,Ss,Sl=(e=R(),t=E$(),n=Y())=>{var i;let r=void 0!==(null===(i=e.getMraidBridgeExt())||void 0===i?void 0:i.creativeHeartbeat);n.getSdkVersion().isGreaterThanOrEqualTo(EZ)&&r&&t.emit({type:"heartbeat",event:nm.START})},Sd=-1,Sc=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Sd=t.timeStamp,e(t))}),!0)},Su=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},SE=function(){var e=Su();return e&&e.activationStart||0},Sv=function(e,t){var n=Su(),i="navigate";return Sd>=0?i="back-forward-cache":n&&(document.prerendering||SE()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},S_=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},Sh=function(e,t,n,i){var r,a;return function(o){var s;t.value>=0&&(o||i)&&((a=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=a,t.rating=(s=t.value)>n[1]?"poor":s>n[0]?"needs-improvement":"good",e(t))}},ST=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},SS=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},Sp=function(e){var t=!1;return function(){t||(e(),t=!0)}},Sg=-1,SC=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},SI=function(e){"hidden"===document.visibilityState&&Sg>-1&&(Sg="visibilitychange"===e.type?e.timeStamp:0,SA())},SO=function(){addEventListener("visibilitychange",SI,!0),addEventListener("prerenderingchange",SI,!0)},SA=function(){removeEventListener("visibilitychange",SI,!0),removeEventListener("prerenderingchange",SI,!0)},Sm=function(){return Sg<0&&(Sg=SC(),SO(),Sc((function(){setTimeout((function(){Sg=SC(),SO()}),0)}))),{get firstHiddenTime(){return Sg}}},Sf=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},SN=[1800,3e3],SD=function(e,t){t=t||{},Sf((function(){var n,i=Sm(),r=Sv("FCP"),a=S_("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-SE(),0),r.entries.push(e),n(!0)))}))}));a&&(n=Sh(e,r,SN,t.reportAllChanges),Sc((function(i){n=Sh(e,r=Sv("FCP"),SN,t.reportAllChanges),ST((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},SR=0,Sy=1/0,SL=0,SP=function(e){e.forEach((function(e){e.interactionId&&(Sy=Math.min(Sy,e.interactionId),SR=(SL=Math.max(SL,e.interactionId))?(SL-Sy)/7+1:0)}))},Sw=function(){return Si?SR:performance.interactionCount||0},Sb=function(){"interactionCount"in performance||Si||(Si=S_("event",SP,{type:"event",buffered:!0,durationThreshold:0}))},SV=[],SM=new Map,Sk=0,SU=function(){var e=Math.min(SV.length-1,Math.floor((Sw()-Sk)/50));return SV[e]},SB=[],SH=function(e){if(SB.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=SV[SV.length-1],n=SM.get(e.interactionId);if(n||SV.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};SM.set(i.id,i),SV.push(i)}SV.sort((function(e,t){return t.latency-e.latency})),SV.length>10&&SV.splice(10).forEach((function(e){return SM.delete(e.id)}))}}},SW=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Sp(e),"hidden"===document.visibilityState?e():(n=t(e),SS(e)),n},Sx=[200,500],SF=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Sf((function(){Sb();var n,i,r=Sv("INP"),a=function(e){SW((function(){e.forEach(SH);var t=SU();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())}))},o=S_("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=Sh(e,r,Sx,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),SS((function(){a(o.takeRecords()),i(!0)})),Sc((function(){Sk=Sw(),SV.length=0,SM.clear(),i=Sh(e,r=Sv("INP"),Sx,t.reportAllChanges)})))})))},SG=[2500,4e3],SK={},SY=function(e,t){t=t||{},Sf((function(){var n,i=Sm(),r=Sv("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-SE(),0),r.entries=[e],n())}))},o=S_("largest-contentful-paint",a);if(o){n=Sh(e,r,SG,t.reportAllChanges);var s=Sp((function(){SK[r.id]||(a(o.takeRecords()),o.disconnect(),SK[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return SW(s)}),{once:!0,capture:!0})})),SS(s),Sc((function(i){n=Sh(e,r=Sv("LCP"),SG,t.reportAllChanges),ST((function(){r.value=performance.now()-i.timeStamp,SK[r.id]=!0,n(!0)}))}))}}))},Sj=[800,1800],SX=function e(t){document.prerendering?Sf((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Sz=function(e,t){t=t||{};var n=Sv("TTFB"),i=Sh(e,n,Sj,t.reportAllChanges);SX((function(){var r=Su();r&&(n.value=Math.max(r.responseStart-SE(),0),n.entries=[r],i(!0),Sc((function(){(i=Sh(e,n=Sv("TTFB",0),Sj,t.reportAllChanges))(!0)})))}))},S$={passive:!0,capture:!0},SZ=new Date,Sq=function(e,t){Sr||(Sr=t,Sa=e,So=new Date,S0(removeEventListener),SQ())},SQ=function(){if(Sa>=0&&Sa<So-SZ){var e={entryType:"first-input",name:Sr.type,target:Sr.target,cancelable:Sr.cancelable,startTime:Sr.timeStamp,processingStart:Sr.timeStamp+Sa};Ss.forEach((function(t){t(e)})),Ss=[]}},SJ=function(e){if(e.cancelable){var t,n,i,r=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(t=function(){Sq(r,e),i()},n=function(){i()},i=function(){removeEventListener("pointerup",t,S$),removeEventListener("pointercancel",n,S$)},addEventListener("pointerup",t,S$),addEventListener("pointercancel",n,S$)):Sq(r,e)}},S0=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,SJ,S$)}))};const S1=e=>t=>{let n={FCP:eP.WEB_VITALS_FIRST_CONTENTFUL_PAINT,INP:eP.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,LCP:eP.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,TTFB:eP.WEB_VITALS_TIME_TO_FIRST_BYTE};e.emit({name:n[t.name],value:Math.round(t.value),rating:t.rating})};var S2=(e=eZ(),t=SD,n=SF,i=SY,r=Sz)=>{let a=S1(e);t(a),n(a),i(a),r(a)},S3=(e=en())=>{let t=e.filter((e=>e.getSceneType()===eV.endcard));t.length&&t.forEach((e=>{e.initIframeContentData()}))},S5=(e,t)=>iD(e,"observability").pipe(iN((e=>e.data.name===t))),S4=(e=nE(),t=nf(),n=eZ(),i=1e4,r=S5)=>{r(n,eP.AD_START).pipe(iU((()=>iD(t,"*").pipe(function(e,t=nE()){return n=>new im((i=>{let r,a=()=>{r&&(r.destroy(),r=void 0)},o=n.subscribe({next:n=>{a(),(r=t.getNewTimer(e,(()=>(e=>{i.next(e),r=void 0})(n)))).start()},error:e=>{var t;a(),null===(t=i.error)||void 0===t||t.call(i,e)},complete:()=>{var e;a(),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{a(),o.unsubscribe()}}}))}(i,e),iL(iG(iD(t,"inactivity"),r(n,eP.AD_CLOSE))))))).subscribe({next:()=>{t.emit({type:"inactivity",event:EH.INACTIVITY,fireOnlyOnce:!0})},error:e=>{t.emit({type:"error-logging",event:iE.EXCEPTION,data:{error:e}})},complete:()=>{}})},S6=(e=R(),t=Y())=>{var n;let i=e.getMraid();t.getOperatingSystem()===eR.Windows&&(null==i||null===(n=i.useCustomClose)||void 0===n||n.call(i,!0))};const S8=async()=>{EK(),EG(),cM();let e=eZ();e.emit(eP.AD_LOAD),Ee(),cf(),ur(),u9(),u$(),cA(),EX(),Ej(),Ez(),uz(),S3(),cD(),await Ea(),Sl(),S2(),S6(),cm(),S4(),e.emit(eP.AD_LOAD_COMPLETE)};(()=>{let e=r.getInstance(),t=new o,n=new A,i=new w(t,n);e.bind(o.getServiceIdentifier(),t),e.bind(l.getServiceIdentifier(),new l),e.bind(g.getServiceIdentifier(),new g),e.bind(A.getServiceIdentifier(),n),e.bind(D.getServiceIdentifier(),new D),e.bind(f.getServiceIdentifier(),new f),e.bind(w.getServiceIdentifier(),i),e.bind(M.getServiceIdentifier(),new M(t,n)),e.bind(Z.getServiceIdentifier(),new Z),e.bind(eq.getServiceIdentifier(),new eq),e.bind(eQ.getServiceIdentifier(),new eQ),e.bind(na.getServiceIdentifier(),new na),e.bind(aP.getServiceIdentifier(),new aP),e.bind(aw.getServiceIdentifier(),new aw(n)),e.bind(aU.getServiceIdentifier(),new aU),e.bind(aG.getServiceIdentifier(),new aG),e.bind(aZ.getServiceIdentifier(),new aZ),e.bind(ao.getServiceIdentifier(),new ao),e.bind(al.getServiceIdentifier(),new al),e.bind(aX.getServiceIdentifier(),new aX)})(),R().init(),window.omidBridge={init:(...e)=>{Et.options=e},setLastActivity:(...e)=>{Et.lastActivity=e},setDeviceVolume:(...e)=>{Et.volume=e},startSession:(...e)=>{Et.sessionContent=e},setState:(...e)=>{Et.state=e},setNativeViewHierarchy:(...e)=>{Et.nativeView=e}},((e=R())=>new Promise((t=>{let n=e.getMraid();(null==n?void 0:n.getState())===em.LOADING?null==n||n.addEventListener("ready",(()=>{t(!0)})):t(!0)})))().then(S8).then((()=>new Promise((e=>{var t;let n=R();if(null===(t=n.getMraid())||void 0===t?void 0:t.isViewable())e(!0);else{let t=window.setInterval((()=>{var i;(null===(i=n.getMraid())||void 0===i?void 0:i.isViewable())&&(window.clearInterval(t),e(!0))}),100)}})))).then((()=>{var e,t,n,i,r;cO(),cg(),e=aQ(cp,{}),(t=document.getElementById("dynamic"))==document&&(t=document.documentElement),eB.__&&eB.__(e,t),n=t.__k,i=[],r=[],to(t,e=t.__k=e4(e8,null,[e]),n||eJ,eJ,t.namespaceURI,n?null:t.firstChild?eU.call(t.childNodes):null,i,n?n.__e:t.firstChild,!1,r),ts(i,e,r)}));</script> </body></html>